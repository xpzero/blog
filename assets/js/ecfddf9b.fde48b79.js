"use strict";(self.webpackChunkblog_2=self.webpackChunkblog_2||[]).push([[3625],{30608:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>x,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var t=l(11527),d=l(56213);const s={title:"Webpack\u6253\u5305library\u521d\u4f53\u9a8c",toc_max_heading_level:6,tags:["webpack"]},i=void 0,c={permalink:"/blog/index/2021/10/28/first-webpack-library",source:"@site/blog/2021/10/28/first-webpack-library.md",title:"Webpack\u6253\u5305library\u521d\u4f53\u9a8c",description:"\u6982\u8ff0",date:"2021-10-28T00:00:00.000Z",formattedDate:"2021\u5e7410\u670828\u65e5",tags:[{label:"webpack",permalink:"/blog/index/tags/webpack"}],readingTime:3.76,hasTruncateMarker:!0,authors:[],frontMatter:{title:"Webpack\u6253\u5305library\u521d\u4f53\u9a8c",toc_max_heading_level:6,tags:["webpack"]},unlisted:!1,prevItem:{title:"\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b",permalink:"/blog/index/2021/11/25/first-completion-about-d3"},nextItem:{title:"CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0",permalink:"/blog/index/2021/10/15/how-to-use-css3-transition"}},r={authorsImageUrls:[]},a=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"export\u9ed8\u8ba4\u503c",id:"export\u9ed8\u8ba4\u503c",level:3},{value:"export: &#39;default&#39;",id:"export-default",level:3},{value:"export: [&#39;xx1&#39;, &#39;xx2&#39;]",id:"export-xx1-xx2",level:3},{value:"\u6848\u4f8b\u6f14\u793a",id:"\u6848\u4f8b\u6f14\u793a",level:2},{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:3},{value:"\u521d\u59cb\u5316\u9879\u76ee",id:"\u521d\u59cb\u5316\u9879\u76ee",level:4},{value:"\u5b89\u88c5webpack",id:"\u5b89\u88c5webpack",level:4},{value:"\u914d\u7f6ewebpack",id:"\u914d\u7f6ewebpack",level:4},{value:"\u65b0\u5efa\u6d4b\u8bd5js\u6587\u4ef6",id:"\u65b0\u5efa\u6d4b\u8bd5js\u6587\u4ef6",level:4},{value:"\u65b0\u5efatest.js\u6587\u4ef6",id:"\u65b0\u5efatestjs\u6587\u4ef6",level:5},{value:"\u65b0\u5efaindex.js\u6587\u4ef6",id:"\u65b0\u5efaindexjs\u6587\u4ef6",level:5},{value:"\u65b0\u5efa\u6d4b\u8bd5index.html\u6587\u4ef6",id:"\u65b0\u5efa\u6d4b\u8bd5indexhtml\u6587\u4ef6",level:4},{value:"\u914d\u7f6ewebpack\u5230package.json",id:"\u914d\u7f6ewebpack\u5230packagejson",level:3},{value:"\u6253\u5305\u6d4b\u8bd5",id:"\u6253\u5305\u6d4b\u8bd5",level:3},{value:"\u8fd0\u884cindex.html\u6587\u4ef6",id:"\u8fd0\u884cindexhtml\u6587\u4ef6",level:4},{value:"export\u7c7b\u578b",id:"export\u7c7b\u578b",level:5},{value:"webpack\u4e2d\u6ca1\u6709\u914d\u7f6eexport\u5c5e\u6027",id:"webpack\u4e2d\u6ca1\u6709\u914d\u7f6eexport\u5c5e\u6027",level:6},{value:"export\u5c5e\u6027\u503c\u4e3adefault",id:"export\u5c5e\u6027\u503c\u4e3adefault",level:6},{value:"export\u5c5e\u6027\u503c\u4e3aa",id:"export\u5c5e\u6027\u503c\u4e3aa",level:6},{value:"export\u5c5e\u6027\u503c\u4e3a[&#39;obj&#39;, &#39;chineseName&#39;]",id:"export\u5c5e\u6027\u503c\u4e3aobj-chinesename",level:6}];function o(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",img:"img",p:"p",pre:"pre",...(0,d.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u4ee5\u4e0b\u5185\u5bb9\u5747\u4ee5",(0,t.jsx)(n.code,{children:"webpack"}),"\u914d\u7f6e\u4e2d\u7684",(0,t.jsx)(n.code,{children:"output.library.type: 'umd'"}),"\u4e3a\u57fa\u7840"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u7528",(0,t.jsx)(n.code,{children:"webpack"}),"\u5c06\u6587\u4ef6\u6253\u5305\u4e3a",(0,t.jsx)(n.code,{children:"library"}),"\u540e\uff0c\u6253\u5305\u597d\u7684\u6587\u4ef6\u88ab",(0,t.jsx)(n.code,{children:"script"}),"\u6807\u7b7e\u5f15\u7528\u65f6\uff0c",(0,t.jsx)(n.code,{children:"library"}),"\u7684\u540d\u5b57\u4f1a\u88ab\u653e\u5728\u5168\u5c40\u53d8\u91cf\u4e2d\u7b49\u5f85\u4f7f\u7528\uff0c\u81f3\u4e8e\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\uff0c\u5219\u4e0e",(0,t.jsx)(n.code,{children:"webpack"}),"\u914d\u7f6e\u4e2d\u7684",(0,t.jsx)(n.code,{children:"output.library.export"}),"\u5c5e\u6027\u503c\u76f8\u5173\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"export\u9ed8\u8ba4\u503c",children:"export\u9ed8\u8ba4\u503c"}),"\n",(0,t.jsxs)(n.p,{children:["\u5f53\u6ca1\u6709\u914d\u7f6e",(0,t.jsx)(n.code,{children:"output.library.export"}),"/",(0,t.jsx)(n.code,{children:"output.library.type"}),"\u4e3a\u7a7a\u5b57\u7b26\u4e32\u65f6\uff0cexport\u7684\u9ed8\u8ba4\u503c\u4e3a",(0,t.jsx)(n.code,{children:"undefined"}),".\u6b64\u65f6\u6253\u5305",(0,t.jsx)(n.code,{children:"library"}),"\uff0c\u5728\u4f7f\u7528\u5e93\u65f6\uff0c\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\u4e3a\u4e3b\u6587\u4ef6\u4e0b\u7684\u6240\u6709\u5bfc\u51fa\u5185\u5bb9"]}),"\n",(0,t.jsx)(n.h3,{id:"export-default",children:"export: 'default'"}),"\n",(0,t.jsxs)(n.p,{children:["\u5f53",(0,t.jsx)(n.code,{children:"output.library.export"}),"\u7684\u503c\u4e3a",(0,t.jsx)(n.code,{children:"default"}),"\u65f6\u6253\u5305\uff0c\u6253\u5305\u540e\u5728\u4f7f\u7528\u5e93\u65f6\uff0c\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\u4e3a\u4e3b\u6587\u4ef6\u4e0b\u4f7f\u7528\u5173\u952e\u5b57",(0,t.jsx)(n.code,{children:"export default"}),"\u5bfc\u51fa\u7684\u5185\u5bb9"]}),"\n",(0,t.jsx)(n.h3,{id:"export-xx1-xx2",children:"export: ['xx1', 'xx2']"}),"\n",(0,t.jsxs)(n.p,{children:["\u5f53",(0,t.jsx)(n.code,{children:"output.library.export"}),"\u7684\u503c\u4e3a",(0,t.jsx)(n.code,{children:"['xx1', 'xx2']"}),"\u65f6\u6253\u5305\uff0c\u6253\u5305\u540e\u5728\u4f7f\u7528\u5e93\u65f6\uff0c\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\u4e3a\u4e3b\u6587\u4ef6\u4e0b\u4f7f\u7528\u5173\u952e\u5b57",(0,t.jsx)(n.code,{children:"export let/const xx1"}),"\u5bfc\u51fa\u7684\u5185\u5bb9\u4e2d\u7684",(0,t.jsx)(n.code,{children:"xx2"}),"\u7684\u5c5e\u6027\u503c"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6848\u4f8b\u6f14\u793a",children:"\u6848\u4f8b\u6f14\u793a"}),"\n",(0,t.jsx)(n.h3,{id:"\u51c6\u5907\u5de5\u4f5c",children:"\u51c6\u5907\u5de5\u4f5c"}),"\n",(0,t.jsx)(n.h4,{id:"\u521d\u59cb\u5316\u9879\u76ee",children:"\u521d\u59cb\u5316\u9879\u76ee"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"npm init -y\n"})}),"\n",(0,t.jsx)(n.h4,{id:"\u5b89\u88c5webpack",children:"\u5b89\u88c5webpack"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"npm i webpack webpack-cli -D\n"})}),"\n",(0,t.jsx)(n.h4,{id:"\u914d\u7f6ewebpack",children:"\u914d\u7f6ewebpack"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'const { resolve } = require("path");\nmodule.exports = {\n  mode: "development",\n  entry: "./src/index.js",\n  output: {\n    filename: "bundle.js",\n    path: resolve(__dirname, "dist"),\n    library: {\n      name: "Testfile", // \u5e93\u540d\n      type: "umd", // \u5141\u8bb8\u5bfc\u51fa\u7684\u5e93\u53ef\u4ee5\u5728CommonJS/AMD\u7684\u89c4\u8303\u4e0b\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5168\u5c40\u53d8\u91cf\u4f7f\u7528\n      export: "default", // \u9ed8\u8ba4\u662fundefined\uff0c\u4e0d\u80fd\u662f\u7a7a\u5b57\u7b26\u4e32[\u6253\u5305\u4f1a\u62a5\u9519]\n    },\n  },\n};\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\u65b0\u5efa\u6d4b\u8bd5js\u6587\u4ef6",children:"\u65b0\u5efa\u6d4b\u8bd5js\u6587\u4ef6"}),"\n",(0,t.jsx)(n.h5,{id:"\u65b0\u5efatestjs\u6587\u4ef6",children:"\u65b0\u5efatest.js\u6587\u4ef6"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u6839\u76ee\u5f55\u7684src\u76ee\u5f55\u4e0b\u521b\u5efa",(0,t.jsx)(n.code,{children:"test.js"}),"\u6587\u4ef6"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"class Test {\n  constructor() {}\n\n  setAge(age) {\n    this.age = age;\n  }\n\n  getAge() {\n    return this.age;\n  }\n}\n\nexport default Test;\n"})}),"\n",(0,t.jsx)(n.h5,{id:"\u65b0\u5efaindexjs\u6587\u4ef6",children:"\u65b0\u5efaindex.js\u6587\u4ef6"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u6839\u76ee\u5f55\u7684src\u76ee\u5f55\u4e0b\u521b\u5efa",(0,t.jsx)(n.code,{children:"index.js"}),"\u6587\u4ef6"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import Test from "./Test";\n\nexport let a = 3;\nexport let obj = { chineseName: "\u4e2d\u56fd" };\nexport default Test;\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\u65b0\u5efa\u6d4b\u8bd5indexhtml\u6587\u4ef6",children:"\u65b0\u5efa\u6d4b\u8bd5index.html\u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!doctype html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Document</title>\n  </head>\n  <body>\n    <script src="./dist/bundle.js"><\/script>\n    <script>\n      debugger;\n    <\/script>\n  </body>\n</html>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u914d\u7f6ewebpack\u5230packagejson",children:"\u914d\u7f6ewebpack\u5230package.json"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"package.json"}),"\u4e2d\u7684",(0,t.jsx)(n.code,{children:"scripts"}),"\u4e0b\u6dfb\u52a0"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"dev": "webpack"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u6253\u5305\u6d4b\u8bd5",children:"\u6253\u5305\u6d4b\u8bd5"}),"\n",(0,t.jsxs)(n.p,{children:["\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u8f93\u5165",(0,t.jsx)(n.code,{children:"npm run dev"}),",\u6253\u5305\u5e93"]}),"\n",(0,t.jsx)(n.h4,{id:"\u8fd0\u884cindexhtml\u6587\u4ef6",children:"\u8fd0\u884cindex.html\u6587\u4ef6"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00",(0,t.jsx)(n.code,{children:"index.html"}),"\u6587\u4ef6\uff0c\u5e76\u6253\u5f00\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u5237\u65b0\u9875\u9762\u3002"]}),"\n",(0,t.jsx)(n.h5,{id:"export\u7c7b\u578b",children:"export\u7c7b\u578b"}),"\n",(0,t.jsx)(n.h6,{id:"webpack\u4e2d\u6ca1\u6709\u914d\u7f6eexport\u5c5e\u6027",children:"webpack\u4e2d\u6ca1\u6709\u914d\u7f6eexport\u5c5e\u6027"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf",(0,t.jsx)(n.code,{children:"Testfile"}),"\u7684\u5185\u5bb9\u4e3a\n",(0,t.jsx)(n.img,{alt:"no-export",src:l(20237).Z+"",width:"2070",height:"821"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u6b64\u65f6Testfile\u662f\u4e00\u4e2a\u5305\u542b\u4e86",(0,t.jsx)(n.code,{children:"index.js"}),"\u4e2d\u5bfc\u51fa\u7684\u6240\u6709\u5185\u5bb9\u7684\u5bf9\u8c61"]}),"\n",(0,t.jsx)(n.h6,{id:"export\u5c5e\u6027\u503c\u4e3adefault",children:"export\u5c5e\u6027\u503c\u4e3adefault"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf",(0,t.jsx)(n.code,{children:"Testfile"}),"\u7684\u5185\u5bb9\u4e3a\n",(0,t.jsx)(n.img,{alt:"default",src:l(8850).Z+"",width:"2011",height:"562"}),"\n\u6b64\u65f6Testfile\u662f",(0,t.jsx)(n.code,{children:"index.js"}),"\u4e2d\u4f7f\u7528",(0,t.jsx)(n.code,{children:"export default"}),"\u5bfc\u51fa\u7684\u5185\u5bb9"]}),"\n",(0,t.jsx)(n.h6,{id:"export\u5c5e\u6027\u503c\u4e3aa",children:"export\u5c5e\u6027\u503c\u4e3aa"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf",(0,t.jsx)(n.code,{children:"Testfile"}),"\u7684\u5185\u5bb9\u4e3a\n",(0,t.jsx)(n.img,{alt:"a",src:l(42437).Z+"",width:"2036",height:"446"}),"\n\u6b64\u65f6Testfile\u662f",(0,t.jsx)(n.code,{children:"index.js"}),"\u4e2d\u4f7f\u7528",(0,t.jsx)(n.code,{children:"export let a = 3"}),"\u5bfc\u51fa\u7684\u5185\u5bb9\u7ed3\u679c\u503c"]}),"\n",(0,t.jsx)(n.h6,{id:"export\u5c5e\u6027\u503c\u4e3aobj-chinesename",children:"export\u5c5e\u6027\u503c\u4e3a['obj', 'chineseName']"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf",(0,t.jsx)(n.code,{children:"Testfile"}),"\u7684\u5185\u5bb9\u4e3a\n",(0,t.jsx)(n.img,{alt:"arr",src:l(91663).Z+"",width:"1934",height:"365"}),"\n\u6b64\u65f6Testfile\u662f",(0,t.jsx)(n.code,{children:"index.js"}),"\u4e2d\u4f7f\u7528",(0,t.jsx)(n.code,{children:"export let obj = {chineseName: '\u4e2d\u56fd'}"}),"\u5bfc\u51fa\u7684\u5185\u5bb9\u7ed3\u679c\u503c"]})]})}function x(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},42437:(e,n,l)=>{l.d(n,{Z:()=>t});const t=l.p+"assets/images/a-140974d3a0a9c5815ae45e6234e6e5b9.png"},91663:(e,n,l)=>{l.d(n,{Z:()=>t});const t=l.p+"assets/images/arr-cc15be25ec2bff9114a387f9816bc0bb.png"},8850:(e,n,l)=>{l.d(n,{Z:()=>t});const t=l.p+"assets/images/default-df560246005add96e3239b7564038a18.png"},20237:(e,n,l)=>{l.d(n,{Z:()=>t});const t=l.p+"assets/images/no-export-211a0bf6ad9c971a2cfd193c963223b0.png"},56213:(e,n,l)=>{l.d(n,{Z:()=>c,a:()=>i});var t=l(50959);const d={},s=t.createContext(d);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);