"use strict";(self.webpackChunkblog_2=self.webpackChunkblog_2||[]).push([[7743],{25803:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/2023/10/22/\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168","metadata":{"permalink":"/blog/index/2023/10/22/\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168","source":"@site/blog/2023/10/22/\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168.md","title":"\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168","description":"\u770b\u5230\u522b\u4eba\u7684\u603b\u7ed3\u4e00\u76f4\u300c\u60ca\u4e3a\u5929\u4eba\u300d\uff0c\u5c31\u5728\u8fd9\u91cc\u4ee5\u81ea\u5df1\u7684\u89c6\u89d2\u8bb0\u5f55\u4e00\u4e0b","date":"2023-10-22T00:00:00.000Z","formattedDate":"2023\u5e7410\u670822\u65e5","tags":[{"label":"\u6d4f\u89c8\u5668\u539f\u7406","permalink":"/blog/index/tags/\u6d4f\u89c8\u5668\u539f\u7406"}],"readingTime":18.33,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168","tags":["\u6d4f\u89c8\u5668\u539f\u7406"]},"nextItem":{"title":"React\u6e32\u67d3\u539f\u7406","permalink":"/blog/index/2023/10/21/React\u6e32\u67d3\u539f\u7406"}},"content":"\u770b\u5230\u522b\u4eba\u7684\u603b\u7ed3\u4e00\u76f4\u300c\u60ca\u4e3a\u5929\u4eba\u300d\uff0c\u5c31\u5728\u8fd9\u91cc\u4ee5\u81ea\u5df1\u7684\u89c6\u89d2\u8bb0\u5f55\u4e00\u4e0b\\n\\n\x3c!--truncate--\x3e\\n\\nimport MarkMap from \'./assets/markmap.jsx\'\\n\\n## \u524d\u7aef\u7f13\u5b58\\n\\n<MarkMap />\\n\\n## \u6d4f\u89c8\u5668\u5b89\u5168\\n\\n### XSS\u653b\u51fb\\n\\n`Cross-Site Scripting`\uff0c\u8de8\u7ad9\u811a\u672c\u653b\u51fb\u3002\u653b\u51fb\u8005\u5728\u8fd4\u56de\u7684`HTML`\u4e2d\u5d4c\u5165\u811a\u672c\uff0c\u4ece\u800c\u62ff\u5230\u7528\u6237\u7684\u4fe1\u606f\u5e76\u8fdb\u884c\u64cd\u4f5c\u3002\\n\\n#### \u5b58\u50a8\u578b\\n\\n\u5c06\u811a\u672c\u5b58\u50a8\u5230\u4e86\u6570\u636e\u5e93\uff0c\u5ba2\u6237\u7aef\u8bfb\u53d6\u540e\u76f4\u63a5\u6267\u884c\u811a\u672c\uff0c\u8fbe\u5230\u653b\u51fb\u7684\u6548\u679c\\n\\n\u5e38\u89c1\u573a\u666f\uff1a\u8bc4\u8bba\u533a\u63d0\u4ea4\u811a\u672c\u5185\u5bb9\uff0c\u524d\u540e\u7aef\u6ca1\u505a\u597d\u8f6c\u4e49\uff0c\u76f4\u63a5\u5b58\u50a8\u5230\u6570\u636e\u5e93\u3002\u5ba2\u6237\u7aef\u6bcf\u6b21\u8bfb\u53d6\u90fd\u4f1a\u6267\u884c\u811a\u672c\\n\\n#### \u53cd\u5c04\u578b\\n\\n\u6076\u610f\u811a\u672c\u4f5c\u4e3a\u8bf7\u6c42URL\u7684\u53c2\u6570\uff0c\u6d4f\u89c8\u5668\u89e3\u6790\u540e\u4f5c\u4e3a\u811a\u672c\u6267\u884c\\n\\n\u573a\u666f\uff1a\u670d\u52a1\u7aef\u8bfb\u53d6url\u7684\u53c2\u6570\u4f5c\u4e3aHTML\u7684\u5185\u5bb9\uff0c\u5c06HTML\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\u89e3\u6790\uff0c\u6d4f\u89c8\u5668\u89e3\u6790\u8fc7\u7a0b\u4e2d\u6267\u884c\u6076\u610f\u811a\u672c\\n\\n#### \u6587\u6863\u578b\\n\\n\u540c`\u53cd\u5c04\u578b`\u76f8\u4f3c\u3002\u533a\u522b\u5728\u4e8e\uff1a\u7531\u524d\u7aefJS\u811a\u672c\u53d6\u51fa\u6076\u610f\u4ee3\u7801\u5e76\u6267\u884c\\n\\n#### \u9632\u8303\u63aa\u65bd\\n\\n- \u5bf9\u7528\u6237\u63d0\u4ea4\u7684\u5185\u5bb9\u505a\u8f6c\u4e49\\n- \u5229\u7528`HttpOnly`\u3002\u5728\u54cd\u5e94\u5934\u4e2d\u8bbe\u7f6e`Set-Cookie: HttpOnly`\u540e\uff0c\u6d4f\u89c8\u5668\u4f1a\u7981\u6b62`JavaScript`\u811a\u672c\u8bbf\u95ee`Cookie`\uff0c\u4f7f\u653b\u51fb\u65e0\u6cd5\u4f7f\u7528`document.cookie`\u83b7\u53d6\u7528\u6237`Cookie`\\n- \u4f7f\u7528\u6d4f\u89c8\u5668\u5185\u5bb9\u5b89\u5168\u7b56\u7565(CSP\uff0cContent Security Policy),\u53ea\u5141\u8bb8\u52a0\u8f7d\u6307\u5b9a\u57df\u7684\u811a\u672c\u53ca\u6837\u5f0f\u3002\\n  - \u5176\u6709\u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\\n    - \u670d\u52a1\u7aef\u914d\u7f6e`Content-Security-Policy`\u7684\u54cd\u5e94\u5934\\n    ```json\\n    Content-Security-Policy: script-src \'self\'; object-src \'none\';\\n    style-src cdn.example.org third-party.org; child-src https:\\n    ```\\n    - \u4f7f\u7528`<meta>`\u6807\u7b7e\uff1a\\n    ```html\\n    <meta\\n      http-equiv=\\"Content-Security-Policy\\"\\n      content=\\"script-src \'self\'; object-src \'none\'; style-src cdn.example.org third-party.org; child-src https:\\"\\n    />\\n    ```\\n  - \u91ca\u4e49\\n    - `script-src \'self\'`\uff1a\u53ea\u4fe1\u4efb\u5f53\u524d\u57df\u540d\u7684\u811a\u672c\\n    - `object-src \'none\'`\uff1a\u4e0d\u4fe1\u4efb\u4efb\u4f55URL\uff0c\u5373\u4e0d\u52a0\u8f7d\u4efb\u4f55\u8d44\u6e90\\n    - `style-src cdn.example.org third-party.org`\uff1a\u53ea\u4fe1\u4efb`cdn.example.org`\u548c`third-party.org`\u4e0b\u7684\u6837\u5f0f\u8868\\n    - `child-src https`\uff1a\u5fc5\u987b\u4f7f\u7528`HTTPS`\u534f\u8bae\u52a0\u8f7d\u6846\u67b6(frame)\\n    - \u5176\u4ed6\u6765\u6e90\uff1a\u6ca1\u6709\u9650\u5236\u3002\u66f4\u591a\u53ef\u770b\u53c2\u8003\u8fde\u63a5\\n\\n### CSRF\\n\\n`Cross-Site Request Forgery`\uff0c\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u3002\u8bf1\u5bfc\u7528\u6237\u8df3\u8f6c\u6076\u610f\u7f51\u7ad9\uff0c\u5229\u7528\u7528\u6237\u7684\u767b\u5f55\u6001\u5411\u7f51\u7ad9\u53d1\u8d77\u6076\u610f\u8bf7\u6c42\\n\\n\u539f\u7406\uff1a`http`\u8bf7\u6c42\u4f1a\u81ea\u52a8\u643a\u5e26`Cookie`\uff0c\u4e14\u662f`Http`\u76ee\u6807\u8bf7\u6c42\u57df\u540d\u7684`Cookie`\\n\\n#### \u9632\u8303\u63aa\u65bd\\n\\n- SameSite: \u5728\u54cd\u5e94\u5934\u4e2d\u8bbe\u7f6e`Set-Cookie: SameSite=<value>`\u540e\uff0c\u8868\u793aCookie\u4e0d\u968f\u7740\u8de8\u57df\u8bf7\u6c42\u53d1\u9001\uff0c\u53ef\u4ee5\u5f88\u5927\u7a0b\u5ea6\u51cf\u5c11CSRF\u7684\u653b\u51fb\uff1b\u5176\u6709\u4ee5\u4e0b\u4e09\u4e2a\u503c\\n  - Strict\uff08\u6d4f\u89c8\u5668\u5c06\u53ea\u53d1\u9001\u76f8\u540c\u7ad9\u70b9\uff08\u5b8c\u5168\u4e00\u81f4\uff09\u8bf7\u6c42\u7684 Cookie\uff09\\n  - Lax\uff08\u7b2c\u4e09\u65b9get\u65b9\u6cd5\u53ef\u4ee5\u643a\u5e26Cookie\uff09\\n  - None \uff08\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4f1a\u53d1\u9001 Cookie\uff09\u3002\\n- Origin \u548c Referer\uff1a\u9a8c\u8bc1Referer\u662f\u5426\u662f\u4ece\u7b2c\u4e09\u65b9\u7f51\u7ad9\u53d1\u51fa\u6765\u7684\uff0c\u963b\u6b62\u7b2c\u4e09\u65b9\u7f51\u7ad9\u8bf7\u6c42\u63a5\u53e3\uff0c\u4f46\u662f\u8fd9\u4e24\u8005\u53ef\u4ee5\u901a\u8fc7ajax\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\u7684\u65b9\u5f0f\u88ab\u4f2a\u9020\uff1b\\n- CSRF Token\uff1a\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u8bf7\u6c42token\uff0c\u7136\u540e\u5728\u6240\u6709\u7684\u8bf7\u6c42\u4e2d\u5e26\u4e0a\uff1b\\n\\n:::tip\\nChrome80 \u7248\u672c\u7684 CSRF \u4f8b\u5b50\\n\\n\u8bb2\u5230 CSRF \u7684 cookie\uff0c\u4e0d\u5f97\u4e0d\u63d0\u4e00\u4e0b Chrome 80 \u7248\u672c\u7684\u7684\u4e00\u4e2a\u9ed8\u8ba4\u8bbe\u7f6e\uff1bChrome 80 \u7248\u672c\u5c06 SameSite \u7684\u503c\u8bbe\u7f6e\u4e3a\u4e86 Lax\uff1b\u8fd9\u5bfc\u81f4\u4e4b\u524d\u516c\u53f8\u6709\u4e00\u4e9b\u4e1a\u52a1\u4ea7\u751f\u4e86\u8de8\u57df\uff1b\\n:::\\n\\n### \u70b9\u51fb\u52ab\u6301\\n\\n\u901a\u8fc7`iframe`\u7684\u65b9\u5f0f\uff0c\u5c06\u7f51\u7ad9\u5d4c\u5165\u81ea\u5df1\u7684\u7f51\u7ad9\uff0c\u8bf1\u5bfc\u7528\u6237\u70b9\u51fb\u81ea\u5df1\u7f51\u7ad9\u4e2d\u7684\u5185\u5bb9\uff0c\u4ee5\u83b7\u53d6\u5185\u5d4c\u7f51\u7ad9\u4e2d\u7684\u7528\u6237\u4fe1\u606f\\n\\n#### \u9632\u8303\u63aa\u65bd\\n\\n- \u4f7f\u7528`X-Frame-Options`\u54cd\u5e94\u5934\u3002\u5176\u6709\u4ee5\u4e0b\u4e09\u4e2a\u503c\\n  - deny\uff1a\u8868\u793a\u9875\u9762\u4e0d\u5141\u8bb8\u901a\u8fc7`iframe`\u7684\u65b9\u5f0f\u5c55\u793a\\n  - sameorigin\uff1a\u8868\u793a\u9875\u9762\u53ef\u4ee5\u5728\u76f8\u540c\u57df\u540d\u4e0b\u901a\u8fc7`iframe`\u5c55\u793a\\n  - allow-from\uff1a\u8868\u793a\u9875\u9762\u53ef\u4ee5\u5728\u6307\u5b9a\u6765\u6e90\u7684`iframe`\u4e2d\u5c55\u793a\\n- \u4f7f\u7528JS\\n  - \u5224\u65ad\u7f51\u9875\u7684`self`\u548c`top`\u662f\u5426\u76f8\u540c\\n  - \u4e0d\u540c\u5219\u5c06\u9876\u5c42(top)\u7684location\u8d4b\u503c\u4e3a`self`\u7684location\\n\\n### SQL\u6ce8\u5165\\n\\n\u7528\u6237\u8f93\u5165\u7684\u5185\u5bb9\u88ab\u540e\u7aef\u76f4\u63a5\u62fc\u63a5\u5230`SQL`\u8bed\u53e5\u4e0a\uff0c\u5bfc\u81f4\u4e00\u4e9b\u6076\u610f`SQL`\u7684\u6267\u884c\\n\\n#### \u9632\u8303\u63aa\u65bd\\n\\n- \u6c38\u8fdc\u4e0d\u8981\u76f8\u4fe1\u7528\u6237\u7684\u8f93\u5165\uff0c\u5bf9\u7528\u6237\u8f93\u5165\u8fdb\u884c\u6821\u9a8c\\n- \u4e0d\u8fdb\u884c`SQL`\u7684\u52a8\u6001\u62fc\u63a5\\n- \u4e0d\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u8fde\u63a5\u6570\u636e\u5e93\\n- \u52a0\u5bc6\u673a\u5bc6\u4fe1\u606f\\n\\n## \u6d4f\u89c8\u5668\u8d44\u6e90\u89e3\u6790\u673a\u5236\\n\\n![\u6d4f\u89c8\u5668\u8d44\u6e90\u89e3\u6790](./\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168/analysis.png)\\n\\n\u5982\u56fe\u3002\u6d4f\u89c8\u5668\u89e3\u6790\u8d44\u6e90\u65f6\u9047\u5230\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u6e90\u6709\u4e0d\u540c\u7684\u5904\u7406\\n\\n- css\uff0c\u4e0d\u5f71\u54cd\u6d4f\u89c8\u5668\u5bf9HTML\u7684\u89e3\u6790\\n- script\u811a\u672c\uff0c\u6d4f\u89c8\u5668\u4f1a\u6682\u505c\u5bf9HTML\u7684\u89e3\u6790\uff0c\u8f6c\u800c\u4e0b\u8f7d\u548c\u6267\u884cscript\u811a\u672c\u3002\u811a\u672c\u6267\u884c\u5b8c\u6210\u540e\u518d\u7ee7\u7eedHTML\u7684\u89e3\u6790\\n- \u5e26\u6709async\u5c5e\u6027\u7684script\u811a\u672c\uff0c\u6d4f\u89c8\u5668\u4f1a\u7ee7\u7eed\u89e3\u6790HTML\uff0c\u76f4\u5230async\u811a\u672c\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u6682\u505c\u89e3\u6790HTML\uff0c\u8f6c\u800c\u6267\u884c\u811a\u672c\u3002\u811a\u672c\u6267\u884c\u5b8c\u6210\u540e\u518d\u7ee7\u7eedHTML\u7684\u89e3\u6790\\n- \u5e26\u6709defer\u5c5e\u6027\u7684script\u811a\u672c\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728HTML\u89e3\u6790\u5b8c\u6210\u540e\uff0c\u6309\u7167\u542b\u6709defer\u5c5e\u6027\u7684\u811a\u672c\u987a\u5e8f\u6267\u884c\u811a\u672c\u5185\u5bb9\\n- \u5916\u8054css\u4f1a\u963b\u585e\u540e\u9762JS\u811a\u672c\u7684\u6267\u884c\u3002\\n  > \u56e0\u4e3aHTML5\u6807\u51c6\u4e2d\u6709\u4e00\u9879\u89c4\u5b9a\uff0c\u6d4f\u89c8\u5668\u5728\u6267\u884cScript\u811a\u672c\u524d\uff0c\u5fc5\u987b\u4fdd\u8bc1\u5f53\u524d\u7684\u7684\u5916\u8054CSS\u5df2\u7ecf\u89e3\u6790\u5b8c\u6210\uff0c\u56e0\u4e3aJS\u53ef\u80fd\u4f1a\u53bb\u83b7\u53d6\u6216\u8005\u53d8\u66f4DOM\u7684CSS\u6837\u5f0f\uff0c\u5982\u679c\u6b64\u65f6\u5916\u8054CSS\u8fd8\u6ca1\u89e3\u6790\u597d\uff0c\u83b7\u53d6\u5230\u7684\u7ed3\u679c\u5c31\u662f\u4e0d\u51c6\u786e\u7684\uff1b\\n- \u89e3\u6790\u9047\u5230`img`\u56fe\u7247\uff0c\u76f4\u63a5\u5f02\u6b65\u4e0b\u8f7d\uff0c\u4e0d\u4f1a\u963b\u585e\u89e3\u6790\u3002\u4e0b\u8f7d\u5b8c\u6bd5\u540e\u7528\u56fe\u7247\u66ff\u6362\u539f\u6709src\u7684\u5730\u65b9\\n\\n## \u6d4f\u89c8\u5668\u6e32\u67d3\u673a\u5236\\n\\n### \u6e32\u67d3\u6d41\u6c34\u7ebf\\n\\n![\u6d4f\u89c8\u5668\u6e32\u67d3\u673a\u5236](./\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168/chrome-render.png)\\n\\n- \u6784\u5efaDOM\u6811\uff1a\u6d4f\u89c8\u5668`\u4ece\u4e0a\u5230\u4e0b`\u89e3\u6790HTML\uff0c\u751f\u6210\u6811\u72b6DOM\u7ed3\u6784\\n- \u6784\u5efastyleSheets\uff1a\u6d4f\u89c8\u5668\u89e3\u6790HTML\u65f6\u9047\u5230CSS\u5185\u5bb9\u65f6\uff0c\u4f1a\u5c06CSS\u5185\u5bb9\u89e3\u6790\u4e3astyleSheets\u3002`document.styleSheets`\u53ef\u67e5\u770b\u5176\u7ed3\u6784\\n- \u6784\u5efa\u5e03\u5c40\u6811\uff1a\u904d\u5386DOM\u6811\u4e2d\u7684\u6240\u6709`\u53ef\u89c1\u5143\u7d20`\u8282\u70b9\uff0c\u5e76\u5c06\u8fd9\u4e9b\u8282\u70b9\u6dfb\u52a0\u5230\u5e03\u5c40\u6811\u4e2d\\n  - \u4ec5\u5305\u542b`\u53ef\u89c1\u5143\u7d20`\u3002\u5e26\u6709`display:none`\u7684\u5143\u7d20\u3001`head`\u6807\u7b7e\u5185\u7684\u5168\u90e8\u5185\u5bb9\u3001script\u6807\u7b7e\u7b49\u90fd\u4e0d\u5728\u5e03\u5c40\u6811\u4e2d\\n  - \u5404\u5143\u7d20\u5e03\u5c40\u8fd0\u7b97\u7684\u7ed3\u679c\u4f1a\u91cd\u65b0\u5199\u56de\u5230\u5e03\u5c40\u6811\u4e2d\\n- \u6784\u5efa\u56fe\u5c42\u6811\uff1a\u6e32\u67d3\u5f15\u64ce\u4f1a\u4e3a\u7279\u5b9a\u7684\u8282\u70b9(3D\u53d8\u6362\u3001\u9875\u9762\u6eda\u52a8\u3001z-index\u7b49)\u751f\u6210\u4e13\u7528\u7684\u56fe\u5c42\uff0c\u5e76\u751f\u6210\u5bf9\u5e94\u7684\u4e00\u68f5\u56fe\u5c42\u6811\\n  - \u5982\u679c\u4e00\u4e2a\u8282\u70b9\u6ca1\u6709\u5bf9\u5e94\u7684\u5c42\uff0c\u8be5\u8282\u70b9\u5c31\u4ece\u5c5e\u4e8e\u7236\u8282\u70b9\u7684\u56fe\u5c42\\n  - \u72ec\u7acb\u5c42\u7684\u6761\u4ef6(\u4efb\u4e00\u5373\u53ef)\\n    - \u62e5\u6709\u5c42\u53e0\u4e0a\u4e0b\u6587\u5c5e\u6027\u3002\u6bd4\u5982\uff0c\u5b9a\u4f4d(position)\uff0c\u900f\u660e(opacity)\uff0ccss\u6ee4\u955c(filter)\u7b49\\n    - \u9700\u8981\u526a\u88c1(clip)\u7684\u5730\u65b9\u3002\u6bd4\u5982\uff0c\u5143\u7d20\u5185\u5bb9\u8fc7\u591a\uff0c\u8d85\u8fc7\u5143\u7d20\u7684\u5bbd\u9ad8\u9650\u5236\uff0c\u4ec5\u663e\u793a\u90e8\u5206\u5185\u5bb9\u7684\u60c5\u51b5\u5c31\u4ea7\u751f\u4e86\u526a\u88c1\\n      - \u6587\u5b57\u90e8\u5206\u4f1a\u72ec\u7acb\u5206\u5c42\\n      - \u5982\u6709\u6eda\u52a8\u6761\uff0c\u6eda\u52a8\u6761\u4e5f\u662f\u72ec\u7acb\u5206\u5c42\\n- \u56fe\u5c42\u7ed8\u5236\uff1a\u6e32\u67d3\u5f15\u64ce\u5bf9\u56fe\u5c42\u6811\u4e2d\u7684\u6bcf\u4e2a\u56fe\u5c42\u8fdb\u884c\u7ed8\u5236\\n  - \u56fe\u5757\uff0c\u5373\u5c06\u56fe\u5c42\u62c6\u5206\u6210\u5c0f\u5757\u513f\uff0c\u5c31\u50cf\u5403\u4e1c\u897f\u8981\u4e00\u53e3\u4e00\u53e3\u5403\u4e00\u6837\u3002\\n  - \u4f18\u5148\u5c06\u89c6\u53e3\u9644\u8fd1\u7684\u56fe\u5757\u751f\u6210\u4f4d\u56fe\u3002\u5b9e\u9645\u751f\u6210\u4f4d\u56fe\u7684\u64cd\u4f5c\u7531\u6805\u683c\u5316\u6267\u884c\\n    - \u89c6\u53e3\uff1a\u5c4f\u5e55\u4e0a\u7684\u53ef\u89c1\u533a\u57df\u3002\u5982\u9875\u9762\u6709\u6eda\u52a8\u6761\uff0c\u76f4\u63a5\u770b\u5230\u7684\u90e8\u5206\u5c31\u662f\u89c6\u53e3\uff0c\u9700\u8981\u6eda\u52a8\u624d\u80fd\u770b\u5230\u7684\u5730\u65b9\u5c31\u4e0d\u5c5e\u4e8e\u89c6\u53e3\u3002\u5982\u6ca1\u6709\u6eda\u52a8\u6761\uff0c\u6240\u6709\u663e\u793a\u90e8\u5206\u5373\u4e3a\u89c6\u53e3\\n  - \u6805\u683c\u5316\uff1a\u5c06\u56fe\u5757\u8f6c\u4e3a\u4f4d\u56fe\u3002\\n    - \u56fe\u5757\u65f6\u6805\u683c\u5316\u6267\u884c\u7684\u6700\u5c0f\u5355\u4f4d\\n    - \u6e32\u67d3\u8fdb\u7a0b\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6805\u683c\u5316\u7ebf\u7a0b\u6c60\uff0c\u6240\u6709\u56fe\u5757\u7684\u6805\u683c\u5316\u90fd\u5728\u7ebf\u7a0b\u6c60\u5185\u6267\u884c\\n    - \u6805\u683c\u5316\u4f1a\u901a\u8fc7GPU\u52a0\u901f\u751f\u6210\uff0c\u4f7f\u7528GPU\u751f\u6210\u4f4d\u56fe\u7684\u8fc7\u7a0b\u53eb\u5feb\u901f\u6805\u683c\u5316\u6216GPU\u6805\u683c\u5316\uff0c\u751f\u6210\u7684\u4f4d\u56fe\u4fdd\u5b58\u5728GPU\u5185\u5b58\u4e2d\\n- \u5408\u6210\u548c\u663e\u793a\uff1a\u6240\u6709\u56fe\u5757\u6805\u683c\u5316\u540e\uff0c\u5408\u6210\u7ebf\u7a0b\u751f\u6210\u56fe\u5757\u7ed8\u5236\u547d\u4ee4\uff0c\u5e76\u63d0\u4ea4\u7ed9\u6d4f\u89c8\u5668\u8fdb\u7a0b\u7ed8\u5236\u9875\u9762\\n\\n### \u56de\u6d41(\u91cd\u6392)\u3001\u91cd\u7ed8\u3001\u5408\u6210\\n\\n\u5e38\u5728\u6027\u80fd\u4f18\u5316\u4e2d\u6d89\u53ca\u3002\u6027\u80fd\u4f18\u5316\u6548\u679c\u4f9d\u6b21\u9012\u51cf: `\u5408\u6210 => \u91cd\u7ed8 => \u91cd\u6392`\\n\\n#### \u56de\u6d41(\u91cd\u6392)\\n\\n\u901a\u8fc7JS\u6216CSS\u4fee\u6539\u5143\u7d20\u7684\u51e0\u4f55\u4f4d\u7f6e\u5c5e\u6027\uff0c\u6bd4\u5982\u6539\u53d8\u5143\u7d20\u7684\u5bbd\u9ad8\u7b49\uff0c\u8ba9\u5143\u7d20\u7684\u5e03\u5c40\u53d1\u751f\u53d8\u5316\uff0c\u56de\u60f3\u6e32\u67d3\u6d41\u6c34\u7ebf\uff0c\u5c31\u9700\u8981\u91cd\u65b0\u6784\u5efa\u5e03\u5c40\u6811\uff0c\u5373\u4e3a\u91cd\u6392\\n\\n#### \u91cd\u7ed8\\n\\n\u4ec5\u6539\u53d8\u5143\u7d20\u7684\u80cc\u666f\u8272\u7b49\u4e0d\u6d89\u53ca\u5143\u7d20\u4f4d\u7f6e\u7684\u53d8\u5316\u7684\u5c5e\u6027\uff0c\u6b64\u65f6\u5143\u7d20\u7684\u4f4d\u7f6e\u6ca1\u6709\u53d1\u751f\u53d8\u5316\u5c31\u4f1a\u76f4\u63a5\u8fdb\u5165`\u56fe\u5c42\u7ed8\u5236`\u9636\u6bb5\uff0c\u5373\u4e3a\u91cd\u7ed8\u3002\\n\\n\u56e0\u4e3a\u7701\u53bb\u4e86`\u6784\u5efa\u5e03\u5c40\u6811`\u3001`\u6784\u5efa\u56fe\u5c42\u6811`\u7684\u9636\u6bb5\uff0c\u6240\u6709\u6267\u884c\u6548\u7387\u6bd4\u91cd\u6392\u8981\u9ad8\\n\\n#### \u5408\u6210\\n\\n\u4f7f\u7528`transform`\u5c5e\u6027\u6765\u5b9e\u73b0\u52a8\u753b\u6548\u679c\uff0c\u53ef\u4ee5\u907f\u5f00\u91cd\u6392\u548c\u91cd\u7ed8\u9636\u6bb5\uff0c\u6548\u7387\u8f83\u5176\u4e8c\u8005\u66f4\u9ad8\u3002\\n\\n### JS\u811a\u672c\u5982\u4f55\u963b\u585eDOM\u7684\u6784\u5efa\\n\\nHTML\u89e3\u6790\u5668\u53d1\u73b0JS\u811a\u672c\u540e\u4f1a\u6682\u505cDOM\u7684\u89e3\u6790\uff0c\u56e0\u4e3aJS\u811a\u672c\u53ef\u80fd\u5f71\u54cd\u5df2\u7ecf\u751f\u6210\u7684DOM\u7684\u7ed3\u6784\u3002\u5982\u679c\u662f\u5916\u94fe\u811a\u672c\uff0c\u8fd8\u8981\u8003\u8651\u7f51\u7edc\u73af\u5883\uff0c\u811a\u672c\u7684\u5927\u5c0f\u7b49\u60c5\u51b5\\n\\n:::tip\\n\u6e32\u67d3\u5f15\u64ce\u6709\u9884\u89e3\u6790\u7684\u6587\u4ef6\u7684\u4f18\u5316\u5904\u7406\uff0c\u5f53\u6e32\u67d3\u5f15\u64ce\u6536\u5230\u7f51\u7edc\u8fdb\u7a0b\u4f20\u9012\u7684\u5b57\u8282\u6d41\u65f6\uff0c\u4f1a\u5f00\u542f\u4e00\u4e2a\u9884\u89e3\u6790\u7ebf\u7a0b\uff0c\u7528\u6765\u5206\u6790HTML\u6587\u4ef6\u4e2d\u5305\u542b\u7684JS\u3001CSS\u7b49\u6587\u4ef6\u3002\u89e3\u6790\u5230\u540e\uff0c\u9884\u89e3\u6790\u7ebf\u7a0b\u4f1a\u63d0\u524d\u4e0b\u8f7d\u8fd9\u4e9b\u6587\u4ef6\\n:::\\n\\n### CSS\u5982\u4f55\u963b\u585eDOM\u7684\u6784\u5efa\\n\\n\u56e0\u4e3aJS\u811a\u672c\u4e2d\u53ef\u80fd\u4f1a\u5bf9DOM\u7684\u6837\u5f0f\u5c5e\u6027\u8fdb\u884c\u4fee\u6539\uff0c\u6240\u4ee5\u5728JS\u811a\u672c\u6267\u884c\u4e4b\u524d\uff0c\u9700\u8981\u7b49\u5f85CSS\u7684\u89e3\u6790\uff0c\u7ee7\u800c\u95f4\u63a5\u5f71\u54cdDOM\u7684\u6784\u5efa\\n\\n## \u8de8\u57df\\n\\n\u540c\u6e90\u7b56\u7565\uff1a`\u534f\u8bae`\u3001`\u57df\u540d`\u3001`\u7aef\u53e3\u53f7`\uff0c\u4e09\u8005\u90fd\u4e00\u81f4\u5373\u4e3a\u540c\u6e90\uff1b\u5426\u5219\u4e3a\u8de8\u6e90\uff0c\u5373\u8de8\u57df\\n\\n\u8de8\u57df\u5bf9\u811a\u672c\u7684\u9650\u5236\\n\\n- \u65e0\u6cd5\u83b7\u53d6`Cookie`\u3001`LocalStorage`\u3001`IndexedDB`\u4e2d\u7684\u6570\u636e\\n- \u65e0\u6cd5\u8bfb\u53d6`DOM`\\n- \u4e0d\u80fd\u53d1\u9001`AJAX`\u8bf7\u6c42\\n\\n### JSONP(get)\\n\\n\u539f\u7406\uff1a\u5229\u7528`<script>`\u6807\u7b7e\u6ca1\u6709\u8de8\u57df\u9650\u5236\\n\\n- \u524d\u7aef\u6dfb\u52a0`<script>`\u6807\u7b7e\uff0c`src`\u4e2d\u662f\u5bf9\u670d\u52a1\u7aef\u7684\u8bf7\u6c42\uff0c\u9700\u8981\u643a\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u8ba9\u670d\u52a1\u7aef\u8bc6\u522b\\n- \u524d\u7aef\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u51fd\u6570\uff0c\u51fd\u6570\u540d\u4e3a\u4e4b\u524d\u643a\u5e26\u53c2\u6570\u4e2d\u7684\u503c\u7684\u540d\u5b57\\n- \u670d\u52a1\u7aef\u62fc\u63a5\u56de\u8c03\u51fd\u6570\u548c\u53c2\u6570\uff0c\u4ee5`JS`\u7c7b\u578b\u8fd4\u56de\\n\\n<details>\\n  <summary>\u4ee3\u7801\u793a\u4f8b</summary>\\n\\n> \u5f53\u6d4f\u89c8\u5668\u63a5\u53d7\u5230\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7684\u56de\u8c03\u51fd\u6570\u65f6\u4f1a\u5728\u6d4f\u89c8\u5668\u73af\u5883\u5bfb\u627ecallbackFun\u51fd\u6570\uff0c\u5e76\u6267\u884c\\n\\n<Tabs defaultValue=\\"html\\">\\n<TabItem value=\\"html\\">\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <title></title>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1\\" />\\n  </head>\\n  <body>\\n    <script>\\n      // \u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\\n      var cbData = {};\\n      // \u5b9a\u4e49\u5168\u5c40\u51fd\u6570\\n      var callbackFun = (res) => {\\n        cbData = res;\\n        alert(cbData);\\n      };\\n    <\/script>\\n    <script src=\\"http://127.0.0.1:1337/cb?callback=callbackFun\\"><\/script>\\n  </body>\\n</html>\\n```\\n\\n</TabItem>\\n<TabItem value=\\"js\\">\\n\\n```js\\nvar http = require(\\"http\\");\\nvar url = require(\\"url\\");\\n\\nhttp\\n  .createServer(function (req, res) {\\n    // \u5c06\u8bf7\u6c42req\u4e2d\u7684url\u8fdb\u884c\u89e3\u6790\\n    var urlObj = url.parse(req.url, true);\\n    res.writeHead(200, {\\n      \\"Content-Type\\": \\"text/plain\\",\\n    });\\n    // \u8fd4\u56decallback\u5bf9\u5e94\u7684\u65b9\u6cd5\u540d\u548c\u901a\u8fc7JSON.stringify\u5904\u7406\u8fc7\u7684\u6570\u636e\u62fc\u63a5\u800c\u6210\u7684\u5b57\u7b26\u4e32\\n    res.end(\\n      `${urlObj.query.callback}(${JSON.stringify({ name: \\"qb\\", age: 30 })})`,\\n    );\\n  })\\n  .listen(1337, \\"127.0.0.1\\");\\n```\\n\\n</TabItem>\\n\\n</Tabs>\\n\\n</details>\\n\\n### CORS\\n\\n> \u901a\u4fe1\u8fc7\u7a0b\u7531\u6d4f\u89c8\u5668\u81ea\u52a8\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u7528\u6237\u53c2\u4e0e\\n\\n#### \u8bf7\u6c42\u6b65\u9aa4\\n\\n- \u53d1\u8d77\u8de8\u57df\u8bf7\u6c42\u65f6\uff0c\u5224\u65ad\u662f\u5426\u662f\u590d\u6742\u8bf7\u6c42\\n  - \u590d\u6742\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u53d1\u51fa\u9884\u68c0\u8bf7\u6c42\uff0c\u5373\u53d1\u51fa`Options`\u8bf7\u6c42\uff0c\u7528\u4e8e\u786e\u8ba4\u76ee\u6807\u8d44\u6e90\u662f\u5426\u652f\u6301\u8de8\u57df\\n    - \u5728\u6d4f\u89c8\u5668\u53d1\u51fa\u9884\u68c0\u8bf7\u6c42\u65f6\uff0c\u4f1a\u643a\u5e26`Access-Control-Request-Method`\u8bf7\u6c42\u5934\uff0c\\n      \u8868\u793a\u5728\u5b9e\u9645\u53d1\u51fa\u8bf7\u6c42\u65f6\u5c06\u7528\u4ec0\u4e48\u8bf7\u6c42\u65b9\u6cd5\\n  - \u7b80\u5355\u8bf7\u6c42\uff0c\u76f4\u63a5\u53d1\u51fa\u6b63\u5e38\u8bf7\u6c42\\n- \u6d4f\u89c8\u5668\u4f1a\u6839\u636e\u670d\u52a1\u7aef\u7684\u54cd\u5e94\u5934`Access-Control-Allow-Origin`\u7684\u503c\u5224\u65ad\u662f\u5426\u652f\u6301\u8de8\u57df\u3002\\n  - \u82e5\u652f\u6301\uff0c\u5219\u6b63\u5e38\u53d1\u51fa\u8bf7\u6c42\\n  - \u4e0d\u652f\u6301\uff0c\u5219\u5728\u63a7\u5236\u53f0\u663e\u793a\u9519\u8bef\u4fe1\u606f\\n\\n:::tip\\n\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff0c\u5373\u4e3a\u7b80\u5355\u8bf7\u6c42\\n\\n- \u4f7f\u7528\u7684\u8bf7\u6c42\u65b9\u6cd5\u4e3a\\n  - get\u3001post\u3001head\\n- \u8bf7\u6c42\u5934\u53ea\u5305\u542b\u5b89\u5168\u4fe1\u606f\\n  - Accept\u3001Accept-Language\u3001Content-Type\u3001Content-Language\\n- Content-Type\u7684\u503c\u4ec5\u9650\u4e8e\\n  - text/plain\u3001multipart/form-data\u3001application/x-www-form-urlencoded\\n\\n\u4e0d\u7b26\u5408\u4ee5\u4e0a\u6761\u4ef6\u8005\uff0c\u5747\u4e3a\u590d\u6742\u8bf7\u6c42\\n\\n:::\\n\\n### postMessage\\n\\n\u901a\u8fc7`window.postMessage()`\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5b89\u5168\u7684\u8de8\u57df\u901a\u4fe1\u3002\\n\\n<details>\\n  <summary>\u4ee3\u7801\u793a\u4f8b</summary>\\n<Tabs defaultValue=\\"main\\">\\n<TabItem value=\\"main\\">\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <title></title>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1\\" />\\n  </head>\\n  <body>\\n    <button type=\\"button\\" id=\\"btn\\">\u70b9\u6211\u6253\u5f00\u53e6\u4e00\u4e2a\u9875\u9762</button>\\n\\n    <button type=\\"button\\" id=\\"btn2\\">\u70b9\u6211\u7ed9\u53e6\u4e00\u4e2a\u9875\u9762\u53d1\u9001\u6d88\u606f</button>\\n    <script>\\n      let refer = null;\\n      document.getElementById(\\"btn\\").addEventListener(\\"click\\", function () {\\n        refer = window.open(\\"./receive.html\\");\\n      });\\n\\n      document.getElementById(\\"btn2\\").addEventListener(\\"click\\", function () {\\n        refer.postMessage(\\"hello\\", \\"*\\");\\n      });\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\\"receive\\">\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <title></title>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1\\" />\\n  </head>\\n  <body>\\n    received message is <span id=\\"msg\\"></span>\\n\\n    <script>\\n      const msg = document.getElementById(\\"msg\\");\\n\\n      window.addEventListener(\\"message\\", (e) => {\\n        msg.innerText = e.data;\\n      });\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</TabItem>\\n</Tabs>\\n</details>\\n\\n### Nginx\\n\\n\u53ea\u9700\u8981\u5728`Nginx`\u4e2d\u914d\u7f6e\u4ee5\u4e0b\u53c2\u6570\u5373\u53ef\\n\\n```conf\\nlocation / {\\n    add_header Access-Control-Allow-Origin *;\\n    add_header Access-Control-Allow-Methods \'GET, POST, OPTIONS\';\\n    add_header Access-Control-Allow-Headers \'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization\';\\n\\n    if ($request_method = \'OPTIONS\') {\\n        return 204;\\n    }\\n}\\n```\\n\\n## \u524d\u7aef\u8def\u7531\\n\\n### hash\\n\\n\u5373\u6d4f\u89c8\u5668URL\u4e2d`#`\u53ca\u4e4b\u540e\u7684\u5185\u5bb9\uff0c\u53ef\u901a\u8fc7`window.location.hash`\u83b7\u53d6\u3002\\n\\n\u5f53`hash`\u53d8\u5316\u540e\u4f1a\u89e6\u53d1`onhashchange`\u4e8b\u4ef6\uff0c\u4ee5\u6b64\u53ef\u5b9e\u73b0\u76d1\u542c\u6d4f\u89c8\u5668\u5730\u5740\u4e2d\u7684`hash`\u7684\u53d8\u5316\u5e76\u4f7f\u7528`JavaScript`\u5207\u6362\u9875\u9762\u5185\u5bb9\u7684\u6548\u679c\\n\\n:::tip\\nhash\u503c\u53d8\u5316\uff0c\u4e0d\u4f1a\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\uff0c\u53ea\u662f\u6d4f\u89c8\u5668\u5730\u5740\u680f\u4e2d\u7684hash\u503c\u53d8\u5316\u800c\u5df2\u3002\u4f46\u4f1a\u89e6\u53d1`onhashchange`\u4e8b\u4ef6\\n:::\\n\\n### history\\n\\n\u5373`window.history`\uff0c\u662f`History`\u5bf9\u8c61\uff0c\u8868\u793a\u5f53\u524d\u7a97\u53e3\u7684\u6d4f\u89c8\u5386\u53f2\u3002\u6d4f\u89c8\u5668\u5de5\u5177\u680f\u4e2d\u7684`\u524d\u8fdb`\u548c`\u540e\u9000`\u6309\u94ae\uff0c\u5c31\u662f\u5bf9`History`\u5bf9\u8c61\u64cd\u4f5c\\n\\n:::tip\\n\u5f53`history`\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u53ea\u4f1a\u6539\u53d8\u9875\u9762\u8def\u5f84\uff0c\u4e0d\u4f1a\u5237\u65b0\u9875\u9762\u3002\\n\\n\u811a\u672c\u4e0d\u5141\u8bb8\u8bbf\u95ee`history`\u4e2d\u7684\u5730\u5740\uff0c\u4f46\u5141\u8bb8\u5728\u5730\u5740\u95f4\u5bfc\u822a\\n:::\\n\\n## \u8de8\u9875\u7b7e&\u591atab\u901a\u4fe1\\n\\n- \u540c\u57df\u4e0b\u4f7f\u7528`localStorage`\u5171\u4eab\u6570\u636e\\n  - \u4f7f\u7528`window.addEventListener(\'storage\')`\u76d1\u542c\u6570\u636e\u7684\u53d8\u5316\\n    - \u91cd\u590d\u5199\u5165\u7684\u503c\u65e0\u6cd5\u89e6\u53d1\u4e8b\u4ef6\\n    - \u4f1a\u53d7\u5230\u6d4f\u89c8\u5668\u9690\u8eab\u6a21\u5f0f\u7b49\u7684\u9650\u5236\\n- `WebSocket`\u914d\u5408\u670d\u52a1\u7aef\\n- `Service Worker`\\n- `IndexedDB`\uff0c\u6d4f\u89c8\u5668\u5b9e\u73b0\u7684\u6570\u636e\u5e93\u3002\u4f7f\u7528`\u5171\u4eab\u5b58\u50a8`\u548c`\u8f6e\u8be2`\u7684\u65b9\u5f0f\u76d1\u542c\u6570\u636e\u53d8\u5316\\n- \u901a\u8fc7\u7236\u9875\u9762\u7684`window.open()`\u548c\u5b50\u9875\u9762\u7684`postMessage`\\n\\n## \u4e8b\u4ef6\u673a\u5236\\n\\n\u4e8b\u4ef6\u6355\u83b7 -> \u76ee\u6807\u9636\u6bb5\uff08\u4e8b\u4ef6\u5904\u7406\uff09 -> \u4e8b\u4ef6\u5192\u6ce1\\n\\n![\u4e8b\u4ef6](./\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168/event.png)\\n\\n### \u4e8b\u4ef6\u6355\u83b7\\n\\n\u4ece`window`\u5f00\u59cb\u5411\u4e0b\u8d70\u8fd1\u89e6\u53d1\u7ed1\u5b9a\u4e8b\u4ef6\u7684\u5143\u7d20\\n\\n### \u4e8b\u4ef6\u5192\u6ce1\\n\\n\u4ece\u7ed1\u5b9a\u4e8b\u4ef6\u7684\u5143\u7d20\u5f00\u59cb\u5411\u4e0a\u76f4\u5230`window`\\n\\n### \u4e8b\u4ef6\u59d4\u6258\\n\\n\u5229\u7528\u4e8b\u4ef6\u5192\u6ce1\u673a\u5236\uff0c\u5c06\u4e8b\u4ef6\u7684\u5904\u7406\u653e\u5728\u7236\u5143\u7d20\u8eab\u4e0a\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u7684\u4f7f\u7528\\n\\n### target\u4e0ecurrentTarget\u7684\u533a\u522b\\n\\n- target\uff1a\u8868\u793a\u5f53\u524d\u89e6\u53d1\u4e8b\u4ef6\u7684\u5143\u7d20\u3002\u5982\u679c\u662f\u4e8b\u4ef6\u59d4\u6258\u5904\u7406\uff0c\u90a3\u4e48target\u5f88\u6709\u53ef\u80fd\u4e0d\u662fcurrentTarget\\n- currentTarget\uff1a\u8868\u793a\u7ed1\u5b9a\u4e8b\u4ef6\u7684\u5143\u7d20\\n\\n### \u963b\u6b62\u4e8b\u4ef6\u7684\u6267\u884c\\n\\n- \u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\u3001\u6355\u83b7: `e.stopPropagation()`\\n- \u963b\u6b62\u5143\u7d20\u4e0a\u4e0e\u5f53\u524d\u4e8b\u4ef6\u7c7b\u578b\u4e00\u6837\u7684\u8fd8\u672a\u6267\u884c\u7684\u6240\u6709\u5176\u4ed6\u4e8b\u4ef6\u7684\u6267\u884c: `e.stopImmediatePropagation()`\\n- \u963b\u6b62\u4e8b\u4ef6\u7684\u9ed8\u8ba4\u884c\u4e3a(\u5982\uff0ca\u6807\u7b7e\u7684\u8df3\u8f6c\u884c\u4e3a): `e.preventDefault()`\\n\\n## \u53c2\u8003\\n\\n[\u300c2022\u300d\u5bd2\u51ac\u4e0b\u6211\u7684\u9762\u8bd5\u77e5\u8bc6\u70b9\u590d\u76d8\u3010\u6d4f\u89c8\u5668\u539f\u7406&\u5b89\u5168\u3011](https://juejin.cn/post/7168637354536599559)\\n\\n[\u4e2d\u9ad8\u7ea7\u524d\u7aef\u5de5\u7a0b\u5e08\u90fd\u9700\u8981\u719f\u6089\u7684\u6280\u80fd](https://juejin.cn/post/7127194919235485733)\\n\\n[\u5192\u6ce1\u548c\u6355\u83b7](https://zh.javascript.info/bubbling-and-capturing)\\n\\n[Content Security Policy\u5165\u95e8\u6559\u7a0b](https://www.ruanyifeng.com/blog/2016/09/csp.html)\\n\\n[\u4e00\u770b\u5c31\u4f1a\u7684JSONP\u524d\u540e\u7aef\u5b9e\u73b0](https://juejin.cn/post/7164039512211849223)\\n\\n[Nginx\u914d\u7f6e\u8de8\u57df\u8bf7\u6c42 Access-Control-Allow-Origin](https://segmentfault.com/a/1190000012550346)\\n\\n[\u674e\u5175-\u6d4f\u89c8\u5668\u5de5\u4f5c\u539f\u7406\u4e0e\u5b9e\u8df5](https://time.geekbang.org/column/intro/100033601?tab=catalog)"},{"id":"/2023/10/21/React\u6e32\u67d3\u539f\u7406","metadata":{"permalink":"/blog/index/2023/10/21/React\u6e32\u67d3\u539f\u7406","source":"@site/blog/2023/10/21/React\u6e32\u67d3\u539f\u7406.md","title":"React\u6e32\u67d3\u539f\u7406","description":"\u770b\u8fc7n\u6b21\uff0c\u4e86\u89e3\u8fc7n\u6b21\uff0c\u603b\u662f\u5fd8\u8bb0\uff0c\u8bb0\u5f55\u4f4f\uff01","date":"2023-10-21T00:00:00.000Z","formattedDate":"2023\u5e7410\u670821\u65e5","tags":[{"label":"react","permalink":"/blog/index/tags/react"}],"readingTime":7.035,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"React\u6e32\u67d3\u539f\u7406","tags":["react"]},"prevItem":{"title":"\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168","permalink":"/blog/index/2023/10/22/\u6d4f\u89c8\u5668\u539f\u7406\u53ca\u5b89\u5168"},"nextItem":{"title":"\u5e38\u7528git\u547d\u4ee4","permalink":"/blog/index/2023/09/27/\u5e38\u7528git\u547d\u4ee4"}},"content":"\u770b\u8fc7n\u6b21\uff0c\u4e86\u89e3\u8fc7n\u6b21\uff0c\u603b\u662f\u5fd8\u8bb0\uff0c\u8bb0\u5f55\u4f4f\uff01\\n\\n\x3c!-- truncate --\x3e\\n\\n:::tip\\nReact\u7248\u672c\u4e3a16+\\n:::\\n\\n## \u751f\u547d\u5468\u671f\\n\\n![\u751f\u547d\u5468\u671f](./React\u6e32\u67d3\u539f\u7406/lifecycle.webp)\\n\\n<details>\\n\\n  <summary>\u4e0b\u9762\u4f7f\u7528\u7684nextProps\u3001nextState\u3001prevProps\u3001prevState\u662f\u4ec0\u4e48?</summary>\\n\\n\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u89c2\u5bdf`dev:`\u7684\u65e5\u5fd7\u8f93\u51fa\\n\\n- prevProps\u3001prevState: \u90fd\u662f\u66f4\u65b0\u524d\u7684props\u3001state\\n- nextProps\u3001nextState: \u90fd\u662f\u66f4\u65b0\u540e(\u6700\u65b0)\u7684props\u3001state\\n\\n```jsx live\\nclass getSnapshopBeforeUpdate extends React.Component {\\n  state = {\\n    name: \\"\\",\\n    age: 0,\\n  };\\n\\n  shouldComponentUpdate(nextProps, nextState) {\\n    console.log(\\"dev: shouldComponentUpdate\\", nextProps, nextState);\\n\\n    return true;\\n  }\\n  componentDidMount() {\\n    console.log(\\"dev: componentDidMount\\");\\n  }\\n\\n  render() {\\n    return (\\n      <div id=\\"my-test\\">\\n        My name is {this.state.name} and I am\\n        {this.state.age > 0 && <div>{this.state.age}</div>}\\n        <hr />\\n        <button onClick={() => this.setState({ age: this.state.age + 1 })}>\\n          \u70b9\u6211\u957f\u5927\\n        </button>\\n      </div>\\n    );\\n  }\\n\\n  getSnapshotBeforeUpdate(prevProps, prevState) {\\n    console.log(\\"dev: getSnapshotBeforeUpdate\\", prevProps, prevState);\\n    console.log(\\n      \\"dev: getcontent\\",\\n      document.getElementById(\\"my-test\\").clientHeight,\\n    );\\n  }\\n\\n  componentDidUpdate(prevProps, prevState, snapshot) {\\n    console.log(\\"dev: componentDidUpdate\\", prevProps, prevState, snapshot);\\n  }\\n\\n  componentWillUnmount() {\\n    console.log(\\"dev: componentWillUnmount\\");\\n  }\\n}\\n```\\n\\n</details>\\n\\n### constructor\u521d\u59cb\u5316\\n\\n\u4e00\u4e2a\u7c7b\u7ec4\u4ef6\u5bf9\u8c61\u5728\u6574\u4e2a\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u53ea\u4f1a\u8fd0\u884c\u4e00\u6b21\u3002\u5982\u679c\u4e00\u4e2a\u7c7b\u7ec4\u4ef6\u88ab\u591a\u6b21\u521b\u5efa\uff0c\u5176`constructor`\u4e92\u4e0d\u5e72\u6270\\n\\n### static getDerivedStateFromProps(props, state)\u83b7\u53d6\u7ec4\u4ef6\u6700\u65b0\u7684\u5c5e\u6027\u548c\u72b6\u6001\\n\\n\u4e3b\u8981\u7528\u6765\u53d6\u4ee3`componentWillMount`\u548c`componentWillReceiveProps`\\n\\n- props \u7c7b\u7ec4\u4ef6\u5f53\u524d\u7684props\\n  - \u5728\u9996\u6b21\u6302\u8f7d\u65f6\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u7236\u7ec4\u4ef6\u4f20\u9012\u7ed9\u5f53\u524d\u7c7b\u7ec4\u4ef6\u7684\u5c5e\u6027\\n- state \u7c7b\u7ec4\u4ef6\u5f53\u524d\u7684state\\n  - \u5728\u9996\u6b21\u6302\u8f7d\u65f6\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5f53\u524d\u7c7b\u7ec4\u4ef6\u7684\u521d\u59cb\u5316\u72b6\u6001\\n\\n\u5176\u8fd4\u56de\u503c\u4f1a<Highlight color=\\"orange\\">\u6d45</Highlight>\u5408\u5e76\u5230`state`\u4e2d\u3002\u5982\u679c\u8fd4\u56de\u503c\u4e3a\u975e`object`\u7c7b\u578b\uff0c\u5219\u8fd4\u56de\u503c\u4f1a\u88ab\u5ffd\u7565\\n\\n<HWarning>\u8be5\u65b9\u6cd5\u4e0d\u5e38\u7528</HWarning>\\n\\n### render\u521b\u5efafiber\\n\\n`render`\u65b9\u6cd5\u6267\u884c\u4e4b\u540e\uff0c`React`\u4f1a\u521b\u5efa`fiber`\\n\\n### componentDidMount\u6302\u8f7d\u5230\u9875\u9762\\n\\n\u8be5\u65b9\u6cd5\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002\u9996\u6b21\u6302\u8f7d\u7ec4\u4ef6\uff0c`fiber`\u88ab\u6e32\u67d3\u5230\u9875\u9762\u540e\u6267\u884c\\n\\n\u901a\u5e38\u505a\u4e00\u4e9b\u4e0d\u5f71\u54cd\u9875\u9762\u6e32\u67d3\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u53d1\u8d77\u7f51\u7edc\u8bf7\u6c42\u3001\u83b7\u53d6\u771f\u5b9eDOM\u3001\u5f00\u542f\u5b9a\u65f6\u5668\u7b49\\n\\n### shouldComponentUpdate(nextProps, nextState): boolean\u662f\u5426\u91cd\u65b0\u6e32\u67d3\\n\\n\u5728\u66f4\u65b0\u7ec4\u4ef6\u65f6\uff0c\u7528\u6765\u505a\u6027\u80fd\u4f18\u5316\u3002\u53ef\u4ee5\u6839\u636e\u6700\u65b0\u7684props\uff08nextProps)\u3001state(nextState)\uff0c\u505a\u4e00\u4e9b\u5224\u65ad\u7ec4\u4ef6\u662f\u5426\u5e94\u8be5\u66f4\u65b0\u7684\u5904\u7406\u3002`React`\u4f1a\u4f9d\u5176\u8fd4\u56de\u503c\uff0c\u6765\u51b3\u5b9a\u7ec4\u4ef6\u662f\u5426\u66f4\u65b0\uff0c\u4ee5\u51cf\u5c11\u9875\u9762\u6e32\u67d3\u6b21\u6570\uff0c\u8fbe\u5230\u6027\u80fd\u4f18\u5316\u7684\u76ee\u7684.\\n\\n:::tip\\n`React`\u5b98\u65b9\u63d0\u4f9b\u4e86\u4e00\u4e2aHOC\uff0c\u5373`PureComponent`\u3002\u5176\u5185\u90e8\u4f1a\u81ea\u52a8\u505a\u6d45\u6bd4\u8f83\u4f18\u5316\u3002\\n\\n\u7ee7\u627f`PureComponent`\u540e\u4e0d\u9700\u8981\u518d\u4f7f\u7528`shouldComponentUpdate`\u8fdb\u884c\u4f18\u5316\\n:::\\n\\n### getSnapshotBeforeUpdate(prevProps, prevState)\u83b7\u53d6\u66f4\u65b0\u4e4b\u524d\u7684\u72b6\u6001\\n\\n\u6267\u884c\u5230\u8be5\u65b9\u5f0f\u65f6\uff0c`React`\u5df2\u7ecf\u5c06\u6700\u65b0\u7684\u771f\u5b9eDOM\u6784\u5efa\u5b8c\u6210\uff0c\u4f46\u8fd8\u672a\u6e32\u67d3\u5230\u9875\u9762\u4e2d\uff0c\u6240\u4ee5\u8fd9\u91cc\u62ff\u5230\u7684DOM\u662f<HWarning>\u65e7</HWarning>\u7684\u3002\\n\\n> \u53ef\u4ee5\u7406\u89e3\u4e3a\u66f4\u65b0\u524d\u7684\u5feb\u7167\uff0c\u901a\u5e38\u7528\u6765\u505a\u4e00\u4e9b\u9644\u52a0\u7684DOM\u64cd\u4f5c\u3002\\n\\n\u5176\u8fd4\u56de\u503c\u4f1a\u4f5c\u4e3a`componentDidUpdate`\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\\n\\n### componentDidUpdate(prevProps, prevState, snapshot)\u66f4\u65b0\u5b8c\u6210\u540e\u7684\u56de\u8c03\\n\\n\u6267\u884c\u5230\u8be5\u65b9\u6cd5\u65f6\uff0c\u771f\u5b9eDOM\u5df2\u7ecf\u88ab\u6e32\u67d3\u5230\u9875\u9762\u4e2d\u3002\\n\\n- snapshot: getSnapshotBeforeUpdate\u7684\u8fd4\u56de\u503c\\n\\n### componentWillUnmount() \u7ec4\u4ef6\u5c06\u8981\u5378\u8f7d\u65f6\u7684\u56de\u8c03\\n\\n\u5e38\u7528\u6765\u505a\u4e00\u4e9b\u526f\u4f5c\u7528\u7684\u6e05\u9664\u64cd\u4f5c\u3002\u6bd4\u5982\u53d6\u6d88\u4e8b\u4ef6\u76d1\u542c\u3001\u6e05\u9664\u5b9a\u65f6\u5668\u7b49\\n\\n## React\u4e2d\u7684\u5143\u7d20\\n\\n| \u540d\u79f0        | \u6765\u6e90             | \u5907\u6ce8                                                                                  |\\n| ----------- | ---------------- | ------------------------------------------------------------------------------------- |\\n| \u5bbf\u4e3b\u5143\u7d20    | \u6d4f\u89c8\u5668\u3001Nodejs\u7b49 | \u6d4f\u89c8\u5668\u4e2d\u7684\u6807\u7b7e\u5143\u7d20                                                                    |\\n| \u865a\u62dfDOM\u5143\u7d20 | React            | \u4f7f\u7528jsx\u7f16\u5199\u7684\u7c7b\u5bbf\u4e3b\u5143\u7d20                                                               |\\n| \u7ec4\u4ef6\u5143\u7d20    | React            | \u7c7b/\u51fd\u6570\u7ec4\u4ef6                                                                           |\\n| \u6587\u672c\u5143\u7d20    | React            | \u5b57\u7b26\u4e32/\u6570\u5b57\u7b49                                                                         |\\n| \u7a7a\u5143\u7d20      | React            | - null\u3001undefined\u3001false\u3001true<br/>\u5747\u4f1a\u88ab\u521b\u5efa\u4e3a\u4e00\u4e2a\u7a7a\u5143\u7d20\u3002\u6e32\u67d3\u65f6\u9047\u5230\u7a7a\u5143\u7d20\u4ec0\u4e48\u4e5f\u4e0d\u505a |\\n| \u6570\u7ec4\u5143\u7d20    | React            | React\u4f1a\u6839\u636e\u5176\u5185\u7684\u6bcf\u4e00\u9879\u5143\u7d20\u7684\u7c7b\u578b\u505a\u5bf9\u5e94\u7684\u4e8b\u60c5                                         |\\n\\n:::tip\\nReact\u7684\u5de5\u4f5c\u662f\u901a\u8fc7\u5bbf\u4e3b\u5143\u7d20\u6216\u53ef\u4ee5\u751f\u6210\u865a\u62df\u8282\u70b9\u7684\u4e1c\u897f\u751f\u6210\u865a\u62df\u8282\u70b9\uff0c\u7136\u540e\u9488\u5bf9\u4e0d\u540c\u7684\u8282\u70b9\u7c7b\u578b\u53bb\u505a\u4e0d\u540c\u7684\u4e8b\u60c5\uff0c\u6700\u7ec8\u751f\u6210\u771f\u5b9eDOM\u6302\u8f7d\u5230\u9875\u9762\u4e0a\uff01\u6240\u4ee5\u5bf9\u8c61\u4e0d\u80fd\u76f4\u63a5\u88ab\u6e32\u67d3\uff0c\u56e0\u4e3a\u5b83\u751f\u6210\u4e0d\u4e86\u865a\u62df\u8282\u70b9\u3002\\n:::\\n\\n## \u7ec4\u4ef6\u6e32\u67d3Demo\\n\\n### \u9996\u6b21\u6302\u8f7d\\n\\n<details>\\n\\n  <summary>\u4ee3\u7801\ud83c\udf30</summary>\\n\\n```jsx\\nimport React from \\"react\\";\\nimport ReactDOM from \\"react-dom/client\\";\\nconst root = ReactDOM.createRoot(document.getElementById(\\"root\\"));\\n\\n/**\\n  \u7ec4\u4ef6\u8282\u70b9-\u7c7b\u7ec4\u4ef6\\n*/\\nclass ClassSon extends React.Component {\\n  constructor(props) {\\n    super(props);\\n    console.log(\\"444 ClassSon constructor\\");\\n  }\\n\\n  static getDerivedStateFromProps(props, state) {\\n    console.log(\\"555 ClassSon getDerivedStateFromProps\\");\\n    return {};\\n  }\\n\\n  componentDidMount() {\\n    console.log(\\"666 ClassSon componentDidMount\\");\\n  }\\n\\n  render() {\\n    return (\\n      <div className=\\"func-wrapper\\">\\n        <span>\\n          textNode22\\n          {undefined}\\n        </span>\\n        {[false, \\"textNode33\\", <div>textNode44</div>]}\\n      </div>\\n    );\\n  }\\n}\\n\\n/**\\n  \u7ec4\u4ef6\u8282\u70b9-\u7c7b\u7ec4\u4ef6\\n*/\\nclass ClassComp extends React.Component {\\n  constructor(props) {\\n    super(props);\\n    console.log(\\"111 ClassComp constructor\\");\\n  }\\n\\n  static getDerivedStateFromProps(props, state) {\\n    console.log(\\"222 ClassComp getDerivedStateFromProps\\");\\n    return {};\\n  }\\n\\n  componentDidMount() {\\n    console.log(\\"333 ClassComp componentDidMount\\");\\n  }\\n\\n  render() {\\n    return (\\n      <div className=\\"class-wrapper\\">\\n        <ClassSon />\\n        <p>textNode11</p>\\n        {123456789}\\n      </div>\\n    );\\n  }\\n}\\n\\nroot.render(<ClassComp />);\\n```\\n\\n</details>\\n\\n#### \u56fe\u89e3\\n\\n![\u9996\u6b21\u6302\u8f7d](./React\u6e32\u67d3\u539f\u7406/first-render.webp)\\n\\n### \u66f4\u65b0\u548c\u5378\u8f7d\\n\\n#### diff\u5c0f\u7ed3\\n\\n- \u627e\u5230\u65e7\u6811\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u8fdb\u884c\u6bd4\u8f83\\n- \u65b0\u65e7\u8282\u70b9\u7c7b\u578b\u4e0d\u540c\uff0c\u76f4\u63a5\u5378\u8f7d\u4e22\u5f03\u65e7\u6811\uff0c\u91cd\u65b0\u521b\u5efa\u65b0\u7684\u8282\u70b9\\n- \u6570\u7ec4\u5143\u7d20\u4e2d\u7684\u5144\u5f1f\u8282\u70b9\u95f4\u901a\u8fc7`key`\u8fdb\u884c\u552f\u4e00\u6807\u8bc6\\n\\n#### \u6570\u7ec4\u5143\u7d20\u4e2dkey\u7684\u4f5c\u7528\\n\\n\u4e3a\u4e86\u63d0\u9ad8\u8282\u70b9\u590d\u7528\u7387\u3002\u5982\u679c\u67d0\u4e2a\u6570\u7ec4\u5143\u7d20\u4e0b\u7684\u7ec4\u4ef6\u5185\u5bb9\u5c24\u5176\u591a\uff0c\u4f7f\u7528key\u53ef\u4ee5\u51cf\u5c11\u6811\u9012\u5f52\u7b49\u5904\u7406\uff0c\u4ee5\u5b9e\u73b0\u6027\u80fd\u4f18\u5316\\n\\n##### \u672a\u4f7f\u7528key\\n\\n![\u672a\u4f7f\u7528key](./React\u6e32\u67d3\u539f\u7406/unused-key.webp)\\n\\n##### \u4f7f\u7528key\\n\\n![\u4f7f\u7528key](./React\u6e32\u67d3\u539f\u7406/used-key.webp)\\n\\n### \u6761\u4ef6\u6e32\u67d3\\n\\n> \u5c3d\u91cf\u4fdd\u6301\u7ed3\u6784\u7684\u7a33\u5b9a\u6027\uff0c\u5982\u679c\u672a\u6dfb\u52a0key\u7684\u60c5\u51b5\u4e0b\uff0c\u5144\u5f1f\u8282\u70b9\u66f4\u65b0\u4f4d\u7f6e\u524d\u540e\u9519\u4f4d\u4e00\u4e2a\u90a3\u4e48\u540e\u7eed\u5168\u90e8\u7684\u6bd4\u8f83\u90fd\u4f1a\u9519\u4f4d\u5bfc\u81f4\u627e\u4e0d\u5230\u5bf9\u6bd4\u76ee\u6807\u4ece\u800c\u8fdb\u884c\u5378\u8f7d\u3001\u65b0\u5efa\u6d41\u7a0b\uff0c\u5bf9\u6027\u80fd\u5927\u6253\u6298\u6263\u3002\\n\\n:::tip\\n\\n\u5728\u8fdb\u884c\u6761\u4ef6\u6e32\u67d3\u663e\u793a\u9690\u85cf\u65f6\uff0c\u5b98\u65b9\u63a8\u8350\u4ee5\u4e0b\u505a\u6cd5\uff1a\\n\\n\u63a7\u5236style\uff1avisibility\u6765\u63a7\u5236\u663e\u793a\u9690\u85cf\u3002\\n\u5728\u9690\u85cf\u65f6\u7ed9\u4e00\u4e2a\u7a7a\u8282\u70b9\u6765\u4fdd\u8bc1\u5bf9\u6bd4\u524d\u540e\u80fd\u627e\u5230\u540c\u4e00\u4f4d\u7f6e\u3002\u4e0d\u5f71\u54cd\u540e\u7eed\u5144\u5f1f\u8282\u70b9\u7684\u6bd4\u8f83\u3002\\n\\n```jsx\\nflag ? <div></div> : null;\\n```\\n\\n:::\\n\\n## \u53c2\u8003\\n\\n[\u300c\u4e07\u5b57\u603b\u7ed3\u300d\ud83c\udf52\u52a8\u753b + \u5927\u767d\u8bdd\u8bb2\u6e05\u695aReact\u6e32\u67d3\u539f\u7406](https://juejin.cn/post/7121378029682556958)"},{"id":"/2023/09/27/\u5e38\u7528git\u547d\u4ee4","metadata":{"permalink":"/blog/index/2023/09/27/\u5e38\u7528git\u547d\u4ee4","source":"@site/blog/2023/09/27/\u5e38\u7528git\u547d\u4ee4.md","title":"\u5e38\u7528git\u547d\u4ee4","description":"git\u5e38\u7528\u547d\u4ee4\u5907\u5fd8","date":"2023-09-27T00:00:00.000Z","formattedDate":"2023\u5e749\u670827\u65e5","tags":[{"label":"git","permalink":"/blog/index/tags/git"}],"readingTime":4.57,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5e38\u7528git\u547d\u4ee4","toc_max_heading_level":6,"tags":["git"]},"prevItem":{"title":"React\u6e32\u67d3\u539f\u7406","permalink":"/blog/index/2023/10/21/React\u6e32\u67d3\u539f\u7406"},"nextItem":{"title":"\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f","permalink":"/blog/index/2023/09/26/\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f"}},"content":"git\u5e38\u7528\u547d\u4ee4\u5907\u5fd8\\n\\n\x3c!-- truncate --\x3e\\n\\n:::tip\\ngit\u7248\u672c\uff1a2.42.0\\n:::\\n\\n![process](./\u5e38\u7528git\u547d\u4ee4/process.png)\\n\\n> \u672f\u8bed\\n>\\n> - Workspace\uff1a\u5de5\u4f5c\u533a/\u5de5\u4f5c\u6811\\n> - Index / Stage\uff1a\u7d22\u5f15/\u6682\u5b58\u533a\\n> - Repository\uff1a\u4ed3\u5e93\u533a\uff08\u6216\u672c\u5730\u4ed3\u5e93\uff09\\n> - Remote\uff1a\u8fdc\u7a0b\u4ed3\u5e93\\n\\n## \u57fa\u672c\u547d\u4ee4\\n\\n### \u6dfb\u52a0\\n\\n```bash\\n# \u5728\u5f53\u524d\u76ee\u5f55\u521d\u59cb\u5316\u4ed3\u5e93\\ngit init\\n# \u6dfb\u52a0\u53d8\u52a8\u5230\u6682\u5b58\u533a\\ngit add <filepattern>\\n# \u6dfb\u52a0\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u53d8\u52a8\u5230\u6682\u5b58\u533a\\ngit add .\\n# \u6dfb\u52a0\u5de5\u4f5c\u6811\u4e2d\u7684\u6240\u6709\u53d8\u52a8\u5230\u6682\u5b58\u533a\\ngit add -A\\n```\\n\\n### \u63d0\u4ea4\\n\\n```bash\\n# \u4f7f\u7528msg\u4f5c\u4e3a\u53d8\u52a8\u7684\u63d0\u4ea4\u4fe1\u606f\\ngit commit -m <msg>\\n# \u66f4\u65b0\u6700\u65b0\u7684\u4e00\u6b21\u63d0\u4ea4\u300c\u56e0\u4e3a\u5185\u5bb9\u53d8\u5316\uff0c\u9700\u8981\u5f3a\u5236\u63a8\u9001\u300d\\ngit commit --amend <msg>\\n# \u66f4\u65b0\u6700\u65b0\u7684\u4e00\u6b21\u63d0\u4ea4\uff0c\u4f46\u4e0d\u4fee\u6539\u63d0\u4ea4\u4fe1\u606f\u300c\u56e0\u4e3a\u5185\u5bb9\u53d8\u5316\uff0c\u9700\u8981\u5f3a\u5236\u63a8\u9001\u300d\\ngit commit --amend --no-edit\\n# \u8df3\u8fc7pre-commit\u548ccommit-msg\u7684git hooks\\ngit commit -m <msg> -n\\ngit commit -m <msg> --no-verify\\n```\\n\\n### \u6682\u5b58\\n\\n\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e34\u65f6\u5b58\u50a8\\n\\n```bash\\n# \u4fdd\u5b58\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u7684\u6240\u6709\u53d8\u52a8\\ngit stash save <name>\\n# \u67e5\u770b\u6240\u6709\u4e34\u65f6\u5b58\u50a8\\ngit stash list\\n# \u5e94\u7528\u4e00\u4e2a\u4e34\u65f6\u5b58\u50a8\\ngit stash apply <stash>\\n# \u5e94\u7528\u4e00\u4e2a\u4e34\u65f6\u5b58\u50a8\u5e76\u5c06\u5176\u4ecelist\u4e2d\u79fb\u9664\\ngit stash pop\\n# \u5220\u9664\u4e00\u4e2a\u4e34\u65f6\u5b58\u50a8\\ngit stash drop <stash>\\n# \u5220\u9664\u6240\u6709\u4e34\u65f6\u5b58\u50a8\\ngit stash clear\\n```\\n\\n### \u91cd\u7f6e\u4fee\u6539\\n\\n![reset](./\u5e38\u7528git\u547d\u4ee4/reset.png)\\n\\n```bash\\n# \u91cd\u7f6eHEAD\u5230commitId\uff0c\u5e76\u4fee\u6539\u6682\u5b58\u533a\u5185\u5bb9\\ngit reset <commitId>\\n# \u91cd\u7f6eHEAD\u5230commitId\\ngit reset --soft <commitId>\\n# \u91cd\u7f6eHEAD\u5230commitId\uff0c\u5e76\u4fee\u6539\u6682\u5b58\u533a\u4e0e\u5de5\u4f5c\u533a\u4e2d\u7684\u5185\u5bb9\\ngit reset --hard <commitId>\\n```\\n\\n### \u64a4\u9500\u4fee\u6539\\n\\n```bash\\n# \u6062\u590d\u5f53\u524d\u5206\u652f\u7684\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a\u5230HEAD\\ngit checkout .\\n# \u64a4\u56de\u67d0\u6b21commit\u5e76\u63d0\u4ea4\u65b0\u7684commit\\ngit revert <commitId>\\n# \u6267\u884c\u65f6\u4e0d\u6253\u5f00\u9ed8\u8ba4\u7f16\u8f91\u5668\uff0c\u76f4\u63a5\u4f7f\u7528 Git \u81ea\u52a8\u751f\u6210\u7684\u63d0\u4ea4\u4fe1\u606f\u3002\\ngit revert <commitId> --no-edit\\n# \u53ea\u62b5\u6d88\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u6587\u4ef6\u53d8\u5316\uff0c\u4e0d\u4ea7\u751f\u65b0\u7684\u63d0\u4ea4\u3002\\ngit revert <commitId> --no-commit\\n```\\n\\n### \u5220\u9664\\n\\n```bash\\n# \u5220\u9664\u5de5\u4f5c\u533a\u6587\u4ef6\uff0c\u5e76\u4e14\u5c06\u8fd9\u6b21\u5220\u9664\u653e\u5165\u6682\u5b58\u533a\\ngit rm <file>\\n# \u505c\u6b62\u8ffd\u8e2a\u6307\u5b9a\u6587\u4ef6\uff0c\u4f46\u8be5\u6587\u4ef6\u4f1a\u4fdd\u7559\u5728\u5de5\u4f5c\u533a\\ngit rm --cached <file>\\n# \u6539\u540d\u6587\u4ef6\uff0c\u5e76\u4e14\u5c06\u8fd9\u4e2a\u6539\u540d\u653e\u5165\u6682\u5b58\u533a\\ngit mv [file-original] [file-renamed]\\n# \u5220\u9664untracked files\\ngit clean -f\\n# \u8fde\u5e26untracked\u7684\u76ee\u5f55\u4e00\u8d77\u5220\u9664\\ngit clean -fd\\n```\\n\\n### \u5206\u652f\\n\\n```bash\\n# \u67e5\u770b\u672c\u5730\u6240\u6709\u5206\u652f\\ngit branch\\n# \u67e5\u770b\u672c\u5730\u548c\u8fdc\u7a0b\u6240\u6709\u5206\u652f\\ngit branch -a\\n# \u67e5\u770b\u8fdc\u7a0b\u6240\u6709\u5206\u652f\\ngit branch -r\\n# \u57fa\u4e8e\u5f53\u524d\u5206\u652f\u65b0\u5efa\u4e00\u4e2a\u5206\u652f\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f\\ngit checkout -b <branch-name>\\n# \u5207\u6362\u5230\u4e4b\u524d\u7684\u64cd\u4f5c\u5206\u652f\\ngit checkout -\\n# \u5220\u9664\u672c\u5730\u5206\u652f\\ngit branch -d <branch-name>\\n# \u5f3a\u5236\u5220\u9664\u672c\u5730\u5206\u652f\\ngit branch -D <branch-name>\\n# \u5220\u9664\u8fdc\u7a0b\u5206\u652f\\ngit push origin --delete <branch-name>\\ngit branch -dr <remote/branch>\\n```\\n\\n### \u67e5\u770b\u63d0\u4ea4\u4fe1\u606f\\n\\n```bash\\n# \u67e5\u770b\u6240\u6709\u63d0\u4ea4\u8bb0\u5f55\uff0c\u5e76\u663e\u793a\u6bcf\u6b21\u63d0\u4ea4\u65f6\u53d8\u66f4\u7684\u6587\u4ef6\\ngit log --stat\\n# \u663e\u793a\u8fc7\u53bb5\u6b21\u7684\u63d0\u4ea4\u8bb0\u5f55\\ngit log -5 --pretty --oneline\\n# \u663e\u793a\u6587\u4ef6\u7684\u6bcf\u6b21\u63d0\u4ea4\u7684diff\\ngit log -p <file-name>\\n# \u663e\u793a\u6240\u6709\u63d0\u4ea4\u8fc7\u7684\u7528\u6237\uff0c\u6309\u63d0\u4ea4\u6b21\u6570\u6392\u5e8f\\ngit shortlog -sn\\n# \u663e\u793a\u6307\u5b9a\u6587\u4ef6\u662f\u4ec0\u4e48\u4eba\u5728\u4ec0\u4e48\u65f6\u95f4\u4fee\u6539\u8fc7\\ngit blame <file>\\n# \u663e\u793a\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u5dee\u5f02\\ngit diff\\n# \u663e\u793a\u6682\u5b58\u533a\u548c\u4e0a\u4e00\u4e2acommit\u7684\u5dee\u5f02\\ngit diff --cached <file>\\n```\\n\\n### \u5408\u5e76\\n\\n```bash\\n# \u5c06<branch-name>\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\\ngit merge <branch-name>\\n# \u5408\u5e76<commitId>\u5230\u5f53\u524d\u5206\u652f\\ngit cherry-pick <commitId>\\n```\\n\\n## \u53c2\u8003\\n\\n[\u5e38\u7528 Git \u547d\u4ee4\u6e05\u5355](https://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html)\\n\\n[\u7334\u5b50\u90fd\u80fd\u61c2\u7684 Git \u5165\u95e8](https://backlogtool.com/git-tutorial/cn/)\\n\\n[\u5982\u4f55\u64a4\u9500 Git \u64cd\u4f5c\uff1f](https://www.ruanyifeng.com/blog/2019/12/git-undo.html)"},{"id":"/2023/09/26/\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f","metadata":{"permalink":"/blog/index/2023/09/26/\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f","source":"@site/blog/2023/09/26/\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f.md","title":"\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f","description":"\u56e0\u4e3aantd \u7684InputNumber \u7ec4\u4ef6\u6700\u7ec8\u7684\u8f93\u5165\u5185\u5bb9\u53ea\u80fd\u5728\u5931\u7126\u540e\u770b\u5230\uff0c\u4f46\u662f\u6709\u65f6\u5019\u7528\u6237\u60f3\u8981\u5728\u8f93\u5165\u7684\u65f6\u5019\u5c31\u80fd\u770b\u5230\u6700\u7ec8\u7684\u6548\u679c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u529f\u80fd\u8bbe\u8ba1\u4e3aInputNumber \u53ea\u5141\u8bb8\u8f93\u5165\u6574\u6570\uff0c\u4e14\u975e\u6570\u5b57\u5185\u5bb9\u4e0d\u5141\u8bb8\u8f93\u5165\u3002\u56e0\u4e3a\u5e26\u4e86\u4e00\u4e9b\u4e1a\u52a1\u903b\u8f91\uff0c\u8fd9\u65f6\u5019antd \u7684InputNumber \u81ea\u8eab\u7684\u529f\u80fd\u5c31\u6709\u4e9b\u4e0d\u591f\u7528\u4e86\u3002\u6240\u4ee5\uff0c\u8bb0\u5f55\u4e0b\u81ea\u5df1\u5199\u7684\u4e00\u4e2a\u5173\u4e8eantd \u7684InputNumber \u4e0d\u5141\u8bb8\u8f93\u5165\u5c0f\u6570\u70b9\u7684demo\u3002","date":"2023-09-26T00:00:00.000Z","formattedDate":"2023\u5e749\u670826\u65e5","tags":[{"label":"react","permalink":"/blog/index/tags/react"},{"label":"antd","permalink":"/blog/index/tags/antd"}],"readingTime":9.415,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f","toc_max_heading_level":6,"tags":["react","antd"]},"prevItem":{"title":"\u5e38\u7528git\u547d\u4ee4","permalink":"/blog/index/2023/09/27/\u5e38\u7528git\u547d\u4ee4"},"nextItem":{"title":"nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55","permalink":"/blog/index/2023/09/23/nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55"}},"content":"\u56e0\u4e3a`antd` \u7684`InputNumber` \u7ec4\u4ef6\u6700\u7ec8\u7684\u8f93\u5165\u5185\u5bb9\u53ea\u80fd\u5728\u5931\u7126\u540e\u770b\u5230\uff0c\u4f46\u662f\u6709\u65f6\u5019\u7528\u6237\u60f3\u8981\u5728\u8f93\u5165\u7684\u65f6\u5019\u5c31\u80fd\u770b\u5230\u6700\u7ec8\u7684\u6548\u679c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u529f\u80fd\u8bbe\u8ba1\u4e3a`InputNumber` \u53ea\u5141\u8bb8\u8f93\u5165\u6574\u6570\uff0c\u4e14\u975e\u6570\u5b57\u5185\u5bb9\u4e0d\u5141\u8bb8\u8f93\u5165\u3002\u56e0\u4e3a\u5e26\u4e86\u4e00\u4e9b\u4e1a\u52a1\u903b\u8f91\uff0c\u8fd9\u65f6\u5019`antd` \u7684`InputNumber` \u81ea\u8eab\u7684\u529f\u80fd\u5c31\u6709\u4e9b\u4e0d\u591f\u7528\u4e86\u3002\u6240\u4ee5\uff0c\u8bb0\u5f55\u4e0b\u81ea\u5df1\u5199\u7684\u4e00\u4e2a\u5173\u4e8e`antd` \u7684`InputNumber` \u4e0d\u5141\u8bb8\u8f93\u5165\u5c0f\u6570\u70b9\u7684demo\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u5b9e\u73b0\u6548\u679c\\n\\n- \u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff0c\u975e\u6570\u5b57\u4e0d\u5141\u8bb8\u8f93\u5165\\n- \u5b9e\u65f6\u663e\u793a\u6700\u7ec8\u7684\u8f93\u5165\u7ed3\u679c\\n- \u4e0d\u8d85\u8fc7\u6700\u5927\u503c\uff0c\u4e0d\u5c0f\u4e8e\u6700\u5c0f\u503c\\n\\n## \u4e00\u4e2aInputNumber\u5b9e\u73b0\\n\\n```tsx\\nimport React, { useEffect, useRef, useState } from \\"react\\";\\nimport { InputNumber, InputNumberProps } from \\"antd\\";\\nexport default function IntegerInputNumber(props: InputNumberProps) {\\n  const { defaultValue, min, max, step } = props;\\n  const [value, setValue] = useState(defaultValue);\\n  const [forceRefresh, setForceRefresh] = useState(0);\\n\\n  const elemRef = useRef<HTMLInputElement>(null);\\n\\n  useEffect(() => {\\n    if (forceRefresh) {\\n      elemRef.current?.focus();\\n    }\\n  }, [forceRefresh, value]);\\n\\n  const parser = (newValue: string) => {\\n    console.log(\\"dev: parser-value\\", newValue);\\n    if (newValue === `${value}`) {\\n      return;\\n    }\\n    if (newValue === \\"\\") {\\n      setValue(\\"\\");\\n      return;\\n    }\\n    // \u8fd9\u91cc\u62ff\u5230\u7684\u6570\u5b57\u53ef\u80fd\u548cvalue\u4e00\u6837\\n    const num = parseInt(newValue);\\n    if (num === value) {\\n      // It will lead input\'s blur.\\n      setForceRefresh((v) => v + 1);\\n      return;\\n    }\\n\\n    let realNum = num as number;\\n    if (/\\\\D/.test(newValue)) {\\n      // \u975e\u6570\u5b57\u5b57\u7b26\u4e32\uff0c\u76f4\u63a5\u7ed3\u675f\u51fd\u6570\uff0c\u4ecd\u7136\u4f7f\u7528\u4e4b\u524d\u7684value\\n      if (Number.isNaN(num)) {\\n        return;\\n      }\\n\\n      if (typeof min === \\"number\\") {\\n        if (num < min) {\\n          realNum = min;\\n        }\\n      }\\n\\n      if (typeof max === \\"number\\") {\\n        if (num > max) {\\n          realNum = max;\\n        }\\n      }\\n    }\\n    // It will lead to input\'s blur.\\n    setValue(realNum);\\n  };\\n\\n  return (\\n    <InputNumber\\n      ref={elemRef}\\n      key={forceRefresh}\\n      parser={parser}\\n      value={value}\\n      min={min}\\n      max={max}\\n      step={step}\\n    />\\n  );\\n}\\n```\\n\\n\u4e0a\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\u4e86\u7981\u6b62`antd` \u7684`InputNumber` \u7ec4\u4ef6\u8f93\u5165\u975e\u6570\u5b57\u5b57\u7b26\u7684\u529f\u80fd\u3002\u4ece\u4ee3\u7801\u4e0a\u53ef\u4ee5\u770b\u51fa\uff0c\u662f\u901a\u8fc7\u63a7\u5236\u7ec4\u4ef6\u7684`value` \u7684\u65b9\u5f0f\u5b9e\u73b0\u7ed3\u679c\u7684\u52a8\u6001\u5c55\u793a\u3002**\u56e0\u4e3a`setState` \u4e4b\u540e\u4f1a\u5931\u7126\uff0c\u6240\u4ee5\u76d1\u542c`forceRefresh` \u548c`value` \u7684\u503c\uff0c\u5e76\u91cd\u65b0\u805a\u7126\u3002**\\n\\n\u4f46\u662f\u4e0a\u9762\u7684\u529f\u80fd\u8fd8\u4e0d\u592a\u5b8c\u5584\uff0c\u53ef\u4ee5\u8bd5\u8bd5\u53f3\u8fb9\u7684\u4e24\u4e2a\u4e0a\u4e0b\u7bad\u5934\u7684\u529f\u80fd\uff0c\u4f1a\u53d1\u73b0\u4ed6\u4eec\u88ab\u70b9\u51fb\u540e\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u3002\u56e0\u4e3a`value` \u73b0\u5728\u662f\u624b\u52a8\u63a7\u5236\u7684\uff0c\u6240\u4ee5\u5373\u4f7f\u5185\u7f6e\u7684`onStep` \u6709\u8ba4\u771f\u6267\u884c\uff0c\u4f46\u4e5f\u65e0\u6d4e\u4e8e\u4e8b\u3002\u4e0b\u9762\u7ed9\u51fa\u4e86\u5904\u7406\u4e0a\u4e0b\u7bad\u5934\u529f\u80fd\u7684\u5b8c\u6574\u4ee3\u7801\u3002\\n\\n### \u5904\u7406\u4e0a\u4e0b\u7bad\u5934\u7684\u529f\u80fd\\n\\n```tsx\\nimport React, { useEffect, useRef, useState } from \\"react\\";\\nimport { InputNumber, InputNumberProps } from \\"antd\\";\\nexport default function IntegerInputNumber(props: InputNumberProps) {\\n  const { defaultValue, min, max, step } = props;\\n  const [forceRefresh, setForceRefresh] = useState(0);\\n  const valueRef = useRef(defaultValue);\\n\\n  const elemRef = useRef<HTMLInputElement>(null);\\n\\n  useEffect(() => {\\n    if (forceRefresh) {\\n      elemRef.current?.focus();\\n    }\\n  }, [forceRefresh]);\\n\\n  const parser = (newValue: string) => {\\n    console.log(\\"dev: parser-value\\", newValue);\\n    if (newValue === `${valueRef.current}`) {\\n      return;\\n    }\\n    if (newValue === \\"\\") {\\n      valueRef.current = \\"\\";\\n      return;\\n    }\\n    // \u8fd9\u91cc\u62ff\u5230\u7684\u6570\u5b57\u53ef\u80fd\u548cvalue\u4e00\u6837\\n    const num = parseInt(newValue);\\n    if (num !== valueRef.current) {\\n      let realNum = num as number;\\n      if (/\\\\D/.test(newValue)) {\\n        // \u975e\u6570\u5b57\u5b57\u7b26\u4e32\uff0c\u76f4\u63a5\u7ed3\u675f\u51fd\u6570\uff0c\u4ecd\u7136\u4f7f\u7528\u4e4b\u524d\u7684value\\n        if (Number.isNaN(num)) {\\n          return;\\n        }\\n\\n        if (typeof min === \\"number\\") {\\n          if (num < min) {\\n            realNum = min;\\n          }\\n        }\\n\\n        if (typeof max === \\"number\\") {\\n          if (num > max) {\\n            realNum = max;\\n          }\\n        }\\n      }\\n      valueRef.current = realNum;\\n    }\\n\\n    // It will lead input\'s blur.\\n    setForceRefresh((v) => v + 1);\\n  };\\n\\n  const onMyStep = (value: number) => {\\n    valueRef.current = value;\\n    setForceRefresh((v) => v + 1);\\n  };\\n  return (\\n    <InputNumber\\n      ref={elemRef}\\n      key={forceRefresh}\\n      parser={parser}\\n      value={valueRef.current}\\n      min={min}\\n      max={max}\\n      step={step}\\n      onStep={onMyStep}\\n    />\\n  );\\n}\\n```\\n\\n\u5728`onStep` \u76f4\u63a5\u4fee\u6539`value` \u503c\u4f1a\u5bfc\u81f4\u4e0b\u9762\u7684\u9519\u8bef\u3002\\n\\n![error](./\u5982\u4f55\u8ba9antd\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f/error.png)\\n\\n\u6839\u636e\u62a5\u9519\u53ef\u4ee5\u770b\u51fa\u662f\u56e0\u4e3a\u91cd\u590d\u8c03\u7528\u4e86`setState` \u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u628a`value` \u4ece`state` \u6539\u6210\u4e86`ref` \u8fd9\u6837\u5c31\u4e0d\u4f1a\u91cd\u590d\u8c03\u7528`setState`\u4e86\u3002\u6240\u4ee5\u73b0\u5728`InputNumber` \u7684\u503c\u7531`valueRef` \u63a7\u5236\\n\\n### \u6dfb\u52a0\u5916\u90e8onChange\u4e8b\u4ef6\u7684\u5904\u7406\\n\\n\u53ef\u80fd\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9700\u8981\u5728`InputNumber` \u7684\u503c\u53d1\u751f\u53d8\u5316\u540e\u8fdb\u884c\u4e00\u4e9b\u5176\u4ed6\u7684\u5904\u7406\u3002\\n\\n\u4f46\u662f\u4e5f\u4e0d\u80fd\u76f4\u63a5\u5199\u5728\u7ec4\u4ef6\u91cc\uff0c\u56e0\u4e3a\u7ec4\u4ef6\u88ab\u4f7f\u7528\u7684\u5730\u65b9\u53ef\u80fd\u4e0d\u6b62\u4e00\u5904\uff0c\u6240\u4ee5\u5c31\u9700\u8981\u5c06`onChange` \u4e8b\u4ef6\u4f20\u9012\u8fdb\u7ec4\u4ef6\u4f7f\u7528\\n\\n\u4e0d\u8fc7\uff0c\u8fd8\u9700\u8981\u8003\u8651\u53e6\u4e00\u4ef6\u4e8b\u3002\u90a3\u5c31\u662f\uff0c\u4ec0\u4e48\u65f6\u5019\u51fa\u53d1\u8fd9\u4e2a`onChange` \u4e8b\u4ef6\u5462\uff1f\u5982\u679c\u5b9e\u65f6\u89e6\u53d1\uff0c\u4e14`onChange` \u4e8b\u4ef6\u4e2d\u7684\u5904\u7406\u8f83\u7e41\u91cd\u5c31\u4f1a\u5f71\u54cd\u9875\u9762\u6e32\u67d3\u6548\u679c\u3002\\n\\n\u6362\u79cd\u601d\u8003\u65b9\u5411\uff0c\u4e00\u822c\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528`InputNumber` \u5462\uff1f\u5927\u591a\u662f\u8981\u548c`form` \u8868\u5355\u4e00\u8d77\u7684\uff0c`InputNumber` \u53ea\u662f\u5176\u4e2d\u7684\u4e00\u9879\u3002\u800c`form` \u8868\u5355\u63d0\u4ea4\u7684\u65f6\u5019\uff0c`InputNumber` \u57fa\u672c\u90fd\u662f`blur` \u72b6\u6001\u3002\u6240\u4ee5\u8fd9\u91cc\u5c31\u5c06`onChange` \u4e8b\u4ef6\u7684\u89e6\u53d1\u653e\u5728`InputNumber` \u7ec4\u4ef6\u7684`onBlur` \u4e8b\u4ef6\u4e2d\uff0c\u4e14\u4ec5\u5f53`valueRef` \u7684\u503c\u6709\u53d8\u5316\u4e4b\u540e\u624d\u89e6\u53d1\uff0c\u5426\u5219\u5373\u4f7f\u89e6\u53d1\u4e86\u4e5f\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\u3002\u5f53\u7136\uff0c\u4e5f\u6709\u989d\u5916\u60c5\u51b5\uff0c\u4f46\u4e0d\u5728\u672c\u6587\u8303\u56f4\u5185\u3002\\n\\n```tsx\\nimport React, { useEffect, useRef, useState } from \\"react\\";\\nimport { InputNumber, InputNumberProps } from \\"antd\\";\\nexport default function IntegerInputNumber(props: InputNumberProps) {\\n  const { defaultValue, min, max, step, onChange } = props;\\n  const [forceRefresh, setForceRefresh] = useState(0);\\n  const valueRef = useRef(defaultValue);\\n\\n  const elemRef = useRef<HTMLInputElement>(null);\\n\\n  useEffect(() => {\\n    if (forceRefresh) {\\n      elemRef.current?.focus();\\n    }\\n  }, [forceRefresh]);\\n\\n  const parser = (newValue: string) => {\\n    console.log(\\"dev: parser-value\\", newValue);\\n    if (newValue === `${valueRef.current}`) {\\n      return;\\n    }\\n    if (newValue === \\"\\") {\\n      valueRef.current = \\"\\";\\n      return;\\n    }\\n    // \u8fd9\u91cc\u62ff\u5230\u7684\u6570\u5b57\u53ef\u80fd\u548cvalue\u4e00\u6837\\n    const num = parseInt(newValue);\\n    if (num !== valueRef.current) {\\n      let realNum = num as number;\\n      if (/\\\\D/.test(newValue)) {\\n        // \u975e\u6570\u5b57\u5b57\u7b26\u4e32\uff0c\u76f4\u63a5\u7ed3\u675f\u51fd\u6570\uff0c\u4ecd\u7136\u4f7f\u7528\u4e4b\u524d\u7684value\\n        if (Number.isNaN(num)) {\\n          return;\\n        }\\n\\n        if (typeof min === \\"number\\") {\\n          if (num < min) {\\n            realNum = min;\\n          }\\n        }\\n\\n        if (typeof max === \\"number\\") {\\n          if (num > max) {\\n            realNum = max;\\n          }\\n        }\\n      }\\n      valueRef.current = realNum;\\n    }\\n\\n    // It will lead input\'s blur.\\n    setForceRefresh((v) => v + 1);\\n  };\\n\\n  const onMyStep = (value: number) => {\\n    valueRef.current = value;\\n    setForceRefresh((v) => v + 1);\\n  };\\n\\n  const onMyBlur = () => {\\n    if (valueRef.current !== defaultValue) {\\n      onChange?.(valueRef.current as number | string);\\n    }\\n  };\\n\\n  return (\\n    <InputNumber\\n      ref={elemRef}\\n      key={forceRefresh}\\n      parser={parser}\\n      value={valueRef.current}\\n      min={min}\\n      max={max}\\n      step={step}\\n      onStep={onMyStep}\\n      onBlur={onMyBlur}\\n    />\\n  );\\n}\\n```\\n\\n## \u518d\u6b21\u4f18\u5316\\n\\n\u5176\u5b9e\u4e0a\u9762\u7684\u4ee3\u7801\u8fd8\u662f\u6709\u4e00\u4e9b\u7f3a\u9677\u3002\u5982\u679c\u5728\u6570\u5b57\u4e2d\u95f4\u8f93\u5165\u975e\u6570\u5b57\u5b57\u7b26\uff0c\u5219\u5f53\u524d\u4f4d\u7f6e\u4e4b\u540e\u7684\u6570\u5b57\u90fd\u4f1a\u56e0\u4e3a`parseInt` \u800c\u6d88\u5931\u3002\u4e0b\u9762\u662f\u53c2\u8003`Semi-ui` \u7684\u6b63\u5219\u505a\u51fa\u7684\u8c03\u6574\u3002\\n\\n```tsx\\nimport React, { useEffect, useRef, useState } from \\"react\\";\\nimport { InputNumber, InputNumberProps } from \\"antd\\";\\nexport default function IntegerInputNumber(props: InputNumberProps) {\\n  const { defaultValue, min, max, step, onChange } = props;\\n  const [forceRefresh, setForceRefresh] = useState(0);\\n  const valueRef = useRef(defaultValue);\\n\\n  const elemRef = useRef<HTMLInputElement>(null);\\n\\n  useEffect(() => {\\n    if (forceRefresh) {\\n      elemRef.current?.focus();\\n    }\\n  }, [forceRefresh]);\\n\\n  const parser = (newValue: string) => {\\n    console.log(\\"dev: parser-value\\", newValue);\\n    if (newValue === `${valueRef.current}`) {\\n      return;\\n    }\\n    if (newValue === \\"\\") {\\n      valueRef.current = \\"\\";\\n      return;\\n    }\\n    // \u8fd9\u91cc\u62ff\u5230\u7684\u6570\u5b57\u53ef\u80fd\u548cvalue\u4e00\u6837\\n    const realValue = newValue.replace(/\\\\D/g, \\"\\");\\n    if (realValue !== valueRef.current) {\\n      let realNum = +realValue;\\n      if (/\\\\D/.test(newValue)) {\\n        if (typeof min === \\"number\\") {\\n          if (realNum < min) {\\n            realNum = min;\\n          }\\n        }\\n\\n        if (typeof max === \\"number\\") {\\n          if (realNum > max) {\\n            realNum = max;\\n          }\\n        }\\n      }\\n      valueRef.current = realNum;\\n    }\\n\\n    // It will lead input\'s blur.\\n    setForceRefresh((v) => v + 1);\\n  };\\n\\n  const onMyStep = (value: number) => {\\n    valueRef.current = value;\\n    setForceRefresh((v) => v + 1);\\n  };\\n\\n  const onMyBlur = () => {\\n    if (valueRef.current !== defaultValue) {\\n      onChange?.(valueRef.current as number | string);\\n    }\\n  };\\n\\n  return (\\n    <InputNumber\\n      ref={elemRef}\\n      key={forceRefresh}\\n      parser={parser}\\n      value={valueRef.current}\\n      min={min}\\n      max={max}\\n      step={step}\\n      onStep={onMyStep}\\n      onBlur={onMyBlur}\\n    />\\n  );\\n}\\n```\\n\\n## \u5bf9\u6bd4Semi-UI\\n\\n\u5728`Semi-UI` \u7684`InputNumber` \u6587\u6863\u91cc\u5c31\u53ef\u4ee5\u770b\u5230\uff0c\u4ed6\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7981\u6b62\u8f93\u5165\u5c0f\u6570\u70b9\u7684\u793a\u4f8b\u3002\\n\\n![semi](./\u5982\u4f55\u8ba9antd\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f/semi.png)\\n\\n\u770b\u7740\u548c`antd` \u7684\u683c\u5f0f\u5f88\u50cf\u561b\u3002\u62ff\u8fc7\u53bb\u5728`antd` \u91cc\u8bd5\u8bd5\u770b\u770b\u884c\u4e0d\u884c\uff0c\u7b54\u6848\u5f88\u663e\u7136\uff0c\u5e76\u4e0d\u884c\u3002\u4e0d\u7136\u4e5f\u4e0d\u4f1a\u6709\u8fd9\u7bc7\u6587\u7ae0\u4e86\u3002\\n\\n### \u5b9e\u73b0\u7ec6\u8282\\n\\n\u641c\u7d22`formatter` \u53ef\u4ee5\u53d1\u73b0\uff0c\u53ef\u4ee5\u5728`InputNumber` \u7ec4\u4ef6\u7684\u6e90\u7801\u91cc\u770b\u5230\uff0c\u6709\u83b7\u53d6`formatter` \u51fd\u6570\u7684\u8fd4\u56de\u503c\\n\\n![detail](./\u5982\u4f55\u8ba9antd\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f/detail.png)\\n\\n\u641c\u7d22`doFormat` \u51fd\u6570\u7684\u4f7f\u7528\u4f4d\u7f6e\uff0c\u53d1\u73b0\u662f\u5728\u4e0b\u9762\u7684\u51fd\u6570\u4e2d\u90fd\u6709\u4f7f\u7528\\n\\n- `handleInputChange`\\n- `handleInputBlur`\\n- `_setInitValue`\\n- `add`\\n\\n\u4e0b\u9762\u5c31\u770b\u4e0b`handleInputChange` \u51fd\u6570\uff0c\u5176\u4ed6\u7684\u5e94\u8be5\u662f\u540c\u7406\u7684\u3002\u8fd9\u91cc\u5047\u8bbe\\n\\n- \u4f7f\u7528\u4e86`semi-ui` \u5b98\u7f51\u7684`InputNumber` \u4f7f\u7528\u7eaf\u6570\u5b57\u8f93\u5165\u7684\u793a\u4f8b\u4ee3\u7801\\n- \u5f53\u524d\u8f93\u5165\u7684\u5185\u5bb9\u662f`2.`\\n\\n![detail2](./\u5982\u4f55\u8ba9antd\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f/detail2.png)\\n\\n## \u53c2\u8003\\n\\n[Semi-UI\u7684InputNumber](https://semi.design/zh-CN/input/inputnumber)\\n\\n[antd\u7684InputNumber](https://ant.design/components/input-number-cn)"},{"id":"/2023/09/23/nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55","metadata":{"permalink":"/blog/index/2023/09/23/nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55","source":"@site/blog/2023/09/23/nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55.md","title":"nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55","description":"\u4ece\u5f00\u59cb\u4f7f\u7528nvim\u5230\u73b0\u5728\uff0c\u5dee\u4e0d\u591a\u6709\u4e9b\u719f\u7ec3\u4e86\u3002\u8bb0\u5f55\u4e0bnvim\u4e2d\u7684\u63d2\u4ef6\u4f53\u7cfb\uff0c\u9632\u6b62\u540e\u9762\u8fd8\u6709\u5404\u79cd\u5012\u817e\u7684\u65f6\u5019\u5fd8\u8bb0\u4e86","date":"2023-09-23T00:00:00.000Z","formattedDate":"2023\u5e749\u670823\u65e5","tags":[{"label":"nvim","permalink":"/blog/index/tags/nvim"},{"label":"neovim","permalink":"/blog/index/tags/neovim"}],"readingTime":5.31,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55","tags":["nvim","neovim"]},"prevItem":{"title":"\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f","permalink":"/blog/index/2023/09/26/\u5982\u4f55\u8ba9antd\u4e2d\u7684InputNumber\u7ec4\u4ef6\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff1f"},"nextItem":{"title":"\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2","permalink":"/blog/index/2023/09/23/\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2"}},"content":"\u4ece\u5f00\u59cb\u4f7f\u7528nvim\u5230\u73b0\u5728\uff0c\u5dee\u4e0d\u591a\u6709\u4e9b\u719f\u7ec3\u4e86\u3002\u8bb0\u5f55\u4e0bnvim\u4e2d\u7684\u63d2\u4ef6\u4f53\u7cfb\uff0c\u9632\u6b62\u540e\u9762\u8fd8\u6709\u5404\u79cd\u5012\u817e\u7684\u65f6\u5019\u5fd8\u8bb0\u4e86\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u5f00\u5c40\u4e00\u5f20\u56fe\\n\\nimport Markmap from \'./assets/markmap.jsx\'\\n\\n<Markmap />\\n\\n\u5176\u5b9e\u4ece\u56fe\u91cc\uff0c\u5df2\u7ecf\u53ef\u4ee5\u770b\u51fa\u6211\u73b0\u5728\u4f7f\u7528\u7684\u914d\u7f6e\u5206\u7c7b\u3002\u4f46\u662f\u8fd8\u662f\u518d\u5177\u4f53\u63cf\u8ff0\u4e00\u756a\uff0c\u907f\u514d\u54ea\u5929\u8111\u5b50\u62bd\u7b4b\u7ed9\u5fd8\u6389\u4e86\u3002\\n\\n**\u2728\u56fe\u7247\u53ef\u4ee5\u653e\u5927\u3001\u62d6\u62fd**\\n\\n## LSP\\n\\n`LSP`\u5168\u79f0`Language Server Protocol`\uff0c\u5373\u8bed\u8a00\u670d\u52a1\u534f\u8bae\u3002\u5c31\u50cf`http`\u534f\u8bae\u4e00\u6837\uff0c\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u57fa\u4e8e\u6b64\u6536\u53d1\u9001\u6d88\u606f\u3002\\n<Highlight color=\\"orange\\">\u57fa\u4e8e\u6b64\u534f\u8bae\uff0c\u8bed\u8a00\u670d\u52a1\u7aef\u53ef\u4ee5\u63d0\u4f9b\u81ea\u52a8\u8865\u5168\u3001\u5b9a\u4e49\u8df3\u8f6c\u7b49\u529f\u80fd\u7ed9\u5ba2\u6237\u7aef</Highlight>\\n\\n```mermaid\\ngraph TB\\n  http\u534f\u8bae<--\x3e| \u6d88\u606f\u683c\u5f0f |\u670d\u52a1\u7aef;\\n  http\u534f\u8bae<--\x3e| \u6d88\u606f\u683c\u5f0f |\u5ba2\u6237\u7aef;\\n```\\n\\n\u8fd9\u6837\uff0c\u5404\u79cd\u8bed\u8a00\u670d\u52a1\u7aef\uff08c\u3001java\u3001ts\u7b49\uff09\u5c31\u53ef\u4ee5\u901a\u8fc7`LSP`\u63d0\u4f9b\u670d\u52a1\u7ed9`LSP`\u7684\u5ba2\u6237\u7aef\uff0c\u8fd9\u91cc\u5ba2\u6237\u7aef\u5c31\u662fnvim\\n\\n### [nvim-lspconfig](https://github.com/neovim/nvim-lspconfig)\\n\\n\u63d0\u4f9b\u4e86\u4e00\u5957\u5e38\u7528\u7684\u8bed\u8a00\u670d\u52a1\u914d\u7f6e\uff0c\u4f46\u662f\u9700\u8981\u7528\u6237\u624b\u52a8\u542f\u52a8\u8bed\u8a00\u670d\u52a1\uff0c\u4e14\u53ef\u80fd\u6ca1\u6709\u63d0\u4f9b\u7528\u6237\u9700\u8981\u7684\u8bed\u8a00\u670d\u52a1\u3002\\n\\n### [mason](https://github.com/williamboman/mason.nvim)\\n\\n\u63d0\u4f9b\u4e86\u4e00\u5957ui\u548c\u4e00\u4e9b\u7b80\u5355\u547d\u4ee4\u7528\u6765\u5b89\u88c5\u8bed\u8a00\u670d\u52a1\u3002\u957f\u4e0b\u9762\u8fd9\u6837\\n\\n![mason ui](./img/mason.png)\\n\\n### [mason-lspconfig](https://github.com/williamboman/mason-lspconfig.nvim)\\n\\n\u63d0\u4f9b\u7ed9mason\u4e00\u4e9b\u547d\u4ee4\u5b89\u88c5\u8bed\u8a00\u670d\u52a1\u5e76\u81ea\u52a8\u542f\u52a8\u5bf9\u5e94\u7684\u8bed\u8a00\u670d\u52a1\\n\\n### \u4f9d\u8d56\u5173\u7cfb\\n\\n```mermaid\\ngraph LR\\n  \u7528\u6237 --\x3e mason --\x3e mason-lspconfig --\x3e nvim-lspconfig --\x3e \u5404\u79cd\u8bed\u8a00\u670d\u52a1\\n```\\n\\n## \u81ea\u52a8\u8865\u5168\\n\\n\u73b0\u5728\u5199\u4ee3\u7801\u54ea\u91cc\u5c11\u7684\u4e86\u81ea\u52a8\u8865\u5168\u5462\uff1f\u81ea\u52a8\u8865\u5168\u7684\u6837\u5f0f\uff0c\u5927\u6982\u5982\u4e0b\\n\\n![cmp](./img/cmp.png)\\n\\n### [nvim-cmp](https://github.com/hrsh7th/nvim-cmp)\\n\\n\u63d0\u4f9b\u4ee3\u7801\u81ea\u52a8\u8865\u5168\u7684\u529f\u80fd\\n\\n### [cmp-nvim-lsp](https://github.com/hrsh7th/cmp-nvim-lsp)\\n\\n\u4ece\u8bed\u8a00\u670d\u52a1\u4e2d\u83b7\u53d6\u8865\u5168\u6e90\u4f9bnvim-cmp\u4f7f\u7528\\n\\n### [cmp-buffer](https://github.com/hrsh7th/cmp-buffer)\\n\\n\u4ece\u5f53\u524dbuffer\u83b7\u53d6\u8865\u5168\u6e90\u4f9bnvim-cmp\u4f7f\u7528\\n\\n### [cmp-path](https://github.com/hrsh7th/cmp-path)\\n\\n\u4ece\u7cfb\u7edf\u8def\u5f84\u4e2d\u83b7\u53d6\u8865\u5168\u6e90\u4f9bnvim-cmp\u4f7f\u7528\\n\\n### [cmp-cmdline](https://github.com/hrsh7th/cmp-cmdline)\\n\\n\u4ece\u547d\u4ee4\u884c\u4e2d\u83b7\u53d6\u8865\u5168\u6e90\u4f9bnvim-cmp\u4f7f\u7528\\n\\n### [friendly-snippets](https://github.com/rafamadriz/friendly-snippets)\\n\\n\u5e38\u7528\u7684\u4ee3\u7801\u7247\u6bb5\\n\\n### [LuaSnip](https://github.com/L3MON4D3/LuaSnip)\\n\\nlua\u5199\u7684\u4ee3\u7801\u7247\u6bb5\u5f15\u64ce\u3002nvim-cmp\u7684\u6269\u5c55\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4ee3\u7801\u7247\u6bb5\u3002\u5bf9\u5982\u679c\u914d\u7f6e\u7ed3\u6784\u548c`vscode`\u76f8\u4f3c\uff0c\u9700\u8981\u4f9d\u8d56`friendly-snippets`\\n\\n### \u4f9d\u8d56\u5173\u7cfb\\n\\n```mermaid\\ngraph TB\\n\\n  nvim-cmp --\x3e cmp-nvim-lsp --\x3e nvim-lspconfig\\n  nvim-cmp --\x3e cmp-buffer\\n  nvim-cmp --\x3e cmp-path\\n  nvim-cmp --\x3e cmp-cmdline\\n\\n  LuaSnip --\x3e friendly-snippets\\n```\\n\\n## \u8bed\u6cd5\u9ad8\u4eae\\n\\n\u6682\u65f6\u53ea\u7528\u4e86`nvim-treesitter`\\n\\n### [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter)\\n\\n\u652f\u6301\u4ee3\u7801\u7684\u8bed\u6cd5\u9ad8\u4eae\uff0c\u9700\u8981\u4f7f\u7528\u5176\u5185\u7f6e\u547d\u4ee4\u624b\u52a8\u5b89\u88c5\u9700\u8981\u652f\u6301\u8bed\u6cd5\u9ad8\u4eae\u7684\u8bed\u8a00\\n\\n\u652f\u6301\u7684html\u8bed\u6cd5\\n\\n![html](./img/html.png)\\n\\n\u53ef\u5b89\u88c5\u7684\u8bed\u8a00\u4f7f\u7528`:TSInstallInfo` \u67e5\u770b\u3002\u4f7f\u7528`:TSInstall \u5bf9\u5e94\u7684\u8bed\u8a00\u540d\u5b57`\u5373\u53ef\u5b89\u88c5\u5bf9\u5e94\u7684\u8bed\u6cd5\u9ad8\u4eae\u89c4\u5219\\n\\n![tresitter](./img/treesitter.png)\\n\\n## \u7f16\u8f91\u5668\u76f8\u5173\\n\\n\u8fd9\u91cc\u57fa\u672c\u5c31\u662f\u57fa\u672c\u5de5\u4f5c\u73af\u5883\u914d\u7f6e\u4e86\\n\\n### [neo-tree](https://github.com/nvim-neo-tree/neo-tree.nvim)\\n\\n\u6587\u4ef6\u6811\uff0c\u65b9\u4fbf\u67e5\u770b\u5f53\u524d\u5de5\u4f5c\u73af\u5883\u7684\u6587\u4ef6\u76ee\u5f55\\n\\n![neo-tree](./img/neo-tree.png)\\n\\n### [telescope](https://github.com/nvim-telescope/telescope.nvim)\\n\\n\u6587\u4ef6\u641c\u7d22\\n\\n![telescope](./img/telescope.png)\\n\\n### [flash](https://github.com/folke/flash.nvim)\\n\\n\u4ee3\u7801\u5b57\u7b26\u95f4\u8df3\u8f6c\uff0c\u5b9e\u73b0\u4ee3\u7801\u4f4d\u7f6e\u7684\u5feb\u901f\u8df3\u8f6c\u529f\u80fd\u3002\u5373\uff0c\u5feb\u901f\u5c06\u5149\u6807\u8df3\u8f6c\u5230\u5bf9\u5e94\u7684\u4f4d\u7f6e\\n\\n### [which-key](https://github.com/folke/which-key.nvim)\\n\\n\u5feb\u6377\u952e\u63d0\u793a\\n\\n![which-key](./img/which-key.png)\\n\\n### [todo-comments](https://github.com/folke/todo-comments.nvim)\\n\\ntodo\u9ad8\u4eae\\n\\n### [bufferline](https://github.com/akinsho/bufferline.nvim)\\n\\n\u591a\u6587\u4ef6tab\u9875\\n\\n![bufferline](./img/bufferline.png)\\n\\n### [mini.bufremove](https://github.com/echasnovski/mini.bufremove)\\n\\n\u63d0\u4f9b\u4e00\u4e9bbuffer\u589e\u5220\u7684\u5feb\u6377\u5904\u7406\\n\\n### [lualine](https://github.com/nvim-lualine/lualine.nvim)\\n\\n\u72b6\u6001\u680f\\n\\n![lualine](./img/lualine.png)\\n\\n### [trouble](https://github.com/folke/trouble.nvim)\\n\\n\u4ee3\u7801\u8bca\u65ad\\n\\n![trouble](./img/trouble.png)\\n\\n## UI\u4f18\u5316\\n\\n\u8fd9\u91cc\u5c31\u662f\u4e00\u4e9bui\u7f8e\u5316\u4e86\\n\\n### [nvim-notify](https://github.com/rcarriga/nvim-notify)\\n\\n\u5c06\u63d0\u793a\u4fe1\u606f\u4ee5\u5f39\u7a97\u7684\u5f62\u5f0f\u663e\u793a\u5728\u53f3\u4e0a\u89d2\\n\\n![notify](./img/notify.png)\\n\\n### [dressing](https://github.com/stevearc/dressing.nvim)\\n\\n\u4f18\u5316\u9009\u62e9\u6846\u548c\u8f93\u5165\u6846\u7684\u663e\u793a\\n\\n### [indent-blackline](https://github.com/lukas-reineke/indent-blankline.nvim)\\n\\n\u7f29\u8fdb\u7ebf\\n\\n![indent](./img/indent.png)\\n\\n### [noice](https://github.com/folke/noice.nvim)\\n\\n\u6574\u5408\u7248nvim-notify\\n\\n### [alpha](https://github.com/goolord/alpha-nvim)\\n\\nnvim\u542f\u52a8\u9875\\n\\n![alpha](./img/alpha.png)\\n\\n### [nui](https://github.com/MunifTanjim/nui.nvim)\\n\\n\u88ab\u8bb8\u591a\u5176\u4ed6\u63d2\u4ef6\u4f9d\u8d56\uff0c\u662f\u4e00\u4e2aui\u7ec4\u4ef6\u5e93\\n\\n### [nvim-web-devicons](https://github.com/nvim-tree/nvim-web-devicons)\\n\\n\u56fe\u6807\u5e93\\n\\n## git\u76f8\u5173\\n\\n### [gitsigns](https://github.com/lewis6991/gitsigns.nvim)\\n\\n\u6807\u8bc6\u5f53\u524dbuffer\u4e2d\u54ea\u4e9b\u884c\u6709\u589e/\u5220/\u6539\uff0c\u53ef\u914d\u7f6e\u5f53\u524d\u884c\u7684blame\u7684\u865a\u62df\u6587\u672c\u663e\u793a\\n\\n### [diffview](https://github.com/sindrets/diffview.nvim)\\n\\n\u65b9\u4fbf\u5904\u7406git\u51b2\u7a81\\n\\n![diffview](./img/diffview.png)\\n\\n### utils\\n\\n### [plenary](https://github.com/nvim-lua/plenary.nvim)\\n\\nlua\u51fd\u6570\u5de5\u5177\u5305\\n\\n## \u603b\u7ed3\\n\\n\u4ece\u5f00\u59cb\u5012\u817envim\u5230\u73b0\u5728\uff0c\u6211\u5b66\u4f1a\u4e86\u9047\u7740\u95ee\u9898\u94bb\u8fdbgithub\u7684issue\u53bb\u770b\u7684\u95ee\u9898\u5904\u7406\u65b9\u5f0f\uff0c\u53d7\u76ca\u9887\u6df1\u3002\u5728issue\u91cc\u300c\u524d\u4eba\u683d\u6811\uff0c\u540e\u4eba\u4e58\u51c9\u300d\u7684\u601d\u60f3\u4f53\u73b0\u7684\u6dcb\u6f13\u5c3d\u81f4\u3002\\n\u6839\u636e\u4e0a\u9762\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5904\u7406\u6389\u81ea\u5df1\u7684\u95ee\u9898\u4e4b\u540e\uff0c\u5185\u5fc3\u300c\u54c7\u300d\u58f0\u4e00\u7247\uff0c\u8fd9\u4e0d\u5f97\u4e13\u95e8\u8dd1\u56de\u53bb\u70b9\u4e2a\u8d5e\uff01\\n\\n\u5f53\u7136\uff0c\u8fd9\u5176\u4e2d\u4e0d\u505c\u7684\u53bb\u89e3\u51b3\u9047\u5230\u7684\u95ee\u9898\uff0c\u4e5f\u662f\u4e00\u79cd\u75db\u5e76\u5feb\u4e50\u7740\u7684\u8fc7\u7a0b\u3002\\n\\n\u6709\u95ee\u9898\u624d\u6709\u6210\u957f\uff0c\u7ee7\u7eed\u52a0\u6cb9\u54e6\ud83e\udd13\\n\\n## \u53c2\u8003\\n\\n[LazyVim](https://www.lazyvim.org/)\\n\\n[Neovim Language Server Protocol \u914d\u7f6e\u89e3\u91ca](https://blog.otakusaikou.com/2023/07/05/neovim-language-server-config-explanation/)\\n\\n[\u8be6\u89e3nvim\u5185\u5efaLSP\u4f53\u7cfb\u4e0e\u57fa\u4e8envim-cmp\u7684\u4ee3\u7801\u8865\u5168\u4f53\u7cfb](https://zhuanlan.zhihu.com/p/643033884)"},{"id":"/2023/09/23/\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2","metadata":{"permalink":"/blog/index/2023/09/23/\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2","source":"@site/blog/2023/09/23/\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2.md","title":"\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2","description":"\u4e00\u5f00\u59cb\u662f\u7528\u7684hexo\u6784\u5efa\u7684\u535a\u5ba2\uff0c\u4f46\u662f\u4f7f\u7528\u8d77\u6765\u8fd8\u662f\u6709\u4e9b\u9ebb\u70e6\u7684\u3002\u6bd4\u5982\u6bcf\u7bc7\u6587\u7ae0\u7684\u56fe\u7247\u90fd\u8981\u653e\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\u624d\u80fd\u751f\u6548\u2026\u2026\uff1b\u6837\u5f0f\u5b9a\u4e49\u7565\u663e\u9ebb\u70e6\uff0c\u53ea\u80fd\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc\u4f7f\u7528css\u8fdb\u884c\u8986\u76d6\uff0c\u7b49\u7b49\uff0c\u90fd\u8ba9\u6211\u89c9\u5f97\uff0chexo\u7528\u8d77\u6765\u4e0d\u662f\u90a3\u4e48\u7684\u65b9\u4fbf\u3002","date":"2023-09-23T00:00:00.000Z","formattedDate":"2023\u5e749\u670823\u65e5","tags":[{"label":"Docusaurus","permalink":"/blog/index/tags/docusaurus"}],"readingTime":6.165,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2","tags":["Docusaurus"]},"prevItem":{"title":"nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55","permalink":"/blog/index/2023/09/23/nvim\u63d2\u4ef6\u4f53\u7cfb\u8bb0\u5f55"},"nextItem":{"title":"LuaSnip\u4f7f\u7528","permalink":"/blog/index/2023/09/16/LuaSnip\u4f7f\u7528"}},"content":"import Tabs from \'@theme/Tabs\';\\nimport TabItem from \'@theme/TabItem\';\\n\\n\u4e00\u5f00\u59cb\u662f\u7528\u7684`hexo`\u6784\u5efa\u7684\u535a\u5ba2\uff0c\u4f46\u662f\u4f7f\u7528\u8d77\u6765\u8fd8\u662f\u6709\u4e9b\u9ebb\u70e6\u7684\u3002\u6bd4\u5982\u6bcf\u7bc7\u6587\u7ae0\u7684\u56fe\u7247\u90fd\u8981\u653e\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\u624d\u80fd\u751f\u6548\u2026\u2026\uff1b\u6837\u5f0f\u5b9a\u4e49\u7565\u663e\u9ebb\u70e6\uff0c\u53ea\u80fd\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc\u4f7f\u7528css\u8fdb\u884c\u8986\u76d6\uff0c\u7b49\u7b49\uff0c\u90fd\u8ba9\u6211\u89c9\u5f97\uff0c`hexo`\u7528\u8d77\u6765\u4e0d\u662f\u90a3\u4e48\u7684\u65b9\u4fbf\u3002\\n\\n\u5728\u505a`nvim`\u7684\u914d\u7f6e\u7684\u65f6\u5019\uff0c\u89c9\u5f97`LazyVim`\u7684\u5b98\u7f51\u633a\u597d\u770b\u7684\uff0c\u770b\u5230\u4e86\u5176\u9875\u811a\u7684`Built with Docusaurus`\uff0c\u5c31\u5f00\u59cb\u5bf9`Docusaurus`\u4e00\u53d1\u4e0d\u53ef\u6536\u62fe\u4e86\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u4e3a\u4ec0\u4e48\u4f7f\u7528Docusaurus\\n\\n1. \u597d\u770b\\n2. \u56fe\u7247\u53ef\u4ee5\u548c\u6587\u7ae0\u653e\u5728\u6bd4\u8f83\u8fd1\u7684\u4f4d\u7f6e\\n3. \u9664\u4e86\u5927\u6846\u67b6\uff0c\u5176\u4ed6\u5185\u5bb9\u53ef\u5145\u5206\u81ea\u5b9a\u4e49\\n4. \u57fa\u4e8e`react`\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u53ca\u5176\u6837\u5f0f\\n5. \u914d\u7f6e\u76f8\u5bf9\u7b80\u5355\\n6. \u2026\u2026\\n\\n\u8fd9\u4e48\u597d\u7528\u4e3a\u4ec0\u4e48\u8fd8\u4e0d\u7528\uff1f\\n\\n## \u5b89\u88c5\\n\\n\u5b98\u7f51\u63cf\u8ff0\u7684\u5df2\u7ecf\u5f88\u6e05\u695a\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5197\u4f59\u4e86\u3002\\n\\n## \u914d\u7f6e\\n\\n\u8fd9\u91cc\u662f\u5173\u952e\u3002\u867d\u7136\u5b98\u7f51\u7ed9\u7684\u914d\u7f6e\u6559\u7a0b\u5df2\u7ecf\u5f88\u6e05\u695a\u4e86\uff0c\u4f46\u662f\u96be\u514d\u6709\u4e9b\u5c0f\u7ec6\u8282\u88ab\u5ffd\u7565\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u6bd4\u8f83\u91cd\u8981\u7684\u5185\u5bb9\u3002\\n\\n### \u76ee\u5f55\u6811\\n\\n```txt\\nblog\\n\u251c\u2500\u2500 blog\\n\u251c\u2500\u2500 build\\n\u251c\u2500\u2500 node_modules\\n\u251c\u2500\u2500 src\\n\u251c\u2500\u2500 static\\n\u251c\u2500\u2500 .env\\n\u251c\u2500\u2500 .gitignore\\n\u251c\u2500\u2500 README.md\\n\u251c\u2500\u2500 babel.config.js\\n\u251c\u2500\u2500 docusaurus.config.js\\n\u251c\u2500\u2500 package.json\\n\u251c\u2500\u2500 pnpm-lock.yaml\\n\u2514\u2500\u2500 sidebars.js\\n```\\n\\n### \u5177\u4f53\u914d\u7f6e\\n\\n<Tabs lazy defaultvalue=\\"docusaurus.config.js\\">\\n  <TabItem value=\\".env\\">\\n  \u8fd9\u91cc\u4f7f\u7528\u4e86<Highlight color=\\"orange\\">dotenv</Highlight> \u3002\u5728\u90e8\u7f72\u7684\u65f6\u5019\uff0c\u5c06\u300c.env\u300d\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u4e86\u300cprocess.env\u300d\u4e2d\u3002\u300cprocess.env\u300d\u4e2d\u7684\u5185\u5bb9\u4f18\u5148\u7ea7\u9ad8\u4e8e\u300cdocusaurus.config.js\u300d\\n\\n```yml\\n# github \u7528\u6237\u540d\\nORGANIZATION_NAME=xpzero\\n\\n# \u535a\u5ba2\u6e90\u7801\u5e93\u6240\u4f7f\u7528\u7684\u5206\u652f\\nCURRENT_BRANCH=main\\n\\n# \u535a\u5ba2\u9759\u6001\u9875\u9762\u90e8\u7f72\u5e93\u7684\u5e93\u540d\\nPROJECT_NAME=blog\\n\\n# \u535a\u5ba2\u9759\u6001\u9875\u9762\u90e8\u7f72\u5e93\u6240\u7528\u7684\u5206\u652f\\nDEPLOYMENT_BRANCH=main\\n\\n# github \u7528\u6237\u540d workflow\u4e2d\u4f1a\u7528\\nGIT_USER=xpzero\\n# workflow\u4e2d\u4f1a\u7528\uff0c\u5bc6\u7801\u8981\u7528personal key\\n# GIT_PASS=\\n\\n# \u5c06\u9759\u6001\u9875\u9762\u63a8\u9001\u5230\u90e8\u7f72\u5e93\u65f6\u7684commit\u4fe1\u606f\\nCUSTOM_COMMIT_MESSAGE=publish post\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"package.json\\">\\n\\n:::tip\\nGithub\u7684workflow\u597d\u50cf\u4f1a\u81ea\u52a8\u5b89\u88c5`dotenv`\uff0c\u5177\u4f53\u539f\u56e0\u672a\u77e5\u3002\\n:::\\n\\n```json\\n{\\n  \\"scripts\\": {\\n    \\"deploy\\": \\"dotenv docusaurus deploy\\"\\n  }\\n}\\n```\\n\\n  </TabItem>\\n\\n  <TabItem value=\\"docusaurus.config.js\\">\\n\\n```js\\nconst config = {\\n  title: \\"What are you thinking about?\\",\\n  tagline: \\"\u79cd\u4e00\u68f5\ud83c\udf32\u6700\u597d\u7684\u65f6\u95f4\u662f\u5341\u5e74\u524d\uff0c\u5176\u6b21\u662f\u73b0\u5728\\",\\n  favicon: \\"img/favicon.ico\\",\\n  url: \\"https://xpzero.github.io\\", // \u7f51\u7ad9\u57df\u540d\\n  baseUrl: \\"/blog/\\", // \u7ad9\u70b9\u6839\u8def\u5f84\\n  presets: [\\n    [\\n      \\"classic\\",\\n      {\\n        docs: false, // \u4e0d\u8981docs\\n        blog: {\\n          // \u535a\u5ba2\u5217\u8868\u8def\u5f84(\u662f\u76f8\u5bf9\u4e8e\u7ad9\u70b9\u6839\u8def\u5f84\u7684\u8def\u5f84)\\n          routeBasePath: \\"/index\\",\\n          // \u663e\u793a\u6587\u7ae0\u8bfb\u5b8c\u7684\u8017\u65f6\\n          showReadingTime: true,\\n          // Please change this to your repo.\\n          // Remove this to remove the \\"edit this page\\" links.\\n          // editUrl:\\n          //   \'https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/\',\\n          blogTitle: \\"Kehan\'s Blog\\",\\n        },\\n      },\\n    ],\\n  ],\\n  themeConfig: {\\n    navbar: {},\\n    footer: {},\\n    prism: {\\n      theme: lightCodeTheme,\\n      darkTheme: darkCodeTheme,\\n      // \u4f7f\u7528\u6ce8\u91ca\u7684\u5f62\u5f0f\u6307\u5b9a\u4ee3\u7801\u4e2d\u9ad8\u4eae\u884c\u3002\u6a21\u62dfgit diff\u6548\u679c, \u9700\u8981\u5728src/css/custom.css\u4e2d\u81ea\u5b9a\u4e49\u6837\u5f0f\\n      magicComments: [\\n        // Remember to extend the default highlight class name as well!\\n        {\\n          className: \\"theme-code-block-highlighted-line\\",\\n          line: \\"highlight-next-line\\",\\n          block: { start: \\"highlight-start\\", end: \\"highlight-end\\" },\\n        },\\n        {\\n          className: \\"theme-code-block-highlighted-line-add\\",\\n          line: \\"add-highlight-line\\",\\n        },\\n        {\\n          className: \\"theme-code-block-highlighted-line-remove\\",\\n          line: \\"remove-highlight-line\\",\\n        },\\n      ],\\n    },\\n  },\\n  markdown: {\\n    // \u542f\u7528markdwon\u7684\u6d41\u7a0b\u56fe\u3002\u9700\u8981\u5b89\u88c5@docusaurus/theme-mermaid\\n    mermaid: true,\\n  },\\n  // \u6d41\u7a0b\u56fe\u4e3b\u9898\\n  themes: [\\"@docusaurus/theme-mermaid\\"],\\n};\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\\"custom.css\\">\\n\\n```css title=\\"\u6a21\u62dfgit diff\u6548\u679c\u7684\u81ea\u5b9a\u4e49\u6837\u5f0f\\"\\n.theme-code-block-highlighted-line-add {\\n  background-color: #e6ffec;\\n  display: block;\\n  width: 100%;\\n}\\n\\n.theme-code-block-highlighted-line-add .token.plain::before {\\n  content: \\"+\\";\\n  background-color: inherit;\\n  padding-left: 8px;\\n  margin-right: -16px;\\n}\\n\\n.theme-code-block-highlighted-line-remove {\\n  background-color: #ffebe9;\\n  display: block;\\n  width: 100%;\\n}\\n\\n.theme-code-block-highlighted-line-remove .token.plain::before {\\n  content: \\"-\\";\\n  background-color: inherit;\\n  padding-left: 8px;\\n  margin-right: -16px;\\n}\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\\"workflow.yml\\">\\n\\n```yml\\n# Sample workflow for building and deploying a Hugo site to GitHub Pages\\nname: Deploy site to Pages\\n\\non:\\n  # Runs on pushes targeting the default branch\\n  push:\\n    branches: [\\"main\\"]\\n\\n  # Allows you to run this workflow manually from the Actions tab\\n  # workflow_dispatch:\\n\\njobs:\\n  # Build job\\n  build:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: checkout\\n        uses: actions/checkout@v3\\n      - name: setup pnpm\\n        uses: pnpm/action-setup@v2\\n        with:\\n          version: 8\\n      - name: setup node\\n        uses: actions/setup-node@v3\\n        with:\\n          node-version: 18\\n          cache: \\"pnpm\\"\\n      - name: Install dependencies\\n        run: pnpm install\\n      - name: Test build website\\n        run: pnpm run clear && pnpm run build\\n  # deploy job\\n  deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v3\\n      - name: setup pnpm\\n        uses: pnpm/action-setup@v2\\n        with:\\n          version: 8\\n      - name: setup node\\n        uses: actions/setup-node@v3\\n        with:\\n          node-version: 18\\n          cache: \\"pnpm\\"\\n      - name: push to Github Pages repository\\n        # echo \\"<domain>\\" > CNAME if using custom domain at first.\\n        # \u4e0b\u9762\u7684\\"your xxx\\"\u9700\u8981\u66ff\u6362\u6210\u81ea\u5df1\u7684\u4fe1\u606f\uff0c\u4e14\u628a{} \u53bb\u6389\\n        run: |\\n          echo \\"GIT_PASS=${{secrets.{your personal key variable}}\\" >> .env\\n          git config --global user.email \\"{ your email }\\"\\n          git config --global user.name \\"{ your name }\\"\\n          pnpm i\\n          pnpm run deploy\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n## \u901a\u7528\u7ec4\u4ef6\\n\\n\u53ef\u4ee5\u5728`src/components`\u4e2d\u5199\u901a\u7528\u7ec4\u4ef6\u3002\u53c8\u5206\u4e3a\u5168\u5c40\u53ef\u7528\u7684\u7ec4\u4ef6\u548c\u5c40\u90e8\u5f15\u5165\u7684\u7ec4\u4ef6\\n\\n### \u5168\u5c40\u4f7f\u7528\\n\\n\u5168\u5c40\u7ec4\u4ef6\u5373\u4e3a\uff0c\u4e0d\u9700\u8981\u624b\u52a8\u5f15\u5165\u5373\u53ef\u4f7f\u7528\u7684\u7ec4\u4ef6\uff0c\u5c31\u597d\u50cf\u662f\u5185\u7f6e\u7ec4\u4ef6\u4e00\u6837\u3002\\n\\n\u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a\\n\\n- \u6dfb\u52a0src/theme/MDXComponents.js\u6587\u4ef6\\n- \u5c06src/components/\u4e2d\u7684\u67d0\u4e2a\u7ec4\u4ef6\u901a\u8fc7`MDXComponents`\u6587\u4ef6\u5bfc\u51fa\\n\\n#### demo\\n\\n\u5c06\u5b98\u7f51\u7684\u9ad8\u4eae\u7ec4\u4ef6\u8bbe\u4e3a\u5168\u5c40\u4f7f\u7528\\n\\n<Tabs defaultvalue=\\"MDXComponents\\">\\n  <TabItem value=\\"MDXComponents\\">\\n\\n```js\\nimport React from \\"react\\";\\nimport MDXComponents from \\"@theme-original/MDXComponents\\";\\nimport Highlight from \\"@site/src/components/Highlight\\";\\n\\nexport default {\\n  ...MDXComponents,\\n  Highlight: Highlight,\\n};\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"Highlight\\">\\n\\n```tsx\\nimport React from \\"react\\";\\n\\nfunction Highlight({ children, color }) {\\n  return (\\n    <span\\n      style={{\\n        backgroundColor: color,\\n        borderRadius: \\"2px\\",\\n        color: \\"#fff\\",\\n        padding: \\"0.2rem\\",\\n      }}\\n    >\\n      {children}\\n    </span>\\n  );\\n}\\n\\nexport default Highlight;\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"test.md\\">\\n\\n```mdx live\\n---\\ntitle: \u6d4b\u8bd5\u5168\u5c40\u9ad8\u4eae\u7ec4\u4ef6\\n---\\n\\n<Highlight color=\\"orange\\">\u6d4b\u8bd5\u4e00\u4e0b</Highlight>\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n### \u5c40\u90e8\u5f15\u5165\\n\\n\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ea\u9700\u8981\u5728`src/components`\u4e2d\u5199\u597d\u7ec4\u4ef6\uff0c\u7136\u540e\u5728`markdown`\u6587\u4ef6\u4e2d\u5f15\u5165\u5373\u53ef\\n\\n```mdx\\n---\\ntitle: \u6d4b\u8bd5\u7ec4\u4ef6\u5c40\u90e8\u5f15\u5165\\n---\\n\\nimport Count from \\"@site/src/components/Count.jsx\\";\\n\\n<Coun\\n```"},{"id":"/2023/09/16/LuaSnip\u4f7f\u7528","metadata":{"permalink":"/blog/index/2023/09/16/LuaSnip\u4f7f\u7528","source":"@site/blog/2023/09/16/LuaSnip\u4f7f\u7528.md","title":"LuaSnip\u4f7f\u7528","description":"\u4e4b\u524d\u4e00\u76f4\u5728\u7f51\u4e0a\u641c\u6765\u641c\u53bb\uff0c\u627e\u4e0d\u5230\u5982\u4f55\u5728neovim\u4e0a\u914d\u7f6e\u81ea\u5df1\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u7ec8\u4e8e\u7687\u5929\u4e0d\u8d1f\u6709\u5fc3\u4eba\uff0c\u627e\u5230\u4e86\u6b63\u786e\u7684\u914d\u7f6e\u65b9\u5f0f\u3002\u5176\u5b9egithub\u4e0a\u7684\u5b98\u65b9\u6587\u6863\u5df2\u7ecf\u5f88\u6e05\u695a\u4e86\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u82f1\u6587\u4e0d\u597d\uff0c\u6240\u4ee5\u4e00\u76f4\u6ca1\u6709\u770b\u51fa\u6765\u3002\u7279\u6b64\u8bb0\u5f55\u4e0b\u6765\uff0c\u4fbf\u4e8e\u540e\u7528\u3002","date":"2023-09-16T00:00:00.000Z","formattedDate":"2023\u5e749\u670816\u65e5","tags":[{"label":"nvim","permalink":"/blog/index/tags/nvim"},{"label":"neovim","permalink":"/blog/index/tags/neovim"}],"readingTime":3.205,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"LuaSnip\u4f7f\u7528","tags":["nvim","neovim"]},"prevItem":{"title":"\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2","permalink":"/blog/index/2023/09/23/\u4f7f\u7528Docusaurus\u6784\u5efa\u535a\u5ba2"},"nextItem":{"title":"whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528","permalink":"/blog/index/2023/09/09/whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528"}},"content":"\u4e4b\u524d\u4e00\u76f4\u5728\u7f51\u4e0a\u641c\u6765\u641c\u53bb\uff0c\u627e\u4e0d\u5230\u5982\u4f55\u5728neovim\u4e0a\u914d\u7f6e\u81ea\u5df1\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u7ec8\u4e8e\u7687\u5929\u4e0d\u8d1f\u6709\u5fc3\u4eba\uff0c\u627e\u5230\u4e86\u6b63\u786e\u7684\u914d\u7f6e\u65b9\u5f0f\u3002\u5176\u5b9egithub\u4e0a\u7684\u5b98\u65b9\u6587\u6863\u5df2\u7ecf\u5f88\u6e05\u695a\u4e86\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u82f1\u6587\u4e0d\u597d\uff0c\u6240\u4ee5\u4e00\u76f4\u6ca1\u6709\u770b\u51fa\u6765\u3002\u7279\u6b64\u8bb0\u5f55\u4e0b\u6765\uff0c\u4fbf\u4e8e\u540e\u7528\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n:::tip\\n\u8fd9\u91cc\u7528\u7684`lazy.nvim`\u63d2\u4ef6\u7ba1\u7406\u5668\u3002\u8be6\u7ec6\u4fe1\u606f\u53ef\u67e5\u770b[lazy.nvim \u7684GitHub](https://github.com/folke/lazy.nvim)\\n:::\\n\\n## \u6587\u4ef6\u76ee\u5f55\\n\\n\u5148\u8d34\u4e00\u4e0b\u6587\u4ef6\u76ee\u5f55\uff0c\u65b9\u4fbf\u540e\u7eed\u67e5\u770b\\n\\n```txt\\n~/.config/nvim/\\n\u251c\u2500\u2500 lua\\n\u2502\xa0\xa0 \u2514\u2500\u2500 snippets\\n\u2502\xa0\xa0     \u251c\u2500\u2500 lua\\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 markdown.lua\\n\u2502\xa0\xa0     \u2514\u2500\u2500 vscode\\n\u2502\xa0\xa0         \u251c\u2500\u2500 console.json\\n\u2502\xa0\xa0         \u2514\u2500\u2500 package.json\\n```\\n\\n## VS Code-like \u4ee3\u7801\u7247\u6bb5\u914d\u7f6e\\n\\n:::tip\\n\u6b65\u9aa4\u5982\u4e0b\uff1a\\n\\n1. \u7f16\u5199VS Code-like \u7684\u4ee3\u7801\u7247\u6bb5\\n2. \u914d\u7f6e\u4ee3\u7801\u7247\u6bb5\u6240\u652f\u6301\u7684\u8bed\u8a00\\n3. \u52a0\u8f7d\u4ee3\u7801\u7247\u6bb5\\n\\n\u6ce8\u610f\uff1a\u4ee3\u7801\u7247\u6bb5\u6240\u5728\u7684\u76ee\u5f55\u4e00\u5b9a\u8981\u6709`package.json`\u6587\u4ef6\uff0c\u7528\u6765\u6307\u5b9a\u4ee3\u7801\u7247\u6bb5\u6587\u4ef6\u7684\u8def\u5f84\u53ca\u652f\u6301\u7684\u8bed\u8a00\\n\\n:::\\n<Tabs defaultValue=\\"load snippets\\">\\n\\n<TabItem value=\\"load snippets\\">\\n\\n```lua showLineNumbers\\nreturn {\\n    \\"L3MON4D3/LuaSnip\\",\\n    dependencies = {\\n      \\"rafamadriz/friendly-snippets\\",\\n    },\\n    config = function()\\n      -- load friendly-snippets\\n      require(\\"luasnip.loaders.from_vscode\\").lazy_load()\\n      -- load VS Code-like snippets.\\n      // add-highlight-line\\n      require(\\"luasnip.loaders.from_vscode\\").lazy_load({ paths = { \\"./lua/snippets/vscode\\" } })\\n    end,\\n  }\\n```\\n\\n</TabItem>\\n\\n  <TabItem value=\\"snippets/package.json\\">\\n\\n\u8fd9\u91cc\u6307\u5b9a\u4e86`console.json`\u6587\u4ef6\u4e2d\u5199\u7684\u4ee3\u7801\u7247\u6bb5\u652f\u6301\u6240\u6709\u8bed\u8a00\u3002\\n\\n```json\\n{\\n  \\"contributes\\": {\\n    \\"snippets\\": [\\n      {\\n        \\"language\\": [\\"all\\"],\\n        \\"path\\": \\"./console.json\\"\\n      }\\n    ]\\n  }\\n}\\n```\\n\\n</TabItem>\\n\\n  <TabItem value=\\"snippets/console.json\\">\\n    \\n\u8fd9\u91cc\u6bd4\u8f83\u7b80\u5355\uff0c\u56e0\u4e3a\u5e73\u65f6\u4f1a\u5199\u4e00\u4e9b`console.log`\uff0c\u6240\u4ee5\u8fd9\u91cc\u914d\u7f6e\u4e86\u6bd4\u8f83\u5bb9\u6613\u8bc6\u522b\u662f\u81ea\u5df1\u5199\u7684log\u7684\u6807\u5fd7\\n\\n```json\\n{\\n  \\"print log\\": {\\n    \\"prefix\\": \\"cld\\",\\n    \\"body\\": [\\"console.log(\'dev: $1\', $2);\\"],\\n    \\"description\\": \\"console with dev keyword\\"\\n  }\\n}\\n```\\n\\n\u8fd9\u6837\uff0c\u6bcf\u6b21\u8f93\u5165`cld`\u5e76\u9009\u4e2d\u540e\uff0c\u5c31\u81ea\u52a8\u628a`console.log(\'dev: $1\', $2)`\u63d2\u5165\u5149\u6807\u6240\u5728\u7684\u4f4d\u7f6e\u3002\\n\\n- `$1`\u8868\u793a\u63d2\u5165\u4ee3\u7801\u7247\u6bb5\u540e\uff0c\u5149\u6807\u6240\u5728\u7684\u4f4d\u7f6e\u3002\\n- `$2`\u8868\u793a\u5728`$1`\u4f4d\u7f6e\u8f93\u5165\u81ea\u5df1\u60f3\u8981\u7684\u5185\u5bb9\u540e\uff0c\u518d\u6309`Tab`\u952e\u4e4b\u540e\u5149\u6807\u4f1a\u5728\u7684\u4f4d\u7f6e\\n\\n\u7b80\u5355\u7406\u89e3\u5c31\u662f`$1`\u662f\u5149\u6807\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\uff0c`$2`\u662f\u5149\u6807\u7684\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u3002\\n\\n  </TabItem>\\n\\n</Tabs>\\n\\n## Lua\u5199\u7684\u4ee3\u7801\u7247\u6bb5\u914d\u7f6e\\n\\n\u8fd9\u4e2a\u53ea\u9700\u8981\u5c06\u4ee3\u7801\u7247\u6bb5\u5bf9\u5e94\u7684`lua`\u6587\u4ef6\u5728`LuaSnip`\u52a0\u8f7d\u7684\u65f6\u5019\u5f15\u5165\u5373\u53ef\u3002\\n\\n<Tabs defaultValue=\\"load\\">\\n  <TabItem value=\\"load\\">\\n\\n```lua\\nreturn {\\n    \\"L3MON4D3/LuaSnip\\",\\n    dependencies = {\\n      \\"rafamadriz/friendly-snippets\\",\\n    },\\n    config = function()\\n      -- load friendly-snippets\\n      require(\\"luasnip.loaders.from_vscode\\").lazy_load()\\n      -- load VS Code-like snippets.\\n      require(\\"luasnip.loaders.from_vscode\\").lazy_load({ paths = { \\"./lua/snippets/vscode\\" } })\\n      -- load lua snippets\\n      // add-highlight-line\\n      require(\\"luasnip.loaders.from_lua\\").lazy_load({ paths = \\"./lua/snippets/lua\\" })\\n    end,\\n  },\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"lua snippets\\">\\n\\n```lua\\nlocal ls = require(\\"luasnip\\")\\n-- format\\nlocal fmt = require(\\"luasnip.extras.fmt\\").fmt\\nls.add_snippets(\\"markdown\\", {\\n  ls.snippet(\\n    -- trigger with \\"tt\\"\\n    \\"tt\\",\\n    fmt(\\n      [[\\n    ---\\n    title: {xxx}\\n    ---\\n    ]],\\n      {\\n        xxx = ls.function_node(function()\\n          -- :t get trailing string with extension.\\n          -- :r get the string without extension.\\n          -- return vim.fn.fnamemodify(vim.fn.bufname(), \\":t:r\\")\\n          -- or below. source: https://neovim.io/doc/user/builtin.html#expand()\\n          return vim.fn.expand(\\"%:t:r\\")\\n        end),\\n      }\\n    )\\n  ),\\n})\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n## \u53c2\u8003\\n\\n[LuaSnip\u914d\u7f6e\u539f\u7406](https://discord.com/channels/1107070766681444433/1107164897982300192/1136693073334784133)\\n\\n[Lua snippets\'s demo](https://github.com/L3MON4D3/LuaSnip/blob/master/Examples/snippets.lua#L190)"},{"id":"/2023/09/09/whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528","metadata":{"permalink":"/blog/index/2023/09/09/whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528","source":"@site/blog/2023/09/09/whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528.md","title":"whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528","description":"\u5e73\u65f6\u5de5\u4f5c\u4e2d\u4f1a\u7528\u5230\u57fa\u4e8ewhistle\u7684light proxy\u8f6f\u4ef6\uff0c\u4f46\u662f\u65f6\u4e0d\u65f6\u4f1a\u62bd\u98ce\uff0c\u5bfc\u81f4\u7f51\u7edc\u65ad\u8054\u3002\u8003\u8651\u5230\u4e4b\u524d\u4e5f\u76f4\u63a5\u4f7f\u7528\u8fc7whistle\uff0c\u505a\u4e00\u4e2awhistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528\u8bb0\u5f55\uff0c\u4ee5\u5907\u540e\u7528\u3002","date":"2023-09-09T00:00:00.000Z","formattedDate":"2023\u5e749\u67089\u65e5","tags":[{"label":"whistle","permalink":"/blog/index/tags/whistle"}],"readingTime":3.53,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528","tags":["whistle"]},"prevItem":{"title":"LuaSnip\u4f7f\u7528","permalink":"/blog/index/2023/09/16/LuaSnip\u4f7f\u7528"},"nextItem":{"title":"\u914d\u7f6edotfiles\u8bb0\u5f55","permalink":"/blog/index/2023/09/09/\u914d\u7f6edotfiles\u8bb0\u5f55"}},"content":"\u5e73\u65f6\u5de5\u4f5c\u4e2d\u4f1a\u7528\u5230\u57fa\u4e8e`whistle`\u7684`light proxy`\u8f6f\u4ef6\uff0c\u4f46\u662f\u65f6\u4e0d\u65f6\u4f1a\u62bd\u98ce\uff0c\u5bfc\u81f4\u7f51\u7edc\u65ad\u8054\u3002\u8003\u8651\u5230\u4e4b\u524d\u4e5f\u76f4\u63a5\u4f7f\u7528\u8fc7`whistle`\uff0c\u505a\u4e00\u4e2a`whistle`\u7684\u5b89\u88c5\u53ca\u4f7f\u7528\u8bb0\u5f55\uff0c\u4ee5\u5907\u540e\u7528\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u5b89\u88c5\u5e76\u542f\u52a8`whistle`\\n\\n\u8fd9\u91cc\u4f7f\u7528`brew`\u5b89\u88c5\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528`Node`\u5168\u5c40\u5b89\u88c5\u3002`brew`\u4e0d\u5728\u672c\u6587\u4ecb\u7ecd\u5185\uff0c\u53ef\u81ea\u884c\u4e86\u89e3\u3002\\n\\n```sh\\n# \u5b89\u88c5whistle\\nbrew install whistle\\n# \u542f\u52a8whistle\\nw2 start\\n\\n# \u91cd\u542fwhistle\\nw2 restart\\n\\n# \u67e5\u770bwhistle\u72b6\u6001\\nw2 status\\n```\\n\\n`whistle`\u542f\u52a8\u6210\u529f\u540e\uff0c\u70b9\u51fb\u51fa\u73b0\u7684\u5e26\u6709`8899`\u7aef\u53e3\u53f7\u7684\u94fe\u63a5\uff0c\u53ef\u8fdb\u5165`whistle`\u914d\u7f6e\u9875\u9762\\n\\n![whistle\u542f\u52a8](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/startup.png)\\n\\n`whistle`\u914d\u7f6e\u9875\u9762\\n\\n![whistle\u914d\u7f6e\u9875\u9762](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/config.png)\\n\\n## \u5b89\u88c5`whistle`\u8bc1\u4e66\\n\\n:::tip\\nWhistle v2.9.14 \u7248\u672c\u5f00\u59cb\u652f\u6301\u901a\u8fc7\u547d\u4ee4\u884c w2 proxy ... \u8bbe\u7f6e<HWarning>\u7cfb\u7edf\u7684\u5168\u5c40\u4ee3\u7406</HWarning>\uff0c\u4ee5\u53ca w2 ca ... \u5b89\u88c5\u7cfb\u7edf\u6839\u8bc1\u4e66\uff08\u76ee\u524d\u53ea\u652f\u6301 Windows \u548c Mac \u5e73\u53f0\uff09\\n:::\\n\\n### \u68c0\u67e5whistle\u7248\u672c\\n\\n\u68c0\u67e5\u5b89\u88c5\u7684`whistle`\u7248\u672c\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\\n\\n```sh\\nwhistle -V\\n\\n# \u6216\u8005\\nw2 -V\\n```\\n\\n![whistle \u7248\u672c](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/version.png)\\n\\n\u6211\u8fd9\u91cc\u662f`2.9.57 > 2.9.14`\u7248\u672c\uff0c\u6240\u4ee5\u5c31\u7528\u547d\u4ee4\u884c\u53c2\u6570\u8fdb\u884c\u8bc1\u4e66\u7684\u5b89\u88c5\u53ca\u8bf7\u6c42\u4ee3\u7406\u4e86\u3002\\n\\n### \u5b89\u88c5\u8bc1\u4e66\\n\\n:::tip\\n\u5b89\u88c5\u8bc1\u4e66\u524d\u8981\u5148\u542f\u52a8whistle\\n:::\\n\\n```sh\\n# \u5b89\u88c5\u672c\u5730\u8fd0\u884c\u7684 Whistle \u5b9e\u4f8b\u6839\u8bc1\u4e66\uff08\u81ea\u52a8\u68c0\u6d4b\u5f53\u524d\u8fd0\u884c\u7684\u9ed8\u8ba4\u5b9e\u4f8b\uff0c\u5982\u679c\u6ca1\u6709\u53d6\u9ed8\u8ba4\u53d6 8899 \u7aef\u53e3\uff09\\nw2 ca\\n```\\n\\n![\u5b89\u88c5\u8bc1\u4e66](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/ca.png)\\n\\n## \u914d\u7f6e\u4ee3\u7406\\n\\n\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u8fdb\u884c\u5168\u5c40\u4ee3\u7406\\n\\n```sh\\n# \u4ee3\u7406 127.0.0.1:8899\\nw2 proxy\\n```\\n\\n## \u5b9a\u4e49\u4ee3\u7406\u89c4\u5219\\n\\n\u4ee3\u7406\u6210\u529f\u540e\u53ef\u5728[\u672c\u5730\u914d\u7f6e\u9875\u9762](http://127.0.0.1:8899/) \u914d\u7f6e\u4ee3\u7406\u89c4\u5219\u3002\u8fd9\u91cc\u62ff`www.baidu.com`\u548c`youdao.com`\u505a\u6d4b\u8bd5\u3002\u66f4\u591a\u914d\u7f6e\u89c4\u5219\u53ef\u89c1[\u5339\u914d\u6a21\u5f0f](https://wproxy.org/whistle/pattern.html)\\n\\n![\u4ee3\u7406\u89c4\u5219](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/rules.png)\\n\\n![\u89c4\u5219\u53d8\u91cf](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/values.png)\\n\\n## \u9a8c\u8bc1\u4ee3\u7406\\n\\n\u5728`www.baidu.com`\u4e0b\uff0c\u6e32\u67d3\u4e86`youdao.com`\u7684\u5185\u5bb9\u3002\u4ee3\u7406\u6210\u529f\uff01\\n\\n![\u9a8c\u8bc1](./whislte\u7684\u5b89\u88c5\u53ca\u4f7f\u7528/verify.png)\\n\\n## \u5173\u95ed`whistle`\u5e76\u53d6\u6d88\u4ee3\u7406\\n\\n:::tip\\n\u5173\u95edwhistle\u540e\u4e00\u5b9a\u8981\u505c\u6b62\u4ee3\u7406\uff0c\u5426\u5219\u4f1a\u6ca1\u7f51\\n:::\\n\\n\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u3002\\n\\n```sh\\n# \u5173\u95edwhistle\\nw2 stop\\n\\n# \u505c\u6b62\u4ee3\u7406\\nw2 proxy off\\n```\\n\\n## \u5378\u8f7d`whistle`\\n\\n:::tip\\n\u5378\u8f7dwhistle\u524d\u4e00\u5b9a\u8981\u5173\u95ed\u4ee3\u7406\u3002\u5426\u5219\u5c31\u9700\u8981\u53bb\u7f51\u7edc\u8bbe\u7f6e\u91cc\u9762\u624b\u52a8\u5173\u95ed\u4ee3\u7406\u3002\\n:::\\n\\n\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\\n\\n```sh\\nbrew uninstall whistle\\n```\\n\\n## \u5b89\u88c5\u547d\u4ee4\u7ec4\u5408\\n\\n### `brew`\u5b89\u88c5\\n\\n\u6574\u4f53\u4e0b\u6765\u4f7f\u7528`brew`\u5b89\u88c5\u3001\u5378\u8f7d`whistle`\u7684\u4e00\u5957\u547d\u4ee4\u5982\u4e0b\\n\\n```sh\\n# \u5b89\u88c5\\nbrew install whistle && w2 start && w2 ca && w2 proxy\\n\\n# \u5378\u8f7d\\nw2 proxy off && brew uninstall whistle\\n```\\n\\n### `Node`\u5b89\u88c5\\n\\n```sh\\n# \u5b89\u88c5\\nnpm i -g whistle && w2 start && w2 ca && w2 proxy\\n\\n# \u5378\u8f7d\\nw2 proxy off && npm uninstall -g whistle\\n```\\n\\n## \u53c2\u8003\\n\\n[\u5b89\u88c5\u542f\u52a8](https://wproxy.org/whistle/install.html)"},{"id":"/2023/09/09/\u914d\u7f6edotfiles\u8bb0\u5f55","metadata":{"permalink":"/blog/index/2023/09/09/\u914d\u7f6edotfiles\u8bb0\u5f55","source":"@site/blog/2023/09/09/\u914d\u7f6edotfiles\u8bb0\u5f55.md","title":"\u914d\u7f6edotfiles\u8bb0\u5f55","description":"\u56e0\u4e3a\u5de5\u4f5c\u548c\u4e2a\u4eba\u7535\u8111\u90fd\u662fMac\uff0c\u5e73\u65f6\u4e5f\u4f1a\u5728\u5bb6\u7528\u81ea\u5df1\u7684\u7535\u8111coding\uff0c\u6240\u4ee5\u60f3\u7edf\u4e00\u4e00\u4e0b\u7f16\u7801\u73af\u5883\uff0c\u65b9\u4fbf\u4f7f\u7528\u3002","date":"2023-09-09T00:00:00.000Z","formattedDate":"2023\u5e749\u67089\u65e5","tags":[{"label":"dotfiles","permalink":"/blog/index/tags/dotfiles"}],"readingTime":3.325,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u914d\u7f6edotfiles\u8bb0\u5f55","tags":["dotfiles"]},"prevItem":{"title":"whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528","permalink":"/blog/index/2023/09/09/whistle\u7684\u5b89\u88c5\u53ca\u4f7f\u7528"},"nextItem":{"title":"\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages","permalink":"/blog/index/2023/09/04/\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages"}},"content":"\u56e0\u4e3a\u5de5\u4f5c\u548c\u4e2a\u4eba\u7535\u8111\u90fd\u662fMac\uff0c\u5e73\u65f6\u4e5f\u4f1a\u5728\u5bb6\u7528\u81ea\u5df1\u7684\u7535\u8111coding\uff0c\u6240\u4ee5\u60f3\u7edf\u4e00\u4e00\u4e0b\u7f16\u7801\u73af\u5883\uff0c\u65b9\u4fbf\u4f7f\u7528\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n:::tip\\n`dotfiles`\u6307\u7684\u662f\uff0c\u7cfb\u7edf\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u9690\u85cf\u6587\u4ef6(\u5939)\u3002\u6bd4\u5982`.config/`\u3001`.zshrc`\u7b49\u3002\\n:::\\n\\n## \u6ce8\u610f\u4e8b\u9879\\n\\n### `.zshrc`\u4e2d\u7684`\u5bb6`\u76ee\u5f55\uff0c\u6700\u597d\u4f7f\u7528\u53d8\u91cf\uff0c\u800c\u975e`/Users/{ your host name }`\\n\\n\u56e0\u4e3a\u4e0d\u77e5\u9053\u4e0b\u8f7d`dotfiles`\u9879\u76ee\u7684\u7535\u8111\u7684`host name`\u662f\u4ec0\u4e48\u3002\\n\\n\u5982\u679c\u5199\u6b7b\u4e86\uff0c\u811a\u672c\u6267\u884c\u5b8c\u6210\u540e\u4e00\u4e9b\u7a0b\u5e8f\u627e\u4e0d\u5230\u8def\u5f84\u4f1a\u65e0\u6cd5\u6b63\u786e\u6267\u884c\\n\\n### `oh-my-zsh`\u7684\u4e3b\u9898\u548c\u63d2\u4ef6\u4e0d\u8981\u76f4\u63a5\u653e\u5176`themes/`\u548c`plugins/`\u4e0b\\n\\n\u56e0\u4e3a`dotfiles`\u9879\u76ee\u4e0b\u7684`oh-my-zsh`\u662f<HWarning>\u52a8\u6001</HWarning>\u4ece`github`\u4e0a\u83b7\u53d6\u7684\u3002\\n\\n\u9879\u76ee\u88ab\u514b\u9686\u4e0b\u6765\u540e\uff0c`oh-my-zsh/`\u4e0b\u7684`themes/`\u548c`plugins/`\u90fd\u4f1a\u88ab<HWarning>\u521d\u59cb\u5316</HWarning>\u3002\\n\\n\u5efa\u8bae\u662f\u5c06`oh-my-zsh`\u7684`themes/`\u548c`plugins`\u653e\u5728\u522b\u5904\uff0c\u8f6f\u94fe\u63a5\u5230`oh-my-zsh/`\u5bf9\u5e94\u7684\u76ee\u5f55\u4e0b\\n\\n## \u601d\u8def\u6574\u7406\\n\\n1. \u521b\u5efagithub\u4ed3\u5e93\\n2. \u5c06\u6574\u7406\u597d\u7684`dotfiles`\u4e0a\u4f20\u5230repo\\n3. \u521b\u5efa\u5e76\u6267\u884c`dotfiles`\u5b89\u88c5\u811a\u672c\\n4. \u91cd\u542f\u7ec8\u7aef\uff0c\u7b49\u5f85\u9b54\u6cd5\\n\\n## `dotfiles`\u76ee\u5f55\u5206\u7c7b\\n\\n`dotfiles/`\u7684\u76ee\u5f55\u6811\u5982\u4e0b\\n\\n```txt\\n.\\n\u251c\u2500\u2500 README.md\\n\u251c\u2500\u2500 bootstrap.sh\\n\u251c\u2500\u2500 dot\\n\u2502\xa0\xa0 \u251c\u2500\u2500 config\\n\u2502\xa0\xa0 \u251c\u2500\u2500 oh-my-zsh\\n\u2502\xa0\xa0 \u251c\u2500\u2500 p10k.zsh\\n\u2502\xa0\xa0 \u2514\u2500\u2500 zshrc\\n\u2514\u2500\u2500 zsh\\n    \u251c\u2500\u2500 plugins\\n    \u2514\u2500\u2500 themes\\n```\\n\\n\u8fd9\u91cc\u5206\u51fa`dot/`\u662f\u4e3a\u4e86\u65b9\u4fbf\u5b89\u88c5\u811a\u672c\u4e2d\u7684\u76ee\u5f55\u67e5\u627e\uff0c\u4e5f\u4fbf\u4e8e\u6587\u4ef6\u7ba1\u7406\u3002\\n\\n## `dotfiles/`\u5b89\u88c5\u811a\u672c\\n\\n\u8fd9\u91cc\u5199\u7684\u6bd4\u8f83\u7b80\u5355\uff0c\u601d\u8def\u5982\u4e0b\uff1a\\n\\n1. \u67e5\u627e`dotfiles/dot/`\u4e0b\u7684\u6240\u6709\u6587\u4ef6(\u5939)\\n2. \u5982\u679c\u4e0a\u9762\u7684\u6587\u4ef6(\u5939)\u6dfb\u52a0`$HOME/.`\u524d\u7f00\u540e\uff0c\u53ef\u5728\u5bb6\u76ee\u5f55\u4e2d\u627e\u5230\uff0c\u4e14\u4e0d\u662f\u8f6f\u94fe\u63a5\u7c7b\u578b\uff0c\u5219\u4e3a\u5176\u521b\u5efa\u5907\u4efd(\u539f\u6587\u4ef6(\u5939)\u91cd\u547d\u540d\u4e3a\u5e26\u6709`.bak`\u7684\u6587\u4ef6(\u5939))\\n3. \u5c06`dotfiles/dot/`\u4e0b\u7684\u6240\u6709\u6587\u4ef6(\u5939)\u6dfb\u52a0`$HOME/.`\u524d\u7f00\uff0c\u8f6f\u94fe\u63a5\u5230\u5bb6(\u8fd9\u91cc\u662f`$HOME`)\u76ee\u5f55\\n4. \u5c06`dotfiles/zsh/`\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5939\u6839\u636e\u5176\u540d\u5b57\u94fe\u63a5\u5230`dotfiles/dot/oh-my-zsh/`\u4e0b\u5bf9\u5e94\u7684\u76ee\u5f55\u4e2d\\n\\n\u811a\u672c\u5185\u5bb9\u53ef\u80fd\u4f1a\u4e0d\u5b9a\u65f6\u53d1\u751f\u53d8\u5316\uff0c\u8fd9\u91cc\u7559\u4e0b\u811a\u672c\u6587\u4ef6\u5730\u5740\uff0c\u4ee5\u4f9b\u67e5\u9605\u3002[`dotfiles/bootstrap.sh`](https://github.com/xpzero/dotfiles/blob/main/bootstrap.sh)\\n\\n## `dotfiles/`\u4f7f\u7528\\n\\n\u4ecegithub\u7684repo\u91cc<HWarning>\u9012\u5f52</HWarning>\u514b\u9686\u540e\u6267\u884c`bootstrap.sh`\u811a\u672c\u5373\u53ef\u3002\\n\\n```sh\\ngit clone https://github.com/xpzero/dotfiles.git --recurse-submodules\\n\\ncd dotfiles && ./bootstrap.sh\\n```\\n\\n\u8bb0\u5f97\u5b89\u88c5\u6210\u529f\u540e\u8981\u91cd\u542f\u7ec8\u7aef\u3002\\n\\n:::tip\\n\u4e3a\u4ec0\u4e48\u8981\u9012\u5f52\u514b\u9686\uff1f\\n\\n`oh-my-zsh`\u3001`alacritty/themes`\u3001`powerlevel10k`\u7b49\u90fd\u662f\u4f5c\u4e3a\u5f53\u524d\u9879\u76ee\u7684\u5b50\u6a21\u5757\u5b58\u5728\u4e8erepo\u76ee\u5f55\u4e2d\u7684\u3002\u666e\u901a`clone`\u65e0\u6cd5\u5c06\u5b50\u6a21\u5757\u7684\u5185\u5bb9\u4e0b\u8f7d\u4e0b\u6765\uff0c\u9700\u8981\u4f7f\u7528`--recurse-submodules`\u53c2\u6570\u8fdb\u884c\u9012\u5f52\u514b\u9686\\n\\n\u53e6\u5916\uff0c\u8fd9\u91ccrepo\u4e0b\u7684\u5b50\u6a21\u5757repo\u5730\u5740\u90fd\u662fgithub\u57df\u540d\uff0c\u7f51\u7edc\u95ee\u9898\u9700\u8981\u8003\u8651\u4e00\u4e0b\u3002\\n:::\\n\\n## \u53c2\u8003\\n\\n[Linux Shell\u83b7\u53d6\u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\u540d](https://blog.csdn.net/Quincuntial/article/details/54348471)\\n\\n[Shell bash\u548csh\u533a\u522b](https://www.cnblogs.com/conefirst/articles/15232323.html)\\n\\n[Linux ln \u547d\u4ee4\u521b\u5efa\u7b26\u53f7\u94fe\u63a5](https://www.myfreax.com/how-to-create-symbolic-links-in-linux-using-the-ln-command/)\\n\\n[\u3010Linux\u3011021-\u8f6f\u786c\u94fe\u63a5](https://www.bilibili.com/video/BV14X4y1P7bh/?share_source=copy_web&vd_source=60cb976cb0acb8dc9492ec18c792ff15)\\n[alrra/dotfiles](https://github.com/alrra/dotfiles/blob/main/src/os/create_symbolic_links.sh)\\n\\n[Git\u4e2dsubmodule\u7684\u4f7f\u7528](https://zhuanlan.zhihu.com/p/87053283)"},{"id":"/2023/09/04/\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages","metadata":{"permalink":"/blog/index/2023/09/04/\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages","source":"@site/blog/2023/09/04/\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages.md","title":"\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages","description":"\u7f51\u4e0a\u51b2\u6d6a\u770b\u5230\u522b\u4eba\u7684\u535a\u5ba2\u597d\u7b80\u6d01\u597d\u597d\u770b\uff0c\u6211\u4e5f\u8981\u6574\u4e00\u5957\ud83e\udd13\u3002But\uff01\u6765\u6765\u56de\u56de\u5728\u7f51\u4e0a\u67e5\u8be2\uff0c\u53c8\u6709\u65f6\u5019\u5fd8\u8bb0\u8981\u5e72\u5565\u6574\u4e86\u4e00\u5929\u624d\u641e\u5b9a\ud83d\ude48\u3002\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u6211\u300c\u8d2a\u300d\u7684\u8f9b\u82e6\ud83e\udd79","date":"2023-09-04T00:00:00.000Z","formattedDate":"2023\u5e749\u67084\u65e5","tags":[{"label":"Hexo","permalink":"/blog/index/tags/hexo"}],"readingTime":9.705,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages","tags":["Hexo"]},"prevItem":{"title":"\u914d\u7f6edotfiles\u8bb0\u5f55","permalink":"/blog/index/2023/09/09/\u914d\u7f6edotfiles\u8bb0\u5f55"},"nextItem":{"title":"\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303","permalink":"/blog/index/2022/11/15/\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303"}},"content":"\u7f51\u4e0a\u51b2\u6d6a\u770b\u5230\u522b\u4eba\u7684\u535a\u5ba2\u597d\u7b80\u6d01\u597d\u597d\u770b\uff0c\u6211\u4e5f\u8981\u6574\u4e00\u5957\ud83e\udd13\u3002But\uff01\u6765\u6765\u56de\u56de\u5728\u7f51\u4e0a\u67e5\u8be2\uff0c\u53c8\u6709\u65f6\u5019\u5fd8\u8bb0\u8981\u5e72\u5565\u6574\u4e86\u4e00\u5929\u624d\u641e\u5b9a\ud83d\ude48\u3002\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u6211\u300c\u8d2a\u300d\u7684\u8f9b\u82e6\ud83e\udd79\\n\\n\u73b0\u5df2\u7528`Docusaurus`.\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u660e\u786e\u76ee\u6807\\n\\n\u9996\u5148\uff0c\u6211\u4eec\u8981\u660e\u786e\u4e00\u4e0b\u81ea\u5df1\u8981\u5e72\u4ec0\u4e48\uff1f\u94ed\u8bb0\u521d\u5fc3\uff0c\u65b9\u5f97\u59cb\u7ec8\uff0c\u6df1\u6709\u4f53\u4f1a\ud83d\ude15\\n\\n1. \u642d\u5efa\u535a\u5ba2\uff0c\u62e5\u62b1\u6279\u8bc4\\n2. \u5c06\u535a\u5ba2\u5185\u5bb9\u6258\u7ba1\u81f3Github Pages\uff0c\u8fdb\u884c\u7f51\u7ad9\u767d\u5ad6\u3002\\n\\n\u90a3\u4e48\u5982\u4f55\u642d\u5efa\u535a\u5ba2\u5462\uff1f\u6211\u8fd9\u6b21\u4f7f\u7528\u7684\u662fHugo\u3002\u5176\u5b9e\u4e2d\u95f4\u6709\u5012\u817e\u8fc7Hexo\u3001Netlify\u5168\u90fd\u592d\u6298\u3002\\n\u5176\u5b9e\u4f7f\u7528\u9759\u6001\u7f51\u7ad9\u6784\u5efa\u6846\u67b6\u751f\u6210\u672c\u5730\u535a\u5ba2\u633a\u5feb\u6377\u3001\u7b80\u5355\u7684\uff0c\u65f6\u95f4\u4e3b\u8981\u6d6a\u8d39\u5728\u4e86\u4ee3\u7801\u6258\u7ba1\u90a3\u4e00\u5757\u513f\u3002\\n\\n## Hugo\\n\u4e00\u5f00\u59cb\u662f\u4f7f\u7528\u7684Hexo\u8fdb\u884c\u535a\u5ba2\u7684\u751f\u6210\uff0c\u4f46\u662f\u5728\u641c\u7d22\u4ee3\u7801\u6258\u7ba1\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u6709\u4eba\u8bf4\uff0cHugo\u66f4\u52a0\u65b9\u4fbf\u3001\u6613\u7528\u3002\\n\\n![Why Hugo](img/useHugo_why-hugo.png)\\n\\n\u54c7\uff01\u770b\u5230\u8fd9\u91cc\u5c82\u80fd\u5750\u89c6\u4e0d\u7ba1\uff1f\u54b1\u4e5f\u7528\uff01\u5f53\u65f6\u5df2\u7ecf\u662f4 AM\u4e86\ud83e\udd7a\uff0c\u8fd9\u79cd\u72b6\u6001\u6709\u65f6\u5019\u771f\u662f\u8ba9\u4eba\u53c8\u7231\u53c8\u6068\u2639\ufe0f\\n\\n\u8bf4\u5e72\u5c31\u5e72\u3002\u8fdb\u5165[Hugo](https://gohugo.io/)\u5b98\u7f51\uff0c\u5c31\u770b\u89c1\u4e0a\u9762\u5199\u7740\u300cThe world\'s fastest framework for buiding websites\u300d\ud83e\uddd0 \\n\\n![The world\'s fastest framework for buiding websites\u300d](img/useHugo_fastest.png) \\n\\n### \u5b89\u88c5Hugo\\n\u8fd9\u91cc\u8ddf\u7740\u5b98\u7f51\u6765\u5c31\u597d\u4e86\u3002\u6211\u662f\u4eca\u5e74\u521a\u4e70\u7684Mac\uff0c\u6240\u4ee5\u8fd9\u91cc\u5c31\u8bb0\u5f55\u4e0bMac\u4e0b\u7684\u5b89\u88c5\u8fc7\u7a0b\u3002\\n\\n\u4e00\u5b9a\u8981\u6709`git`\u73af\u5883\uff0c\u56e0\u4e3a`Hugo`\u7684\u4e3b\u9898\u8981\u4ece`github`\u4e0a\u83b7\u53d6\uff0c\u6ca1\u6709`git`\u62ff\u4e0d\u5230\u3002\\n\\n```sh\\n# \u8fd9\u91ccbrew\u662f\u5b89\u88c5\u4e86Homebrew\uff0c\u7528\u6765\u7ba1\u7406\u5404\u79cd\u5305\u7684\u5b89\u88c5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8f6f\u4ef6\u7ba1\u7406\\nbrew install hugo\\n```\\n\\n```sh\\n# \u521b\u5efa\u4e00\u4e2awebsite\uff0c\u56e0\u4e3a\u6211\u662f\u8981\u642d\u5efa\u535a\u5ba2\uff0c\u6240\u4ee5\u8fd9\u91cc\u8d77\u540d\u53ebblog\\n# \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u521b\u5efablog\u76ee\u5f55\u5176\u4e2d\u4f1a\u6709\u4e00\u4e9b\u7a7a\u7684\u7ed3\u6784\u76ee\u5f55\u4ee5\u5907\u540e\u7528\\nhugo new site blog\\n```\\n\\n```sh\\ncd blog\\n# \u5f00\u59cb\u83b7\u53d6\u535a\u5ba2\u4e3b\u9898\\ngit init\\ngit submodule add https://github.com/nanxiaobei/hugo-paper\\n# \u5c06\u4e3b\u9898\u914d\u7f6e\u5199\u5165hugo.toml\u914d\u7f6e\u6587\u4ef6\\necho \\"theme = \'paper\'\\" >> hugo.toml\\n```\\n\\n```sh\\n# \u542f\u52a8\u672c\u5730\u670d\u52a1\\nhugo server\\n```\\n\\n```sh\\n# \u8be5\u547d\u4ee4\u53ef\u4ee5\u751f\u6210\u9759\u6001\u8d44\u6e90\uff0c\u4e3b\u8981\u4e3a\u8d44\u6e90\u6258\u7ba1\u505a\u51c6\u5907\\n# \u5b83\u4f1a\u751f\u6210\u4e00\u4e2apublic/\uff0c\u91cc\u9762\u7684\u6587\u4ef6\u5c31\u662f\u535a\u5ba2\u7684\u9759\u6001\u8d44\u6e90\\nhugo\\n```\\n\\n### \u914d\u7f6eHugo\\n\u8fd9\u91cc\u6700\u91cd\u8981\u7684\u5c31\u662f`baseURL`\uff0c\u5982\u679c\u914d\u7f6e\u7684\u4e0d\u5bf9\uff0c\u90a3\u4e48\u8d44\u6e90\u90e8\u7f72\u5230GitHub\u4e4b\u540e\u5c31\u4f1a\u5bfc\u81f4`css`\u7b49\u8d44\u6e90\u8def\u5f84\u627e\u4e0d\u5230\u800c\u9020\u6210\u9875\u9762\u6837\u5f0f\u4e22\u5931\u3002\\n```toml\\n# \u53ef\u4ee5\u7406\u89e3\u4e3a\u662f\u90e8\u7f72\u5230Github\u4e4b\u540e\uff0c\u535a\u5ba2\u7f51\u7ad9\u7684\u57fa\u7840\u8def\u5f84\\n# \u4e00\u5b9a\u8981\u5e26\u4e0aGitHub\u4e0a\u7684\u4ed3\u5e93\u540d\u54e6\uff01\u8fd9\u4e2a\u5730\u5740\u53ef\u4ee5\u5728\u914d\u7f6e\u516c\u5f00\u4ed3\u5e93\u7684Github Pages\u7684\u8bbe\u7f6e\u90a3\u91cc\u62ff\u5230\u3002\u6709\u4e00\u4e2a`Visit site`\u6309\u94ae\uff0c\u70b9\u51fb\u5373\u53ef\u8fdb\u5165\u535a\u5ba2\\nbaseURL = \'https://xpzero.github.io/blog\'\\n```\\n\\n\u5230\u6b64\uff0c\u4e00\u4e2a\u535a\u5ba2\u7f51\u7ad9\u5c31\u7b97\u662f\u5df2\u7ecf\u57fa\u672c\u5b8c\u6210\u4e86\uff0c\u535a\u5ba2\u4e2d\u5206\u4eab\u7684\u6587\u7ae0\u5c31\u9700\u8981\u6211\u81ea\u5df1\u540e\u7eed\u518d\u8865\u5145\u8c03\u6574\u4e86\u3002\u73b0\u5728\u53ef\u4ee5\u5f00\u59cb\u8fd9\u7bc7\u6587\u7ae0\u7684\u91cd\u8981\u90e8\u5206\u4e86\uff01\\n\\n## \u6258\u7ba1\u535a\u5ba2\u8d44\u6e90\u5230GitHub\\n\\n**\u6709\u4e00\u4e2a\u60c5\u51b5\u8981\u5148\u8bf4\u660e\u4e00\u4e0b\uff0cGitHub\u7684GitHub Pages\u4f7f\u7528\u7684\u524d\u63d0\u662f\u4ed3\u5e93\u662f\u516c\u5f00\u7684\uff0c\u4e0d\u80fd\u662f\u79c1\u6709\u7684\u3002**\\n\\n![Github Pages configure](img/useHugo_enable-pages.png) \\n\\n\u8fd9\u91cc\u8981\u5148\u601d\u8003\u4e00\u4e0b\uff0c\u6211\u4eec\u6258\u7ba1\u535a\u5ba2\u8d44\u6e90\u662f\u628a\u5305\u62ec\u4e3b\u9898\u7b49\u5728\u5185\u7684\u6240\u6709\u6587\u4ef6\u90fd\u653e\u5728\u516c\u5f00\u4ed3\u5e93\u5417\uff1f\u6709\u70b9\u300c\u88f8\u5954\u300d\u7684\u611f\u89c9\ud83e\udd28\u3002\u4f46\u662f\u4e0d\u628a\u6240\u6709\u7684\u535a\u5ba2\u8d44\u6e90\u505a\u4e00\u4e2a\u7248\u672c\u63a7\u5236\uff0c\u4f3c\u4e4e\u4e5f\u4e0d\u4e60\u60ef\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f\\n\\n\u7ecf\u8fc7\u4e0d\u61c8\u7684\u52aa\u529b\uff0c\u4e00\u76f4\u641c\u554a\u641c\uff0c\u4e86\u89e3\u5230\u4e86\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u4e24\u4e2a\u4ed3\u5e93\uff0c\u5e76\u5efa\u7acb\u4e24\u4e2a\u4ed3\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u6765\u6258\u7ba1\u535a\u5ba2\u8d44\u6e90\u5230GitHub\u3002\u4e24\u4e2a\u4ed3\u5e93\u7684\u4f5c\u7528\u5982\u4e0b\uff1a\\n\\n- \u79c1\u6709\u4ed3\u5e93\uff0c\u5b58\u653e\u6240\u6709\u5305\u62ec\u4e3b\u9898\u7b49\u8d44\u6e90\u5728\u5185\u7684\u6e90\u6587\u4ef6\\n- \u516c\u5f00\u4ed3\u5e93\uff0c\u4ec5\u5b58\u653e\u901a\u8fc7`hugo`\u547d\u4ee4\u751f\u6210\u7684`public/`\u4e0b\u7684\u6587\u4ef6\\n- \u4e8c\u8005\u5efa\u7acb\u8054\u7cfb\uff0c\u5f53\u79c1\u6709\u4ed3\u5e93\u6709\u53d8\u52a8\u65f6\uff0c\u516c\u5f00\u4ed3\u5e93\u4e5f\u8ddf\u7740\u53d8\u52a8\\n  \\n  - \u901a\u8fc7`shell`\u811a\u672c\uff0c\u5f53\u79c1\u6709\u4ed3\u5e93\u7684\u5185\u5bb9\u88ab\u66f4\u65b0\u540e\uff0c\u6267\u884c\u811a\u672c\u5c06\u79c1\u6709\u4ed3\u5e93\u4e2d\u7684`public/`\u5185\u7684\u6240\u6709\u6587\u4ef6\u4e0a\u4f20\u81f3\u516c\u5f00\u4ed3\u5e93\u7684\u6307\u5b9a\u5206\u652f\uff0c\u5b8c\u6210\u90e8\u7f72\\n  - \u901a\u8fc7\u5728\u79c1\u6709\u4ed3\u5e93\u521b\u5efa`Github Actions`\u7684`workflows`\u7684\u65b9\u5f0f\u81ea\u52a8\u5b8c\u6210\u4e0a\u9762\u7684\u52a8\u4f5c\ud83d\udc4f\u3002\\n\\n\u672c\u7740\u80fd\u81ea\u52a8\u5c31\u4e0d\u624b\u52a8\u7684\u539f\u5219\uff0c\u5f53\u7136\u8981\u91c7\u7528`Github Actions`\u7684\u65b9\u5f0f\u8ba9\u5b83\u81ea\u52a8\u5b8c\u6210\uff0c\u522b\u6765\u70e6\u6211\u54af\ud83d\ude0e\u3002\\n\\n### \u6388\u6743\u95ee\u9898\\n\\n\u5c31\u662f\u56e0\u4e3a\u8fd9\u4e2a\u95ee\u9898\uff0c\u65f6\u95f4\u5982\u6d41\u6c34\u822c\u4e00\u53bb\u4e0d\u8fd4\u3002\ud83d\ude11\\n\\n![pre-auth](img/useHugo_auth_pre.png) \\n\\n\u56e0\u4e3a\u516c\u5f00\u4ed3\u5e93\u548c\u79c1\u6709\u4ed3\u5e93\u662f\u4e24\u4e2a\u5355\u72ec\u7684\u4ed3\u5e93\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528`Personal access token`.\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9`worksflows`\u53ef\u4ee5\u4f7f\u7528`git`\u7684api\\n\\n#### \u521b\u5efa`Personal access token`\\n\\n\u8fd9\u91cc\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u5b98\u65b9\u63a8\u8350\u7684\u7b2c\u4e00\u79cd\uff0c\u6211\u5b9e\u8df5\u7684\u65f6\u5019\u4f7f\u7528\u7684\u7b2c\u4e8c\u79cd\ud83d\ude1b\\n\\n- [Creating a fine-grained personal access token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-fine-grained-personal-access-token) \\n- [Creating a personal access token (classic)](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic)\\n\\n\u5f00\u59cb\u521b\u5efa\\n\\n![pat-pre](img/useHugo_pat-pre.png)![pat-pre](img/useHugo_pat-pre2.png) \\n\\n\u8fd9\u91cc\u56e0\u4e3a\u6211\u521b\u5efa\u8fc7`Personal access token`\uff0c\u6240\u4ee5\u8ddf\u6ca1\u6709\u521b\u5efa\u8fc7\u7684\u4e0d\u4e00\u6837\u3002\u70b9\u51fb`Generate new token`\u53ef\u4ee5\u518d\u5efa\u3002\u70b9\u51fb\u4e4b\u524d\u521b\u5efa\u8fc7\u7684`token`, \u53ef\u4ee5\u8fdb\u53bb\u9009\u62e9\u91cd\u65b0\u751f\u6210\u3002\\n![pat-pre](img/useHugo_pat.png) \\n\\n\u5728\u914d\u7f6e\u9875\u9762\u52fe\u9009\u5b8c\u6743\u9650\uff0c\u8bbe\u7f6e\u540d\u5b57\u540e\u4fdd\u5b58\uff0c\u4f1a\u751f\u6210\u4e00\u4e32`key`\uff0c\u7a0d\u5fae\u5b58\u4e00\u4e0b\uff0c\u8981\u7ed9\u79c1\u6709\u5e93\u521b\u5efa`Secrets`\u7528\uff0c\u4e5f\u53ef\u4ee5\u91cd\u65b0\u751f\u6210\u3002\\n\\n#### \u79c1\u6709\u5e93\u6dfb\u52a0`Secrets`\\n\\n\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u52a0\u5bc6`Personal access token`.\u5982\u679c\u6709\u4e00\u5929\uff0c\u6211\u4eec\u66f4\u6362\u4e86`Personal access token`\uff0c\u5c31\u8981\u540c\u6b65\u4fee\u6539`workflows`\u3002\u4f7f\u7528\u88ab\u52a0\u5bc6\u7684`token`\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u5728`workflows`\u4e2d\u52a8\u6001\u8bfb\u53d6`token`\u8fd8\u53ef\u4ee5\u8ba9\u4fe1\u606f\u66f4\u52a0\u5b89\u5168\u3002\\n\\n![create secrets](img/useHugo_secrets.png)![secrets2](img/useHugo_secrets2.png)\\n\\n\u5982\u679c\u6743\u9650\u6ca1\u914d\u597d\u5728`workflows`\u8fd0\u884c\u7684\u65f6\u5019\u5c31\u4f1a\u51fa\u73b0`fatal: could not read Username for \'https://github.com\': No such device or address`\u7684\u62a5\u9519\\n\\n\\n### \u521b\u5efa\u516c\u5f00\u4ed3\u5e93\\n\\n![public repo](img/useHugo_public-repo.png) \\n\\n\u8bb0\u5f97\u914d\u7f6e`Github Pages`\u3002\u5982\u679c\u516c\u5f00\u4ed3\u5e93\u6709`gh-pages`\u5206\u652f\uff0c\u8be5\u4ed3\u5e93\u4f1a\u88ab\u9ed8\u8ba4\u8bbe\u7f6e`Github Pages`\uff0c\u4e14\u5176\u89e6\u53d1\u90e8\u7f72\u7684\u5206\u652f\u5373\u4e3a`gh-pages`.\u8be5\u5206\u652f\u88ab`push`\u540e\u4f1a\u89e6\u53d1\u8d44\u6e90\u90e8\u7f72\u673a\u5236\u81ea\u52a8\u5c06\u8d44\u6e90\u90e8\u7f72\u53d1\u5e03\u3002\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u4f7f\u7528\u7684`main`\u5206\u652f\uff0c\u9700\u8981\u624b\u52a8\u8bbe\u7f6e`Github Pages`\uff0c\u4ecd\u7136\u4f7f\u7528**\u5206\u652f\u89e6\u53d1**\u7684\u65b9\u5f0f\u8fdb\u884c\u8d44\u6e90\u90e8\u7f72.\\n\\n![public pages](img/useHugo_public-pages.png) \\n\\n### \u521b\u5efa\u79c1\u6709\u4ed3\u5e93\\n\\n![\u521b\u5efa\u79c1\u6709\u4ed3\u5e93](img/useHugo_create-repo.png)\\n\\n### \u521b\u5efaworkflows\\n\\n\u8981\u5728**\u79c1\u6709\u4ed3\u5e93**\u521b\u5efa`workflows`.\\n\\n![\u521b\u5efaworkflows](img/useHugo_create-workflows.png)\\n\\n\u8fd9\u91cc\u6211\u4eec\u9009\u5b89\u88c5\u81ea\u5df1\u7684`workflows`\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e3a\u907f\u514d\u51fa\u9519\u5176\u914d\u7f6e\u5185\u5bb9\u5c3d\u91cf\u548c\u6211\u4e0b\u9762\u7ed9\u51fa\u7684\u914d\u7f6e\u5185\u5bb9\u4e00\u81f4\u3002\\n\\n```toml\\n# Sample workflow for building and deploying a Hugo site to GitHub Pages\\nname: Deploy Hugo site to Pages\\n\\non:\\n  # push \u89e6\u53d1actions\u3002Runs on pushes targeting the default branch\\n  push:\\n    # main\u5206\u652f\u4e0a\u7684push\u89e6\u53d1actions\\n    branches: [\\"main\\"]\\n\\n  # Allows you to run this workflow manually from the Actions tab\\n  # workflow_dispatch:\\n\\njobs:\\n  # Build job\\n  build:\\n    runs-on: ubuntu-latest\\n    env:\\n      HUGO_VERSION: 0.117.0\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v3\\n      - name: push to Github Pages repository\\n        working-directory: ./public\\n        # echo \\"<domain>\\" > CNAME \u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u8bdd\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e2a\u52a0\u5728git init\u4e0a\u9762.\\n        # \u8fd9\u4e9b\u5730\u65b9\u9700\u8981\u4fee\u6539\uff1aYOUR_NAME\uff08\u53ef\u4ee5\u968f\u610f\uff09\u3001YOUR_EMAIL\u3001YOUR_COMMIT_MESSAGE\u3001YOUR_PERSONAL_ACCESS_TOKEN\u3001\\n        # YOUR_USERNAME\uff08\u4f60\u7684github\u8d26\u6237\u540d\uff09\u3001YOUR_PUBLIC_REPO_NAME\uff08\u516c\u5f00\u4ed3\u5e93\u540d\uff09\\n        run: |\\n          git init\\n          git checkout -b main\\n          git add -A\\n          git -c user.name=\\"YOUR_NAME\\" -c user.email=\\"YOUR_EMAIL\\" commit -m \\"YOUR_COMMIT_MESSAGE\\"\\n          git remote add origin https://${{secrets.YOUR_PERSONAL_ACCESS_TOKEN}}@github.com/YOUR_USERNAME/YOUR_PUBLIC_REPO_NAME.git\\n          git push origin main -f -q\\n```\\n\\n![edit workflows](img/useHugo_edit-workflows.png) \\n\\n### \u6492\u82b1\ud83c\udf89\\n\\n`workflows`\u7684\u53d8\u66f4\u88ab`commit`\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728`Actions`\u9762\u677f\u4e2d\u770b\u5230`workflows`\u7684\u8fd0\u884c\u8bb0\u5f55\u4e86\u3002\\n\\n![workflows log](img/useHugo_workflows.png)\\n\\n\u53e6\u5916\uff0c\u516c\u5f00\u4ed3\u5e93\u4e5f\u56e0\u4e3a\u6709\u4e4b\u524d\u914d\u7f6e`Github Pages`\u65f6\u8bbe\u7f6e\u7684\u56e0\u5206\u652f\u4ee3\u7801\u6539\u52a8\u800c\u89e6\u53d1\u90e8\u7f72\u7684\u914d\u7f6e\uff0c\u5728`Actions`\u9762\u677f\u4e5f\u80fd\u770b\u5230\u5bf9\u5e94\u7684\u90e8\u7f72\u8bb0\u5f55\\n\\n![finish](img/useHugo_finish.png) \\n\\n# \u611f\u6069\\n\\n[SSH vs. HTTPS for Git: Which One Should You Use?](https://phoenixnap.com/kb/git-ssh-vs-https)\\n\\n[SSH\u516c\u94a5\u767b\u5f55\u539f\u7406]( https://www.cnblogs.com/scofi/p/6617394.html )\\n\\n[About authentication to GitHub](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-authentication-to-github)\\n\\n[Managing your personal access tokens\\n](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens) \\n[GitHub \u79c1\u6709\u4ed3\u5e93\u514d\u8d39\u5f00\u542f GitHub Pages \u7684\u53ef\u884c\u6027\u65b9\u6848](https://juejin.cn/post/7120474763910676488)\\n\\n[\u901a\u8fc7 GitHub Actions \u5b9e\u73b0\u79c1\u6709\u4ed3\u5e93\u7684\u514d\u8d39 Github Pages \u90e8\u7f72](https://juejin.cn/post/7008847699919241229)\\n\\n[\u5982\u4f55\u4f7f\u7528Hugo\u5728GitHub Pages\u4e0a\u642d\u5efa\u514d\u8d39\u4e2a\u4eba\u7f51\u7ad9](https://zhuanlan.zhihu.com/p/37752930)\\n\\n[\u5c06hugo\u535a\u5ba2\u90e8\u7f72\u5230github](https://www.wenhui.space/docs/04-build-blog-site/hugo_deploy_to_github/)\\n\\n[HUGO](https://kuang.netlify.app/blog/hugo.html)"},{"id":"/2022/11/15/\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303","metadata":{"permalink":"/blog/index/2022/11/15/\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303","source":"@site/blog/2022/11/15/\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303.md","title":"\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303","description":"\u9002\u7528\u4eba\u7fa4","date":"2022-11-15T00:00:00.000Z","formattedDate":"2022\u5e7411\u670815\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":5.935,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages","permalink":"/blog/index/2023/09/04/\u4f7f\u7528Hugo\u6784\u5efa\u4e2a\u4eba\u535a\u5ba2\u5e76\u6258\u7ba1\u81f3Github Pages"},"nextItem":{"title":"git rebase\u4f7f\u7528\u8bb0\u5f55","permalink":"/blog/index/2022/11/05/git-rebase\u4f7f\u7528\u8bb0\u5f55"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u9002\u7528\u4eba\u7fa4\\n\\n\u53ef\u719f\u7ec3\u4f7f\u7528Promise\\n\\n## \u524d\u8a00\\n\\n\u5173\u4e8e\u624b\u5199Promise\u7684\u6e90\u7801\u4e4b\u524d\u5c1d\u8bd5\u4e86\u4e0d\u6b624\uff0c5\u6b21\u4f46\u90fd\u4ee5\u5931\u8d25\u544a\u7ec8\uff0c\u4e0d\u662f\u89c9\u5f97\u96be\u4e0d\u60f3\u575a\u6301\u5c31\u662f\u9879\u76ee\u52a0\u6025\u6ca1\u6709\u65f6\u95f4\u5bfc\u81f4\u6401\u7f6e\u3002\u8fd9\u6b21\u4e0b\u5b9a\u51b3\u5fc3\u8981\u82b1\u4e00\u4e2a\u5b8c\u6574\u7684\u65f6\u95f4\u6bb5\u653b\u7834\u8fd9\u4e2a\u4e8b\u60c5\uff0c\u56e0\u4e3a\u8111\u888b\u4e0d\u662f\u5f88\u7075\u5149\uff0c\u603b\u7684\u7b97\u4e0b\u6765\u5dee\u4e0d\u591a4-5\u4e2a\u5c0f\u65f6\uff0c\u4f46\u662f\u8fd9\u91cc\u7ed3\u679c\u6700\u91cd\u8981\uff0c\u7ec8\u4e8e\u6309\u7167\u53ef\u4ee5\u7406\u89e3\u7684\u601d\u8def\u5b8c\u6210\u4e86\u901a\u8fc7Promise A+\u89c4\u8303\u7684Promise\u4ee3\u7801\u7f16\u5199\uff01\u4e0b\u9762\u6839\u636e\u6211\u7684\u7f16\u5199\u8fc7\u7a0b\u603b\u7ed3\u4e00\u4e0b\u7f16\u7801\u601d\u8def\u65b9\u4fbf\u4e4b\u540e\u7684\u7406\u89e3\u3002\\n\\n## \u51c6\u5907\u5de5\u4f5c\\n\\n\u9700\u8981\u901a\u8fc7Promise A+\u89c4\u8303\uff0c\u90a3\u5c31\u9700\u8981\u6709\u6d4b\u8bd5\u7528\u4f8b\u6765\u5e2e\u52a9\u6211\u4eec\u5224\u65ad\u81ea\u5df1\u5199\u7684\u7684\u4ee3\u7801\u662f\u5426\u4f1a\u7ecf\u5f97\u4f4fPromise A+\u7684\u8003\u9a8c\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u51c6\u5907\u4e00\u4e2a\u4e13\u95e8\u7528\u6765\u68c0\u6d4bPromise A+\u89c4\u8303\u7684npm\u5305\uff0c\u6765\u5e2e\u52a9\u6211\u4eec\u5224\u65ad\u7f16\u5199\u7684\u4ee3\u7801\u662f\u5426\u5df2\u7ecf\u6210\u529f\u901a\u8fc7Promise A+\u89c4\u8303\u3002\\n\\n### \u6dfb\u52a0`promises-aplus-tests`\u5305\\n\\nnpm\u5305\u7ba1\u7406\u5de5\u5177\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u4e60\u60ef\u9009\u53d6\u4f7f\u7528\uff0c\u8fd9\u91cc\u4f7f\u7528`yarn`\\n\\n```\\nyarn add promises-aplus-tests -D\\n```\\n\\n### \u4fee\u6539`package.json`\u4e2d\u7684`scripts`\\n\\n```\\n\\"scripts\\": {\\n    \\"test\\": \\"promises-aplus-tests MyPromise.js\\"\\n}\\n```\\n\\n\u5c06`MyPromise.js`\u6362\u6210\u81ea\u5df1\u5199\u7684\u4ee3\u7801\u6587\u4ef6\uff0c\u5982\u679c\u6709\u6587\u4ef6\u5939\u5d4c\u5957\u9700\u8981\u5e26\u4e0a\u8def\u5f84\u3002\\n\\n\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u8ba4\u4e3a\u4ee3\u7801\u7f16\u5199\u5b8c\u6210\u540e\u4f7f\u7528`yarn test`\u6d4b\u8bd5\u81ea\u5df1\u7684\u4ee3\u7801\u4e86\u3002\\n\\n## Promise A+\u89c4\u8303\\n\\n\u65e2\u7136\u6211\u4eec\u5199\u7684\u4ee3\u7801\u8981\u901a\u8fc7Promise A+\u89c4\u8303\uff0c\u6211\u4eec\u5c31\u5f97\u8981\u4e86\u89e3\u89c4\u8303\u91cc\u7684\u5185\u5bb9\u662f\u4ec0\u4e48\u3002\u5173\u4e8e\u89c4\u8303\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u770b\ud83d\udc49\ud83d\udc49\ud83d\udc49<https://promisesaplus.com/>\u3002\u56e0\u4e3a\u4e0d\u80fd\u4e00\u5c4f\u622a\u51fa\u6765\uff0c\u6240\u4ee5\u5c31\u4e0d\u8d34\u51fa\u6765\u4e86\uff0c\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u8fdb\u53bb\u770b\u3002\\n\\n## Promise\u57fa\u672c\u7279\u5f81\\n\\n\u6211\u4eec\u5148\u68b3\u7406\u4e00\u756a\u81ea\u5df1\u5bf9Promise\u7684\u4e86\u89e3\uff0c\u4fbf\u4e8e\u540e\u7eed\u7684\u7406\u89e3\u3002\\n\\n- promise\u51fd\u6570\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u6709\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u6211\u4eec\u79f0\u4e3ac0\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u51fd\u6570\u6267\u884c\u65f6\u540c\u6b65\u6267\u884c\\n- c0\u7684\u53c2\u6570\u4e2d\u53c8\u6709\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6211\u4eec\u79f0\u4e3ac1\uff0cc2\\n- c1\u3001c2\u4f1a\u5728c0\u4e2d\u7684\u6211\u4eec\u6307\u5b9a\u7684\u4f4d\u7f6e\u6267\u884c\\n- promise\u7684\u521d\u59cb\u72b6\u6001\u4e3apending\uff0c\u5185\u90e8\u7684\u521d\u59cb\u503c\u4e3aundefined\\n- c1\u6267\u884c\u540epromise\u7684\u72b6\u6001\u4f1a\u53d8\u4e3afulfilled\uff0c\u5982\u679cPromise\u6709then\u65b9\u6cd5\uff0c\u5219then\u65b9\u6cd5\u4f1a\u88ab\u5f02\u6b65\u6267\u884c\\n- c2\u6267\u884c\u540epromise\u7684\u72b6\u6001\u4f1a\u53d8\u4e3arejected\uff0c\u5982\u679cPromise\u6709catch\u65b9\u6cd5\uff0c\u5219catch\u65b9\u6cd5\u4f1a\u88ab\u5f02\u6b65\u6267\u884c\\n- c1\u3001c2\u53ea\u4f1a\u88ab\u6267\u884c\u4e00\u4e2a\\n- then\u51fd\u6570\u4e2d\u7684\u8fd4\u56de\u503c\u53ef\u4ee5\u4efb\u610f\u503c\uff0c\u4e5f\u53ef\u4ee5\u662f\u65b0\u7684promise\uff0c\u4e0d\u53ef\u4ee5\u662f\u672cpromise\uff0c\u4f1a\u62a5\u9519\u63d0\u793a`Chaining cycle detected for promise #<Promise>`\\n- then\u51fd\u6570\u4e2d\u8fd4\u56de\u65b0\u7684promise\u540e\uff0c\u4e0b\u9762\u63a5\u7740\u7684then\u3001catch\u4f1a\u8ddf\u7740\u65b0\u7684promise\u7684\u72b6\u6001\u8d70\\n- \u591a\u4e2athen\u51fd\u6570\u5728promise\u7684\u72b6\u6001\u8f6c\u4e3afulfilled\u4e4b\u540e\u4f1a\u4f9d\u6b21\u5f02\u6b65\u6267\u884c\\n\\n## \u6e90\u7801\\n\\nexecutor\u7684\u9519\u8bef\u6355\u83b7\u6ca1\u6709\u5904\u7406\\n\\n```\\nPENDING = \\"pending\\";\\nFULFILLED = \\"fulfilled\\";\\nREJECTED = \\"rejected\\";\\n\\nclass MyPromise {\\n  state = PENDING;\\n  result = void 0;\\n  _resolveArr = [];\\n  _rejectedArr = [];\\n  constructor(executor) {\\n    const resolve = (value) => {\\n      if (this.state === PENDING) {\\n        this.state = FULFILLED;\\n        this.result = value;\\n        this._resolveArr.forEach((func) => func());\\n      }\\n    };\\n\\n    const reject = (reason) => {\\n      if (this.state === PENDING) {\\n        this.state = REJECTED;\\n        this.result = reason;\\n        this._rejectedArr.forEach((func) => func());\\n      }\\n    };\\n\\n    executor(resolve, reject);\\n  }\\n\\n  _handleSettledFunc(promise, x, resolve, reject) {\\n    // \u68c0\u6d4b\u5faa\u73af\u8c03\u7528\\n    if (x === promise) {\\n      reject(new TypeError(\\"Chaining cycle detected for promise #<Promise>\\"));\\n    }\\n\\n    // then\u4e2d\u8fd4\u56de\u65b0\u7684promise\u65f6\u4f7f\u7528\u65b0promise\u72b6\u6001\u3002x\u4e3a\u5047\u503c\u65f6\u5ffd\u7565.then\u7684\u5224\u65ad\\n    if (x && (typeof x === \\"object\\" || typeof x === \\"function\\")) {\\n      let done = false;\\n      // \u6355\u83b7x.then\u53cathen.call\u7684\u62a5\u9519\\n      try {\\n        const then = x.then;\\n        if (typeof then === \\"function\\") {\\n          then.call(\\n            x,\\n            (y) => {\\n              if (done) {\\n                return;\\n              }\\n              done = true;\\n              this._handleSettledFunc(promise, y, resolve, reject);\\n            },\\n            (r) => {\\n              if (done) {\\n                return;\\n              }\\n              done = true;\\n              reject(r);\\n            }\\n          );\\n        } else { // \u6ca1\u6709\u62a5\u9519\u76f4\u63a5resolve\\n          resolve(x);\\n        }\\n      } catch (e) {\\n        if (done) {\\n          return;\\n        }\\n        done = true;\\n        reject(e);\\n      }\\n    } else {\\n      resolve(x);\\n    }\\n  }\\n\\n  /**\\n   * \u8fd4\u56de\u4e00\u4e2apromise\u5bf9\u8c61\\n   * @param {function} onFulfilled resolve\u540e\u9700\u8981\u6267\u884c\u7684\u51fd\u6570\\n   * @param {function} onRejected reject\u540e\u9700\u8981\u6267\u884c\u7684\u51fd\u6570\\n   * @returns\\n   */\\n  then(onFulfilled, onRejected) {\\n    const promise = new MyPromise((resolve, reject) => {\\n      onFulfilled =\\n        typeof onFulfilled === \\"function\\" ? onFulfilled : (value) => value;\\n      onRejected =\\n        typeof onRejected === \\"function\\"\\n          ? onRejected\\n          : (reason) => {\\n              throw reason;\\n            };\\n\\n      const _handleFunc = (handleFunc) => {\\n        // \u53ea\u80fd\u5728\u8fd9\u4f7f\u7528setTimeout\uff0c\u5426\u5219promise\u53d8\u91cf\u4e0d\u80fd\u4f20\u9012\uff0c\u62a5\u672a\u521d\u59cb\u5316\u7684\u9519\\n        setTimeout(() => {\\n          // \u6355\u83b7handleFunc(this.result)\u4e2d\u7684\u62a5\u9519\\n          try {\\n            this._handleSettledFunc(\\n              promise,\\n              handleFunc(this.result),\\n              resolve,\\n              reject\\n            );\\n          } catch (error) {\\n            reject(error);\\n          }\\n        });\\n      };\\n      // \u8fd4\u56de\u7684\u51fd\u6570\u4f1a\u88ab\u5f02\u6b65\u8c03\u7528\\n      if (this.state === FULFILLED) {\\n        _handleFunc(onFulfilled);\\n      } else if (this.state === REJECTED) {\\n        _handleFunc(onRejected);\\n      } else {\\n        // \u6570\u7ec4\u5f62\u5f0f\u4fdd\u5b58onFulfilled\u3001onRejected\u51fd\u6570\\n        this._resolveArr.push(() => _handleFunc(onFulfilled));\\n        this._rejectedArr.push(() => _handleFunc(onRejected));\\n      }\\n    });\\n    return promise;\\n  }\\n}\\n\\nMyPromise.defer = MyPromise.deferred = function () {\\n  let dfd = {};\\n  dfd.promise = new MyPromise((resolve, reject) => {\\n    dfd.resolve = resolve;\\n    dfd.reject = reject;\\n  });\\n  return dfd;\\n};\\nmodule.exports = MyPromise;\\n```\\n\\n## \u53c2\u8003\u94fe\u63a5\\n\\n<https://promisesaplus.com/>\\n\\n[promises-aplus-tests \u6d4b\u8bd5\u624b\u5199promise\u8fc7\u7a0b - 365/24/60 - \u535a\u5ba2\u56ed](https://www.cnblogs.com/lhx9527/p/14158460.html)\\n\\n<https://juejin.cn/post/6844903796129136654>"},{"id":"/2022/11/05/git-rebase\u4f7f\u7528\u8bb0\u5f55","metadata":{"permalink":"/blog/index/2022/11/05/git-rebase\u4f7f\u7528\u8bb0\u5f55","source":"@site/blog/2022/11/05/git-rebase\u4f7f\u7528\u8bb0\u5f55.md","title":"git rebase\u4f7f\u7528\u8bb0\u5f55","description":"\u4e4b\u524d\u867d\u7136\u542c\u8bf4\u8fc7git\u7684rebase\u547d\u4ee4\uff0c\u4f46\u662f\u4ece\u672a\u4f7f\u7528\u8fc7\uff0c\u6240\u4ee5\u4e0d\u592a\u4e86\u89e3\u3002\u56e0\u4e3a\u4e00\u6b21\u9700\u6c42\u7684\u5c0f\u6539\u52a8\u63d0\u4ea4\u4e86\u5f88\u591a\u65e0\u7528\u7684commit\uff0c\u4e0d\u60f3\u5e26\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4e0a\u88ab\u5acc\u5f03\ud83e\udee3\uff0c\u6240\u4ee5\u5c1d\u8bd5\u4e86\u4e0b\u5982\u4f55\u4f7f\u7528\uff0c\u73b0\u5c06\u4f7f\u7528\u60c5\u51b5\u8bb0\u5f55\u4e0b\u6765\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528\u53c2\u8003\u3002","date":"2022-11-05T00:00:00.000Z","formattedDate":"2022\u5e7411\u67085\u65e5","tags":[{"label":"git","permalink":"/blog/index/tags/git"}],"readingTime":5.965,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"git rebase\u4f7f\u7528\u8bb0\u5f55","toc_max_heading_level":6,"tags":["git"]},"prevItem":{"title":"\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303","permalink":"/blog/index/2022/11/15/\u624b\u5199Promise\u6e90\u7801\u8fc7Promise A+\u89c4\u8303"},"nextItem":{"title":"mobx\u5728react\u4e2d\u7684\u4f7f\u7528","permalink":"/blog/index/2022/10/15/mobx\u5728react\u4e2d\u7684\u4f7f\u7528"}},"content":"\u4e4b\u524d\u867d\u7136\u542c\u8bf4\u8fc7git\u7684rebase\u547d\u4ee4\uff0c\u4f46\u662f\u4ece\u672a\u4f7f\u7528\u8fc7\uff0c\u6240\u4ee5\u4e0d\u592a\u4e86\u89e3\u3002\u56e0\u4e3a\u4e00\u6b21\u9700\u6c42\u7684\u5c0f\u6539\u52a8\u63d0\u4ea4\u4e86\u5f88\u591a\u65e0\u7528\u7684commit\uff0c\u4e0d\u60f3\u5e26\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4e0a\u88ab\u5acc\u5f03\ud83e\udee3\uff0c\u6240\u4ee5\u5c1d\u8bd5\u4e86\u4e0b\u5982\u4f55\u4f7f\u7528\uff0c\u73b0\u5c06\u4f7f\u7528\u60c5\u51b5\u8bb0\u5f55\u4e0b\u6765\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528\u53c2\u8003\u3002\\n\\n\u547d\u4ee4\u4f5c\u7528\\n\\n- \u53ef\u4ee5\u5c06\u591a\u4e2acommit\u5408\u5e76\u6210\u4e00\u4e2a\\n- \u53ef\u4ee5\u8ba9git graph\u66f4\u597d\u770b\u4e00\u70b9\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u547d\u4ee4\u4f7f\u7528\\n\\ngit rebase\u7684\u547d\u4ee4\u5f62\u5f0f\u5982\u4e0b\\n\\n```\\ngit rebase -i [startpoint]  [endpoint]\\n```\\n\\n`startpoint`\u548c`endpoint`\u5c31\u662fcommitid\u3002rebase\u7684\u533a\u95f4\u8303\u56f4\u7528\u6570\u5b66\u96c6\u5408\u7684\u5f62\u5f0f\u8868\u793a\u4e3a`(startpoint, endpoint]`\u3002\\n\\n## \u6848\u4f8b\u63cf\u8ff0\\n\\n\u73b0\u5728\u6211\u4eec\u7684\u672c\u5730\u53ca\u8fdc\u7a0b\u4ed3\u5e93\u7684\u63d0\u4ea4\u8bb0\u5f55\u957f\u8fd9\u4e2a\u6837\u5b50\\n\\n![base](./git-rebase\u4f7f\u7528\u8bb0\u5f55/base.png)\\n\\n![log](./git-rebase\u4f7f\u7528\u8bb0\u5f55/log.png)\\n\\n\u6587\u4ef6\u5185\u5bb9\u957f\u8fd9\u6837\\n\\n![content](./git-rebase\u4f7f\u7528\u8bb0\u5f55/content.image)\\n\\n## \u7b2c\u4e00\u6b65\\n\\n\u9996\u5148\u8981\u660e\u786e\u6211\u4eec\u7684\u76ee\u6807\u662f\u4ec0\u4e48\uff1f\\n\\n\u6211\u4eec\u7684\u76ee\u6807\u5c31\u662f\u628a\u300c\u505a\u6d4b\u8bd5\u300d\u4e4b\u540e\u7684commit\u5408\u5e76\u6210\u4e00\u4e2a\u5e76\u7136\u540e\u63d0\u4ea4\u5230\u8fdc\u7a0b\u3002\u5373\u4e0b\u56fe\u4e2d\u6846\u9009\u7684commit\u5408\u5e76\u6210\u4e00\u4e2a\uff0c\u4e14\u63d0\u4ea4\u5185\u5bb9\u4fee\u6539\u4e3a`feat: add file & write content`\\n\\n![first](./git-rebase\u4f7f\u7528\u8bb0\u5f55/first.png)\\n\\n## \u7b2c\u4e8c\u6b65\\n\\n\u4e3a\u4e86\u5b9e\u73b0\u6211\u4eec\u7684\u76ee\u7684\uff0c\u6211\u4eec\u9700\u8981\u627e\u5230\u8981rebase\u7684commitid\u3002\u6848\u4f8b\u4e2d\u8981rebase\u7684`startpoint`\u5c31\u662f\u300c\u505a\u6d4b\u8bd5\u300d\u7684commitId\uff0c\u5373\u4e3a`ed5476e`\uff1b\u6839\u636e\u9700\u6c42\u53d1\u73b0\u9700\u8981rebase\u5230\u5f53\u524d\u6240\u5728\u7684commit\uff0c\u5219`endpoint`\u4f7f\u7528\u7f3a\u7701\u503c\u5373\u53ef\u3002\u5728\u672c\u4f8b\u4e2d\u5373\u4e3a\uff1a\\n\\n```shell\\ngit rebase -i ed5476e\\n```\\n\\n\u56de\u8f66\u4e4b\u540e\u4f1a\u8fdb\u5165\u4e00\u4e2avi\u7f16\u8f91\u6a21\u5f0f\uff0c\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\u3002\\n\\n![second](./git-rebase\u4f7f\u7528\u8bb0\u5f55/second.image)\\n\\n\u56fe\u4e2d\u6846\u9009\u7684\u5c31\u662f\u4e00\u4e9b\u53ef\u4ee5\u5728vi\u7f16\u8f91\u91cc\u4f7f\u7528\u7684\u547d\u4ee4\uff0c\u7528\u6765\u64cd\u4f5crebase\u7684commit\u3002\\n\\n\u4e3a\u4e86\u5b9e\u73b0\u6211\u4eec\u7684\u76ee\u7684\uff0c\u6211\u4eec\u505a\u5982\u4e0b\u5904\u7406\\n\\n![second2](./git-rebase\u4f7f\u7528\u8bb0\u5f55/second2.image)\\n\\n\u4fdd\u5b58\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u4fee\u6539rebase\u4e2d\u7684\u7b2c\u4e00\u4e2acommit\'s message\\n\\n![second3](./git-rebase\u4f7f\u7528\u8bb0\u5f55/second3.image)\\n\\n\u6211\u4eec\u4fee\u6539\u5185\u5bb9\u4e3a`feat: add file & write content`\u540e\u4fdd\u5b58\uff0c\u4f1a\u9000\u51favi\u6a21\u5f0f\u56de\u5230\u63a7\u5236\u53f0\uff0c\u5373\u4e3arebase\u5b8c\u6210\\n\\n![second4](./git-rebase\u4f7f\u7528\u8bb0\u5f55/second4.image)\\n\\n![second5](./git-rebase\u4f7f\u7528\u8bb0\u5f55/second5.png)\\n\\n## \u7b2c\u4e09\u6b65\\n\\n\u4e0a\u7ebf\u7684\u4fee\u6539\u90fd\u662f\u5728\u672c\u5730\u5904\u7406\u7684\uff0c\u4f46\u65e2\u7136\u6211\u4eec\u5df2\u7ecfrebase\u5b8c\u6210\uff0c\u90a3\u63a5\u4e0b\u6765\u5c31\u8981\u8fdb\u884c\u53d1\u8d77mr\u7684\u524d\u4e00\u6b65\u4e86\uff1a\u63a8\u9001\u4ee3\u7801\u5230\u8fdc\u7a0b\u4ed3\u5e93\\n\\n```\\ngit rebase origin test-a\\n```\\n\\n\u4f46\u662f\u547d\u4ee4\u6267\u884c\u8fc7\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\uff0c\u63a8\u9001\u88ab\u62d2\u7edd\u3002\\n\\n![third](./git-rebase\u4f7f\u7528\u8bb0\u5f55/third.png)\\n\\n\u56e0\u4e3a\u672c\u5730\u7684commit\u8bb0\u5f55\u5df2\u7ecf\u548c\u8fdc\u7aef\u7684\u4e0d\u4e00\u81f4\u4e86\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u662frebase\uff0c\u6ca1\u6709\u505a\u4ee3\u7801\u4e0a\u66f4\u6539\uff0c\u6240\u4ee5\u5f3a\u5236\u63a8\u9001\u5373\u53ef\\n\\n```\\ngit rebase origin test-a -f\\n```\\n\\n\u8fdc\u7a0b\u4ed3\u5e93\u8be5\u5206\u652f\u7684\u63d0\u4ea4\u8bb0\u5f55\u5c31\u4f1a\u88ab\u4fee\u6539\uff0c\u4f46\u662f\u63d0\u4ea4\u65f6\u95f4\u8fd8\u662frebase\u4e4b\u524d\u7684\u63d0\u4ea4\u65f6\u95f4\u3002\\n\\n![third2](./git-rebase\u4f7f\u7528\u8bb0\u5f55/third2.png)\\n\\n![third3](./git-rebase\u4f7f\u7528\u8bb0\u5f55/third3.image)\\n\\n## \u5982\u4f55\u64a4\u56derebase\uff1f\\n\\n\u5b9e\u9645\u5de5\u4f5c\u4e2d\u6211\u4eec\u5728rebase\u5b8c\u6210\u540e\u53ef\u80fd\u4f1a\u89c9\u5f97\u4e0d\u6ee1\u610f\uff0c\u60f3\u8981\u64a4\u56de\u672c\u6b21rebase\u3002\u5bf9\u4e8e\u8fd9\u79cd\u9700\u6c42\u4e5f\u662f\u6709\u5e94\u5bf9\u65b9\u6cd5\u7684\u3002\\n\\n### \u67e5\u770b\u6240\u6709\u5386\u53f2commit\u8bb0\u5f55\\n\\n```\\ngit reflog\\n```\\n\\n\u5728\u672c\u4f8b\u4e2d\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\uff0c\u56e0\u4e3a\u4e0d\u505c\u7684\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\uff0c\u8bb0\u5f55\u5df2\u7ecf\u6709\u5f88\u591a\u4e86\ud83e\udd79\\n\\n![all](./git-rebase\u4f7f\u7528\u8bb0\u5f55/all.png)\\n\\n### \u5e94\u7528\u5bf9\u5e94\u7684commit\\n\\n\u4ece\u4e0a\u9762\u7684\u8bb0\u5f55\u91cc\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u60f3\u56de\u5230\u7684commit\u3002\u53ef\u4ee5\u627e\u5230`0ce6f7a`\uff0c\u5728\u8fd9\u91cc\u6709`feat: seven`\u7684\u63d0\u4ea4\u8bb0\u5f55\\n\\n```\\n# \u5982\u679c\u60f3\u8981\u5e9f\u5f03\u672c\u5730\u5185\u5bb9\u76f4\u63a5\u5e94\u7528\u63d0\u4ea4\u8bb0\u5f55\u4e0a\u7684\u6539\u53d8\u53ef\u4ee5\u4f7f\u7528\u300c--hard\u300d\u5b9e\u73b0\u6548\u679c\uff1b\u5426\u5219\u53ef\u4ee5\u4e0d\u8981\\ngit reset --hard 0ce6f7a\\n```\\n\\n\u6267\u884c\u547d\u4ee4\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\uff0c\u4e4b\u524d\u7684\u63d0\u4ea4\u8bb0\u5f55\u53c8\u56de\u6765\u4e86\\n\\n![commit](./git-rebase\u4f7f\u7528\u8bb0\u5f55/commit.png)\\n\\n## \u4e86\u89e3\u4e00\u4e9b\u547d\u4ee4\u53c2\u6570\\n\\n\u4e3a\u4e86\u63a2\u7a76\u4e00\u4e9b\u53c2\u6570\u7684\u4f7f\u7528\u6548\u679c\uff0c\u6211\u4eec\u5bf9\u4e4b\u524d\u7684commit\u505a\u5982\u4e0b\u5904\u7406\\n\\n![params](./git-rebase\u4f7f\u7528\u8bb0\u5f55/params.image)\\n\\n\u4fdd\u5b58\u4e4b\u540e\u4f1a\u8fdb\u5165\u53e6\u4e00\u4e2avi\u6a21\u5f0f\uff0c\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\u3002\u5176\u5b9e\u5c31\u662f\u4fee\u6539rebase\u7684\u7b2c\u4e00\u4e2acommit\u7684message\\n\\n![params2](./git-rebase\u4f7f\u7528\u8bb0\u5f55/params2.image)\\n\\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7f16\u8f91message\u4e3a`feat: add file & write content`\\n\\n![params3](./git-rebase\u4f7f\u7528\u8bb0\u5f55/params3.image)\\n\\n\u4fdd\u5b58\u4e4b\u540e\u8fdb\u5165\u5230\u6700\u540e\u7684commit message\u4fee\u6539vi\u6a21\u5f0f\uff0c\u56e0\u4e3a\u60f3\u770b\u4e0b\u4e0d\u540c\u7684\u53c2\u6570\u4f1a\u6709\u4ec0\u4e48\u6548\u679c\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u505a\u4fee\u6539\u76f4\u63a5\u4fdd\u5b58\u3002\\n\\n![params4](./git-rebase\u4f7f\u7528\u8bb0\u5f55/params4.image)\\n\\n\u4fdd\u5b58\u4e4b\u540e\u5c31\u9000\u51fa\u4e86vi\u56de\u5230\u4e86\u63a7\u5236\u53f0\uff0c\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\\n\\n![params5](./git-rebase\u4f7f\u7528\u8bb0\u5f55/params5.png)\\n\\n\u90a3\u6211\u4eec\u7684rebase\u73b0\u5728\u662f\u4ec0\u4e48\u6548\u679c\u5462\uff1f\u4f7f\u7528`git log`\u547d\u4ee4\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\\n\\n![params6](./git-rebase\u4f7f\u7528\u8bb0\u5f55/params6.png)\\n\\n\u603b\u7ed3\u53c2\u6570\u4f7f\u7528\u7684\u6548\u679c\u5c31\u662f\\n\\n- r\uff0creword\\n  - \u4fdd\u7559commit\u6709\u673a\u4f1a\u4fee\u6539commit message\\n- p\uff0cpick\\n  - \u4fdd\u7559commit\u53cacommit message\\n- s\uff0csquash\\n  - \u4fdd\u7559commit\u4f46commit message\u4f1a\u878d\u5165\u524d\u4e00\u6b21\u7684commit message\\n- f\uff0cfixup\\n  - \u4fdd\u7559commit\u4f46\u5e9f\u5f03commit message\\n\\n## \u53c2\u8003\u6587\u7ae0\\n\\nhttps://juejin.cn/post/6844903600976576519\\nhttps://www.jianshu.com/p/7e4cef3863e7"},{"id":"/2022/10/15/mobx\u5728react\u4e2d\u7684\u4f7f\u7528","metadata":{"permalink":"/blog/index/2022/10/15/mobx\u5728react\u4e2d\u7684\u4f7f\u7528","source":"@site/blog/2022/10/15/mobx\u5728react\u4e2d\u7684\u4f7f\u7528.md","title":"mobx\u5728react\u4e2d\u7684\u4f7f\u7528","description":"\u5b89\u88c5\u4f9d\u8d56\u5305","date":"2022-10-15T00:00:00.000Z","formattedDate":"2022\u5e7410\u670815\u65e5","tags":[{"label":"react","permalink":"/blog/index/tags/react"},{"label":"mobx","permalink":"/blog/index/tags/mobx"}],"readingTime":5.635,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"mobx\u5728react\u4e2d\u7684\u4f7f\u7528","toc_max_heading_level":6,"tags":["react","mobx"]},"prevItem":{"title":"git rebase\u4f7f\u7528\u8bb0\u5f55","permalink":"/blog/index/2022/11/05/git-rebase\u4f7f\u7528\u8bb0\u5f55"},"nextItem":{"title":"SharedWorker\u4f7f\u7528\u603b\u7ed3","permalink":"/blog/index/2022/10/14/SharedWorker\u4f7f\u7528\u603b\u7ed3"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u5b89\u88c5\u4f9d\u8d56\u5305\\n\\n```sh\\nnpm i mobx-react@6.1.3 mobx@5.13.0\\n# or\\nyarn add mobx-react@6.1.3 mobx@5.13.0\\n```\\n\\n## \u6838\u5fc3api\\n\\n### \u5b9a\u4e49\u53ef\u89c2\u5bdf\u6570\u636e\\n\\n\u5047\u8bbe\u58f0\u660e\u53ef\u89c2\u5bdf\u6570\u636e\u7684\u6587\u4ef6\u540d\u4e3a`test.js`\\n\\n#### \u65b9\u5f0f\u4e00\\n\\n\u4f7f\u7528`observable()`\u51fd\u6570\\n\\n```js\\nimport { observable } from \\"mobx\\";\\n\\nexport default observable({\\n  name: \\"xxxx\\",\\n  age: 20,\\n});\\n```\\n\\n#### \u65b9\u5f0f\u4e8c\\n\\n\u4f7f\u7528\u5728`class`\u4e0a\u4f7f\u7528\u88c5\u9970\u5668\\n\\n```js\\nclass Test {\\n  @observable name = \\"123\\";\\n  @observable age = 20;\\n}\\n\\nexport default new Test();\\n```\\n\\n### \u58f0\u660e\u8981\u76d1\u6d4b\u6570\u636e\u7684\u89c6\u56fe\\n\\n\u5728\u89c6\u56fe\u4e2d\u4f7f\u7528\u7684\u53ef\u89c2\u5bdf\u6570\u636e\u53d1\u751f\u53d8\u5316\u540e\uff0cmobx\u4f1a\u4f7f\u5f53\u524d\u4f7f\u7528\u53ef\u89c2\u5bdf\u6570\u636e\u7684\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\\n\\n#### \u7c7b\u7ec4\u4ef6\\n\\n\u4f7f\u7528`@observer`\u88c5\u9970\u5668.\u5982\u679c`TestComponent`\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u7684\u53ef\u89c2\u5bdf\u6570\u636e\u53d1\u751f\u53d8\u5316\uff0c\u8be5\u7ec4\u4ef6\u4f1a\u88ab\u91cd\u65b0\u6e32\u67d3\u3002\\n**\u53ea\u80fd\u76d1\u6d4b\u5f53\u524d\u7ec4\u4ef6\uff0c\u4e0d\u80fd\u6df1\u5165\u5b50\u7ec4\u4ef6\u3002\u60f3\u8981\u6df1\u5165\u5b50\u7ec4\u4ef6\uff0c\u9700\u8981\u5b50\u7ec4\u4ef6\u4f7f\u7528`@observer`**\\n\\n```js\\nimport { observer } from \\"mobx-react\\";\\nimport MobxData from \\"./test.js\\";\\n@observer\\nclass TestComponent extends React.Component {\\n  render() {\\n    // use observable data\\n    return <div>{MobxData.name}</div>;\\n  }\\n}\\n```\\n\\n#### \u51fd\u6570\u5f0f\u7ec4\u4ef6\\n\\n\u4f7f\u7528`useObserver()`\u6216\u8005`observer()`\u3002**\u53ea\u80fd\u76d1\u6d4b\u5f53\u524d\u5305\u88f9\u7684\u5185\u5bb9\uff0c\u4e0d\u80fd\u6df1\u5165\u5b50\u7ec4\u4ef6\u3002\u60f3\u8981\u6df1\u5165\u5b50\u7ec4\u4ef6\uff0c\u9700\u8981\u5b50\u7ec4\u4ef6\u4f7f\u7528`useObserver()`\u6216`observer()`**\\n\\n```js\\nimport { useObserver } from \\"mobx-react\\";\\nimport MobxData from \\"./test.js\\";\\nconst TestComponent = observer(() => {\\n  // use observable data\\n  return <div>{MobxData.name}</div>;\\n});\\n\\n// function TestComponent() {\\n//    // use observable data\\n//    return useObserver(() => <div>{MobxData.name}</div>);\\n// });\\n```\\n\\n## \u4ee3\u7801\u5b9e\u73b0\\n\\n\u4f7f\u7528\u51fd\u6570\u5f0f\u7ec4\u4ef6\u6f14\u793a\\n\\n### \u5b9a\u4e49\u5171\u4eab\u6570\u636e\\n\\n```js\\nimport { action, observable } from \\"mobx\\";\\n\\n// \u4f7f\u7528\u88c5\u9970\u5668\\n// class MobxData {\\n//   @observable name = \'zoe\';\\n//   @observable age = 12\\n\\n//   @action.bound\\n//   setName(name: string) {\\n//     this.name = name\\n//   }\\n\\n// }\\n\\n// export default new MobxData()\\n\\nexport default observable({\\n  name: \\"xxx\\",\\n  age: 18,\\n});\\n```\\n\\n### \u521b\u5efa\u7ec4\u4ef6\\n\\n```jsx\\nimport React from \\"react\\";\\nimport { useObserver } from \\"mobx-react\\";\\nimport commonData from \\"./MobxData\\";\\n\\nfunction Child() {\\n  const onClick = () => {\\n    commonData.name = Math.random() * 100 + \\"_zhangsan\\";\\n  };\\n  console.log(\\"child render\\");\\n  return useObserver(() => (\\n    <div>\\n      Welcome {commonData.name}!You\'re 12 years old.\\n      <button onClick={onClick}>change name</button>\\n    </div>\\n  ));\\n}\\nfunction Child2() {\\n  const onClick = () => {\\n    commonData.age = Math.random() * 100;\\n  };\\n  console.log(\\"child2 render\\");\\n  return useObserver(() => (\\n    <div>\\n      Welcome xxx!You\'re {commonData.age} years old.\\n      <button onClick={onClick}>change age</button>\\n    </div>\\n  ));\\n}\\n\\n// const Child2 = observer(() => {\\n//   const onClick = () => {\\n//     commonData.age = Math.random() * 100\\n//   }\\n//   console.log(\'child2 render\')\\n//   return (\\n//     <div>\\n//         Welcome xxx!You\'re {commonData.age} years old.\\n//         <button onClick={onClick}>change age</button>\\n//     </div>\\n//   )\\n// })\\n\\nfunction Parent() {\\n  return useObserver(() => (\\n    <>\\n      <Child />\\n      <Child2 />\\n      <button\\n        onClick={() => {\\n          commonData.name = Math.random() * 100 + \\"_qweqweqwe\\";\\n        }}\\n      >\\n        \u4fee\u6539\u540d\u5b57\\n      </button>\\n    </>\\n  ));\\n}\\n\\n// const Parent = observer(() => (\\n//   <>\\n//     <Child/>\\n//     <Child2/>\\n//     <button onClick={() => {\\n//       commonData.name = Math.random() * 100 + \'_qweqweqwe\'\\n//     }}>\u4fee\u6539\u540d\u5b57</button>\\n//   </>\\n// ))\\n\\n// @observer\\n// class Parent extends React.Component{\\n//   render() {\\n//     return (\\n//       <>\\n//         <Child/>\\n//         <Child2/>\\n//         <button onClick={() => {\\n//           commonData.name = Math.random() * 100 + \'_qweqweqwe\'\\n//         }}>\u4fee\u6539\u540d\u5b57</button>\\n//       </>\\n//     )\\n//   }\\n// }\\n\\nexport default function App() {\\n  return (\\n    <div>\\n      App\\n      <Parent />\\n    </div>\\n  );\\n}\\n```\\n\\n### \u4e3b\u6587\u4ef6\\n\\n```js\\nimport ReactDOM from \\"react-dom\\";\\nimport Parent from \\"./Parent\\";\\n\\nReactDOM.render(<Parent />, document.querySelector(\\"#root\\"));\\n```\\n\\n## \u603b\u7ed3\\n\\n- \u8d77\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f7f\u7528`mobx`\u7684`observable()`\u6216\u8005`@observable`\u521b\u5efa\u5171\u4eab\u6570\u636e\u5e76\u5bfc\u51fa\\n- \u5728\u89c6\u56fe\u4e2d\u4f7f\u7528`mobx-react`\u7684`useObserver()`\u6216\u8005`observer()`\u6216\u8005`@observer`\u76d1\u6d4b\u7ec4\u4ef6\u4e2d\u53ef\u89c2\u5bdf\u6570\u636e\u7684\u53d8\u5316\\n  - \u5728\u67d0\u7ec4\u4ef6\u4f7f\u7528\u7684\u53ef\u89c2\u5bdf\u6570\u636e\u53d1\u751f\u53d8\u5316\u65f6\u8be5\u7ec4\u4ef6\u4f1a\u88ab`rerender`\\n\\n## \u586b\u8111\u5751\\n\\n### `@action`\u548c`@action.bound`\u6709\u4ec0\u4e48\u533a\u522b\uff1f\\n\\n\u793a\u4f8b\u4ee3\u7801\\n\\n```js\\nimport { action } from \\"mobx\\";\\nclass Store {\\n  unbound() {\\n    console.log(\\"unbound\\", this);\\n  }\\n  arrow = () => {\\n    console.log(\\"arrow\\", this);\\n  };\\n  @action unboundAction() {\\n    console.log(\\"unboundAction\\", this);\\n  }\\n  @action.bound unboundActionBound() {\\n    console.log(\\"unboundActionBound\\", this);\\n  }\\n  @action arrowAction = () => {\\n    console.log(\\"arrowAction\\", this);\\n  };\\n  @action.bound arrowActionBound = () => {\\n    console.log(\\"arrowActionBound\\", this);\\n  };\\n}\\n\\nconst store = new Store();\\nconst unbound = store.unbound;\\nconst arrow = store.arrow;\\nconst unboundAction = store.unboundAction;\\nconst arrowAction = store.arrowAction;\\nconst unboundActionBound = store.unboundActionBound;\\nconst arrowActionBound = store.arrowActionBound;\\nconsole.log(store);\\nunbound();\\narrow();\\nunboundAction();\\narrowAction();\\nunboundActionBound();\\narrowActionBound();\\n```\\n\\n\u8fd0\u884c\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u65e5\u5fd7\u8f93\u51fa\u5982\u4e0b\\n\\n![log](./mobx\u5728react\u4e2d\u7684\u4f7f\u7528/log.png)\\n\\n\u5bf9\u539f\u578b\u7684\u5f71\u54cd\uff1a\\n\\n![prototype](./mobx\u5728react\u4e2d\u7684\u4f7f\u7528/proto.png)\\n\\n\u5bf9this\u7684\u5f71\u54cd\\n\\n![this](./mobx\u5728react\u4e2d\u7684\u4f7f\u7528/this.png)\\n\\n\u4f46\u662fmobx\u4e0d\u63a8\u8350`action.bound`\u548c\u7bad\u5934\u51fd\u6570\u4e00\u8d77\u4f7f\u7528\\n\\n> *\u6ce8\u610f:\xa0*action.bound*\xa0\u4e0d\u8981\u548c\u7bad\u5934\u51fd\u6570\u4e00\u8d77\u4f7f\u7528\uff1b\u7bad\u5934\u51fd\u6570\u5df2\u7ecf\u662f\u7ed1\u5b9a\u8fc7\u7684\u5e76\u4e14\u4e0d\u80fd\u91cd\u65b0\u7ed1\u5b9a\u3002*\\n\\n### `useObserver()`\u548c`observer()`\u7684\u533a\u522b\uff1f\\n\\n- `useObserver()`\u5728\u51fd\u6570\u5185\u4f7f\u7528\u3002\u76d1\u6d4b\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4f7f\u7528\u65b9\u5f0f\u50cf`useMemo`\\n- `observer()`\u5728\u51fd\u6570\u5916\u4f7f\u7528\u3002\u76d1\u6d4b\u9ad8\u9636\u7ec4\u4ef6\uff0c\u4f7f\u7528\u65b9\u5f0f\u50cf`React.memo`\\n\\n\u4ee5\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e3a\u4f8b\\n\\n```js\\nconst Parent = observer(() => (\\n  <>\\n    <Child />\\n    <Child2 />\\n    <button\\n      onClick={() => {\\n        commonData.name = Math.random() * 100 + \\"_qweqweqwe\\";\\n      }}\\n    >\\n      \u4fee\u6539\u540d\u5b57\\n    </button>\\n  </>\\n));\\n\\nfunction Parent() {\\n  return useObserver(() => (\\n    <>\\n      <Child />\\n      <Child2 />\\n      <button\\n        onClick={() => {\\n          commonData.name = Math.random() * 100 + \\"_qweqweqwe\\";\\n        }}\\n      >\\n        \u4fee\u6539\u540d\u5b57\\n      </button>\\n    </>\\n  ));\\n}\\n```\\n\\n## \u53c2\u8003\u94fe\u63a5\\n\\n[action (\u52a8\u4f5c)](https://cn.mobx.js.org/refguide/action.html)\\n\\n[React \u72b6\u6001\u7ba1\u7406\u5de5\u5177 Mobx \u57fa\u672c\u4f7f\u7528\\\\_\u3002\u70e6\u5566\u7684\u535a\u5ba2-\u7a0b\u5e8f\u5458\u79d8\u5bc6](https://www.i4k.xyz/article/qq_43293207/117596040)\\n\\nhttps://stackoverflow.com/questions/48639891/difference-between-mobxs-action-bound-and-arrow-functions-on-class-functions"},{"id":"/2022/10/14/SharedWorker\u4f7f\u7528\u603b\u7ed3","metadata":{"permalink":"/blog/index/2022/10/14/SharedWorker\u4f7f\u7528\u603b\u7ed3","source":"@site/blog/2022/10/14/SharedWorker\u4f7f\u7528\u603b\u7ed3.md","title":"SharedWorker\u4f7f\u7528\u603b\u7ed3","description":"\u6700\u8fd1\u6709\u4e2a\u9700\u6c42\u8981\u5728\u6d4f\u89c8\u5668\u9875\u7b7e\u4e4b\u95f4\u5b9e\u73b0\u4fe1\u606f\u5171\u4eab\uff0c\u7531\u7b2c\u4e09\u65b9\u5305\u5904\u7406\u3002\u770b\u8fc7\u4eba\u5bb6\u7684\u6548\u679c\u4ecb\u7ecd\uff0c\u56af\u54e6\uff0c\u95ea\u778e\u6211\u7684\u53cc\u773c\uff01\u6ca1\u89c1\u8bc6\u8fc7\u7684\u6280\u672f\uff0c\u600e\u4e48\u4e5f\u5f97\u770b\u4e00\u770b\u5440\ud83e\uddd0","date":"2022-10-14T00:00:00.000Z","formattedDate":"2022\u5e7410\u670814\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":7.02,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"SharedWorker\u4f7f\u7528\u603b\u7ed3","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"mobx\u5728react\u4e2d\u7684\u4f7f\u7528","permalink":"/blog/index/2022/10/15/mobx\u5728react\u4e2d\u7684\u4f7f\u7528"},"nextItem":{"title":"react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55","permalink":"/blog/index/2022/07/21/react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55"}},"content":"\u6700\u8fd1\u6709\u4e2a\u9700\u6c42\u8981\u5728\u6d4f\u89c8\u5668\u9875\u7b7e\u4e4b\u95f4\u5b9e\u73b0\u4fe1\u606f\u5171\u4eab\uff0c\u7531\u7b2c\u4e09\u65b9\u5305\u5904\u7406\u3002\u770b\u8fc7\u4eba\u5bb6\u7684\u6548\u679c\u4ecb\u7ecd\uff0c\u56af\u54e6\uff0c\u95ea\u778e\u6211\u7684\u53cc\u773c\uff01\u6ca1\u89c1\u8bc6\u8fc7\u7684\u6280\u672f\uff0c\u600e\u4e48\u4e5f\u5f97\u770b\u4e00\u770b\u5440\ud83e\uddd0\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u4ecb\u7ecd\\n\\n> **`SharedWorker`**\xa0\u63a5\u53e3\u4ee3\u8868\u4e00\u79cd\u7279\u5b9a\u7c7b\u578b\u7684 worker\uff0c\u53ef\u4ee5\u4ece\u51e0\u4e2a\u6d4f\u89c8\u4e0a\u4e0b\u6587\u4e2d*\u8bbf\u95ee*\uff0c\u4f8b\u5982\u51e0\u4e2a\u7a97\u53e3\u3001iframe \u6216\u5176\u4ed6 worker\u3002\u5b83\u4eec\u5b9e\u73b0\u4e00\u4e2a\u4e0d\u540c\u4e8e\u666e\u901a worker \u7684\u63a5\u53e3\uff0c**\u5177\u6709\u4e0d\u540c\u7684\u5168\u5c40\u4f5c\u7528\u57df**\uff0c[SharedWorkerGlobalScope](https://developer.mozilla.org/en-US/docs/Web/API/SharedWorkerGlobalScope \\"Currently only available in English (US)\\")\xa0\u3002\\n\\n> **\u5907\u6ce8\uff1a** \xa0\u5982\u679c\u8981\u4f7f\xa0**SharedWorker**\xa0\u8fde\u63a5\u5230\u591a\u4e2a\u4e0d\u540c\u7684\u9875\u9762\uff0c\u8fd9\u4e9b\u9875\u9762\u5fc5\u987b\u662f`\u540c\u6e90`\u7684\uff08\u76f8\u540c\u7684\u534f\u8bae\u3001host \u4ee5\u53ca\u7aef\u53e3\uff09\u3002\\n\\n\u53c8\u79f0\u5171\u4eab\u7ebf\u7a0b\u3002\u4e4b\u6240\u4ee5\u53ef\u4ee5\u5728\u591a\u4e2a\u6d4f\u89c8\u5668\u9875\u7b7e\u4e2d\u5171\u4eab\u4fe1\u606f\uff0c\u662f\u56e0\u4e3a\u5728\u9875\u7b7e\u7684html\u4e2d\u521b\u5efa`SharedWorker`\u65f6\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u76f8\u540c\uff0c\u5219\u89c6\u4e3a\u540c\u4e00\u7ebf\u7a0b\uff0c\u6240\u4ee5\u53ea\u8981\u4fdd\u8bc1\u521b\u5efa\u65f6\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u76f8\u540c\uff0c\u5c31\u53ef\u4ee5\u5728\u591a\u9875\u7b7e\u95f4\u5171\u4eab\u4fe1\u606f\u3002\\n\\n## api\\n\\n\u4e0b\u9762\u7ed9\u4e86\u4e00\u4e9b\u57fa\u672c\u7684api\u4f7f\u7528\u3002\u4ee5\u4e0bapi\u7684\u4f7f\u7528\u90fd\u57fa\u4e8e`SharedWorker`\u7684\u5b9e\u4f8b\u5bf9\u8c61\u7684port\u5c5e\u6027\u3002\\n\\n### \u521b\u5efa\\n\\n\u4f7f\u7528\u6784\u9020\u51fd\u6570`SharedWorker()`\u521b\u5efa`SharedWorker`\u5b9e\u4f8b\u3002\u5b83\u6709\u4e09\u4e2a\u53c2\u6570\u5982\u4e0b\\n\\nMDN\u89e3\u91ca\\n![api](./SharedWork\u4f7f\u7528\u603b\u7ed3/api.png)\\n\\n\u4e3e\u4f8b\\n\\n```js\\nconst sharedWorker = new SharedWorker(\\n  \\"\u88ab\u5171\u4eab\u7684js\u6587\u4ef6url\\",\\n  \\"\u6807\u8bc6woker\u7684\u540d\u5b57\\",\\n  \u53ef\u9009\u5c5e\u6027\u5bf9\u8c61,\\n);\\n```\\n\\n\u81ea\u6211\u201c\u6cbb\u6108\u201d\uff1a\\n\\n\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a\u662f\u88ab\u5171\u4eab\u7684js\u7684url\uff0c**\u8981\u540c\u6e90\uff01** \u5728\u5171\u4eab\u7ebf\u7a0b\u4e2d\uff0c\u6211\u4eec\u603b\u8981\u505a\u70b9\u4ec0\u4e48\u3002\u5728\u54ea\u91cc\u505a\u5462\uff1f\u5c31\u5728\u8fd9\u4e2a\u88ab\u5171\u4eab\u7684js\u6587\u4ef6\u4e2d\u6363\u9f13\u3002\\n\\n\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u53ef\u4ee5\u6807\u8bc6\u5f53\u524d\u7684worker\u3002\u5728\u4e0b\u6587\u63d0\u5230\u7684`\u8c03\u8bd5`\u4e2d\uff0c\u6211\u4eec\u4f1a\u7528\u5230\u3002\u4e3b\u8981\u7528\u6765\u786e\u5b9a\uff0c\u8fd9\u4e2aworker\u662f\u4e0d\u662f\u6211\u4eec\u73b0\u5728\u5199\u7684worker\uff0c\u4e07\u4e00\u6d4f\u89c8\u5668\u91cc\u6709\u5176\u4ed6\u4eba\u5199\u7684worker\u5462\uff1f\\n\\n\u7b2c\u4e09\u4e2a\u53c2\u6570: \u8fd8\u6ca1\u6709\u6df1\u7a76\u8fc7\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4ecb\u7ecd\u4e86\u3002\\n\\n### \u542f\u7528\\n\\n\u8fd9\u91cc\u5148\u968f\u4fbf\u7ed9\u4e2aurl\u505a\u793a\u4f8b\uff5e\\n\\n```js\\nconst sharedWorker = new SharedWorker(\\"sharedWorker.js\\", \\"test worker\\");\\n\\n// \u5f00\u542f\u4e0e\u5171\u4eab\u7ebf\u7a0b\u7684\u8fde\u63a5\\nsharedWorker.port.start();\\n```\\n\\nMDN\u89e3\u91ca\\n![api2](./SharedWork\u4f7f\u7528\u603b\u7ed3/api2.png)\\n\\n\u5173\u4e8e`start()`\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u6587\u4e2d`\u586b\u8111\u5751`\u7684\u7b2c\u4e00\u6761\u3002\\n\\n\u4e0a\u9762\u7684`MessagePort`\u5bf9\u8c61\u5c31\u662f`sharedWorker.port`\u3002\u6240\u6709\u5173\u4e8e\u6d4f\u89c8\u5668\u9875\u7b7e\u548c\u5171\u4eab\u7ebf\u7a0b\u7684\u901a\u4fe1\u90fd\u662f\u901a\u8fc7`sharedWorker.port`\u6765\u63a7\u5236\u548c\u7ba1\u7406\u3002\\n\\n### \u5173\u95ed\\n\\n\u548c\u4e0a\u9762\u7684\u542f\u7528\u57fa\u672c\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u540d\u5b57\u6362\u6210\u4e86`close`\u3002\u5373`sharedWorker.port.close()`\u6267\u884c\u4e4b\u540e\uff0c\u5c31\u5173\u95ed\u4e86\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u7b7e\u4e0e\u5171\u4eab\u7ebf\u7a0b\u95f4\u7684\u8fde\u63a5\uff0c\u4e0d\u518d\u548c\u5171\u4eab\u7ebf\u7a0b\u4e92\u901a\u6d88\u606f\u3002\\n\\n### \u6d88\u606f\u901a\u4fe1\\n\\n\u5c31\u662f`sharedWorker.port.postMessage(message, transferList)`.\\n\\n\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u7b7e\u60f3\u8981\u53d1\u7ed9\u5171\u4eab\u7ebf\u7a0b\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b\\n\\n\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u6682\u4e0d\u6df1\u7a76\\n\\n### \u8c03\u8bd5\\n\\n\u70b9\u51fb\u6253\u5f00\u8c03\u8bd5\u9875\u9762\ud83d\udc49[chrome://inspect/#workers](chrome://inspect/#workers) \u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u5185\u5bb9\\n![debug](./SharedWork\u4f7f\u7528\u603b\u7ed3/debug.png)\\n\u8c03\u8bd5\u63a7\u5236\u53f0\u5927\u5bb6\u53ef\u4ee5\u7406\u89e3\u4e3a`Chrome`\u7684`DevTools`\uff0c\u4e00\u6a21\u4e00\u6837\u3002\u53ef\u4ee5\u5728\u4e0a\u9762\u770b\u5230\u81ea\u5df1\u5728\u5171\u4eabjs\u6587\u4ef6\u4e2d\u5199\u7684`console`\\n\\n## \u2757\ufe0f\u2757\ufe0f\u2757\ufe0f\u6ce8\u610f\\n\\n> - \u5355\u9875\u5e94\u7528\u7684\u65f6\u5019\u8bb0\u5f97\u53ca\u65f6\u5173\u95edworker\uff0c\u5426\u5219\u5e38\u9a7b\\n> - \u6bcf\u521b\u5efa\u4e00\u4e2aworker\uff0c\u5982\u679c\u53c2\u6570url\u90fd\u4e00\u6837\uff0c\u90a3\u4e48\u4f1a**_\u89c6\u4e3a\u4f7f\u7528\u540c\u4e00\u4e2a\u5171\u4eab\u7ebf\u7a0b_**\uff0c\u5171\u4eab\u7ebf\u7a0b\u4f1a\u5206\u914d\u4e00\u4e2aport\u5bf9\u8c61\u6765\u533a\u5206\u4e0d\u540c\u4f7f\u7528\u8005\u3002\u5373`SharedWorker`\u5b9e\u4f8b\u5bf9\u8c61\u7684port\u53ef\u4ee5\u7528\u6765\u533a\u5206\u4e0d\u540c\u7684\u9875\u7b7e\u3002\\n\\n\u5173\u4e8e\u5171\u4eabjs\u6587\u4ef6\\n![commonjs](./SharedWork\u4f7f\u7528\u603b\u7ed3/commonjs.png)\\n\\n\u8fd8\u6709\u4e00\u70b9\u3002\u56e0\u4e3a\u6709\u540c\u6e90\u9650\u5236\uff0c\u6240\u4ee5\u9700\u8981\u5f00\u4e00\u4e2a\u670d\u52a1\u5668\u624d\u80fd\u770b\u5230\u4fe1\u606f\u5171\u4eab\u6548\u679c\u3002\u53ef\u4ee5\u8bd5\u8bd5`VS Code`\u7684`Live Server`\u63d2\u4ef6.\\n\\n## \u6848\u4f8b\\n\\n\u6848\u4f8b\u51c6\u5907\u4e86\u4e24\u4e2a\u6587\u4ef6\uff0c\u4e00\u4e2a\u662f\u5171\u4eab\u7684js\u6587\u4ef6\uff0c\u4e00\u4e2a\u662fhtml\u6587\u4ef6\u3002\\n\\n\u6d4b\u8bd5\u6548\u679c\u7684\u65f6\u5019\uff0c\u6700\u5c11\u5728\u6d4f\u89c8\u5668\u4e0a\u6253\u5f00\u4e24\u4e2a\u76f8\u540c\u7684\u9875\u7b7e\u3002\u65e0\u8bba\u70b9\u51fb\u54ea\u4e2a\u9875\u7b7e\u7684\u3010\u83b7\u53d6\u6d88\u606f\u3011\uff0c\u4e24\u4e2a\u9875\u7b7e\u90fd\u4f1aalert\u4e00\u4e2a3\u51fa\u6765\u3002\\n\\n### \u5171\u4eabjs\u6587\u4ef6\\n\\n`sharedWorker.js`\\n\\n```js\\nlet number = 3;\\n// \u50a8\u5b58\u6240\u6709port\\nthis.ports = [];\\nonconnect = (e) => {\\n  const port = e.ports[0];\\n  !this.ports.includes(port) && this.ports.push(port);\\n  // \u76d1\u542c\u6d4f\u89c8\u5668\u9875\u7b7e\u53d1\u9001\u7684\u6d88\u606f\\n  port.onmessage = (e) => {\\n    switch (e.data) {\\n      case \\"getData\\":\\n        // \u5e7f\u64ad\uff1a\u7ed9\u6240\u6709port\u53d1\u6d88\u606f\\n        broadcast(number);\\n        break;\\n      case \\"close\\":\\n        clearInvalidPort(port);\\n        break;\\n\\n      default:\\n        break;\\n    }\\n  };\\n};\\n\\nfunction broadcast(message) {\\n  console.log(\\"ports\\", this.ports);\\n  this.ports.forEach((port) => {\\n    // \u7ed9\u6d4f\u89c8\u5668\u9875\u7b7e\u53d1\u6d88\u606f\\n    port.postMessage(message);\\n  });\\n}\\n\\nfunction clearInvalidPort(port) {\\n  const index = this.ports.findIndex((item) => item === port);\\n  if (~index) {\\n    this.ports.splice(index, 1);\\n  }\\n}\\n```\\n\\n### html\u6587\u4ef6\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <button id=\\"btn\\">\u83b7\u53d6\u6d88\u606f</button><br />\\n    <button id=\\"closeBtn\\">\u5173\u95edsharedWorker</button>\\n    <script>\\n      let myWorker = new SharedWorker(\\"./sharedWorker.js\\", \\"test worker\\");\\n\\n      // \u76d1\u542c\u5171\u4eab\u7ebf\u7a0b\u4f20\u9012\u7684\u6d88\u606f\\n      myWorker.port.onmessage = (e) => alert(e.data);\\n\\n      btn.addEventListener(\\"click\\", (e) => {\\n        // \u7ed9\u5171\u4eab\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\\n        myWorker.port.postMessage(\\"getData\\");\\n      });\\n      closeBtn.addEventListener(\\"click\\", (e) => {\\n        // \u53d6\u6d88\u8be5port\u5728\u5171\u4eab\u7ebf\u7a0b\u4e2d\u7684\u5b58\u50a8[\u5e7f\u64ad\u7528\u7684]\\n        myWorker.port.postMessage(\\"close\\");\\n        // \u5173\u95ed\u4e0e\u5171\u4eab\u7ebf\u7a0b\u7684\u8fde\u63a5\\n        myWorker.port.close();\\n      });\\n\\n      window.onbeforeunload = () => {\\n        myWorker.port.postMessage(\\"close\\");\\n        myWorker.port.close();\\n      };\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n## \u586b\u8111\u5751\\n\\n\u81ea\u5df1\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u4e0d\u7406\u89e3\u7684\u70b9\u3002\\n\\n### MessagePort\u5bf9\u8c61\u4e00\u5b9a\u8981\u8c03\u7528start()\u5417\uff1f\\n\\n\u4e0d\u4e00\u5b9a\u3002\\n\\n- \u5982\u679c\u7ed9`MessagePort`\u5bf9\u8c61\u7684`onmessage`\u5c5e\u6027\u8d4b\u503c\uff0c\u5c31\u9ed8\u8ba4\u5f00\u542f\u4e0e\u5171\u4eab\u7ebf\u7a0b\u7684\u8fde\u63a5\u3002\\n- \u5982\u679c\u5bf9\u8c61\u4f7f\u7528`addEventListener()`\u76d1\u542c`message`\uff0c\u5c31\u9700\u8981\u8c03\u7528`start()`\\n\\n### \u5171\u4eabjs\u6587\u4ef6\u4e2d\u7684onconnect\u51fd\u6570\u4e3a\u4ec0\u4e48\u7528e.port[0]\u83b7\u53d6port\u5bf9\u8c61\uff1f\u6ca1\u6709\u5176\u4ed6\u7684\u83b7\u53d6\u65b9\u5f0f\u4e86\u5417\uff1f\\n\\n\u56e0\u4e3a`e.port`\u662f\u53ea\u5305\u62ec\u4e00\u4e2a`MessagePort`\u5bf9\u8c61\u7684\u6570\u7ec4\u3002\u6ca1\u6709\u5176\u4ed6\u65b9\u5f0f\u3002\\n\\n### \u5171\u4eabjs\u6587\u4ef6\u4e2donconnect\u600e\u4e48\u89e3\u91ca\uff1f\\n\\n\u65b0\u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\u3002\\n[\u5177\u4f53\u53ef\u4ee5\u770b\u4e0b\u8fd9\u91cc](https://developer.mozilla.org/en-US/docs/Web/API/SharedWorkerGlobalScope/connect_event)\\n\\n## \u53c2\u8003\u94fe\u63a5\\n\\n[MDN SharedWorker](https://developer.mozilla.org/zh-CN/docs/Web/API/SharedWorker)\\n\\n[MDN MessagePort](https://developer.mozilla.org/zh-CN/docs/Web/API/MessagePort)\\n\\n[MDN postMessage](https://developer.mozilla.org/en-US/docs/Web/API/MessagePort/postMessage)\\n\\n[sharedWorker \u5b9e\u73b0\u591a\u9875\u9762\u901a\u4fe1](https://www.cnblogs.com/imgss/p/14634577.html)\\n\\n[JS SharedWorker\u8be6\u7ec6\u4ecb\u7ecd/\u5e7f\u64ad/Vue\u4f7f\u7528](https://blog.csdn.net/iamlujingtao/article/details/122078713)"},{"id":"/2022/07/21/react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55","metadata":{"permalink":"/blog/index/2022/07/21/react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55","source":"@site/blog/2022/07/21/react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55.md","title":"react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55","description":"1. useState","date":"2022-07-21T00:00:00.000Z","formattedDate":"2022\u5e747\u670821\u65e5","tags":[{"label":"react","permalink":"/blog/index/tags/react"}],"readingTime":5.345,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55","toc_max_heading_level":6,"tags":["react"]},"prevItem":{"title":"SharedWorker\u4f7f\u7528\u603b\u7ed3","permalink":"/blog/index/2022/10/14/SharedWorker\u4f7f\u7528\u603b\u7ed3"},"nextItem":{"title":"\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f","permalink":"/blog/index/2022/04/07/\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f"}},"content":"\x3c!-- truncate --\x3e\\n\\n## 1. useState\\n\\nstate\u53d1\u751f\u53d8\u5316\u4f1a\u5f15\u8d77\u7ec4\u4ef6\u7684\u91cd\u65b0render\\n\\n```ts\\nimport { useState } from \'react\'\\nexport default function Test() {\\n    const [num, setNum] = useState(0);\\n    return <div onClick={() => {\\n        setNum(v => v + 1);\\n        // setNum(num + 1);\\n    }}>\\n    This is a test demo.<br/>\\n    The current num is ${num}\\n    </div>\\n}\\n```\\n\\n==setNum(v => v + 1)\u4e0esetNum(num + 1)\u6548\u679c\u4e00\u6837==\\n\\n## 2. useEffect\\n\\n- \u4f9d\u8d56\u4e0d\u540c\u6709\u4e0d\u540c\u7684\u5f71\u54cd\\n  - \u6ca1\u6709\u4f9d\u8d56\\n    - \u6bcf\u6b21render\u6267\u884c\u540e\u90fd\u4f1a\u6267\u884c\\n  - \u4f9d\u8d56\u662f\u4e00\u4e2a\u7a7a\u6570\u7ec4\\n    - \u7b2c\u4e00\u6b21render\u6267\u884c\u540e\u6267\u884c\\n  - \u4f9d\u8d56\u4e2d\u6709\u5185\u5bb9\\n    - \u7b2c\u4e00\u6b21render\u6267\u884c/\u4f9d\u8d56\u7684\u5185\u5bb9\u53d1\u751f\u53d8\u5316\u540e\u6267\u884c\\n- \u662f\u5426\u6709\u8fd4\u56de\u503c\u7684\u5f71\u54cd\\n  - \u6709\u8fd4\u56de\u503c\\n    - \u8be5useEffect(\u4e0d\u5f71\u54cd\u5176\u4ed6useEffect)\u5728\u4e0b\u6b21\u88ab\u6267\u884c\u524d/\u7ec4\u4ef6\u5378\u8f7d\u65f6\u4f1a\u6267\u884c\u5b83\u7684\u8fd4\u56de\u503c\u3002\u53ef\u4ee5\u7528\u6765\u5904\u7406\u4e8b\u4ef6\u7684\u89e3\u7ed1\\n  - \u65e0\u8fd4\u56de\u503c\\n    - \u65e0\u5f71\u54cd\\n\\n```ts\\nimport { useState, useEffect, useRef } from \'react\'\\nexport default function Test() {\\n    const [num, setNum] = useState(0);\\n    const ref = useRef(null);\\n    useEffect(() => {\\n        console.log(\'\u51fd\u6570\u6bcf\u6b21render\u6211\u90fd\u4f1a\u6267\u884c\')\\n    });\\n\\n    useEffect(() => {\\n        console.log(\'\u6211\u4ec5\u5728\u51fd\u6570\u7b2c\u4e00\u6b21render\u540e\u548cnum\u53d1\u751f\u53d8\u5316\u540e\u6267\u884c\')\\n    }, [num]);\\n\\n    useEffect(() => {\\n        console.log(\'\u6211\u4ec5\u5728\u51fd\u6570\u7b2c\u4e00\u6b21render\u540e\u6267\u884c\')\\n        const mouseEnterFunc = () => {\\n            console.log(\'\u89e6\u53d1\u4e86mouseenter\u51fd\u6570\')\\n        }\\n        ref.current.addEventListener(\'mouseenter\', mouseEnterFunc);\\n        return () => {\\n            ref.current.removeEventListener(\'mouseenter\', mouseEnterFunc);\\n        }\\n    }, []);\\n    return <div ref={ref} onClick={() => {\\n        setNum(v => v + 1);\\n        // setNum(num + 1);\\n    }}>\\n    This is a test demo.<br/>\\n    The current num is ${num}\\n    </div>\\n}\\n```\\n\\n## 3. useCallback\\n\\n\u8fd4\u56de\u4f20\u5165\u7684\u51fd\u6570\uff0c\u4f9d\u8d56\u5f71\u54cd\u540cuseEffect\\n\u7528\u6765\u4fdd\u8bc1\u5728\u4f9d\u8d56\u53d8\u5316\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4e00\u76f4\u62ff\u5230\u76f8\u540c\u5f15\u7528\u7684\u51fd\u6570\u3002\u53ef\u4ee5\u505a\u7ec4\u4ef6\u5bf9\u51fd\u6570\u5b58\u5728\u4f9d\u8d56\u7684\u60c5\u51b5\u4e0b\u7684\u4f18\u5316\uff0c\u51cf\u5c11\u6e32\u67d3\u6b21\u6570\\n\\n```ts\\nimport { useState, useCallback } from \'react\'\\nfunction Test() {\\n    const [num, setNum] = useState(0);\\n    const clickFunc = useCallback(() => {\\n        setNum(v => v + 1);\\n        console.log(\'\u5f53\u524d\u7684num\u503c\u4e3a\uff1a\', num)\\n    }, [num]);\\n    return <div onClick={clickFunc}>\\n    This is a test demo.<br/>\\n    The current num is ${num}\\n    </div>\\n}\\n```\\n\\n## 4. useMemo\\n\\n\u6267\u884c\u4f20\u5165\u7684\u51fd\u6570\uff0c\u8fd4\u56de\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u4f9d\u8d56\u5f71\u54cd\u540cuseEffect\\n\u53ef\u4ee5\u7f13\u5b58\u7ec4\u4ef6\uff0c\u51cf\u5c11\u7236\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u9020\u6210\u7684\u5b50\u7ec4\u4ef6\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3\\n\\n```\\nimport { useState, useCallback, useMemo } from \\"react\\";\\nfunction Test() {\\n  const [num, setNum] = useState(0);\\n  const clickFunc = useCallback(() => {\\n    setNum((v) => v + 1);\\n    console.log(\\"\u5f53\u524d\u7684num\u503c\u4e3a\uff1a\\", num);\\n  }, [num]);\\n  console.log(\\"test component is rending.\\");\\n  return (\\n    <div onClick={clickFunc}>\\n      This is a test demo.\\n      <br />\\n      The current num is ${num}\\n    </div>\\n  );\\n}\\n\\nexport default function App() {\\n  const [name, setName] = useState(\\"xxx\\");\\n  const testMemo = useMemo(() => <Test />, []);\\n  return (\\n    <div>\\n      My name is ${name}\\n      <button\\n        onClick={() => {\\n          setName(`xxx-${Math.random()}`);\\n        }}\\n      >\\n        update name\\n      </button>\\n      <br />\\n      I\'m app component and that is test component below.\\n      {testMemo}\\n    </div>\\n  );\\n}\\n```\\n\\n\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0cApp\u7ec4\u4ef6\u4e2d\u7684state\u53d8\u5316\u65f6\u4e0d\u4f1a\u9020\u6210Test\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\\n\\n## 5. useRef\\n\\n\u8fd4\u56de\u7684\u503c\uff0c\u5728\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u90fd\u5b58\u5728\u3002\u53ef\u4ee5\u7528\u6765\u4fdd\u5b58\u4e00\u4e9b\u8de8\u751f\u547d\u5468\u671f\u7684\u503c/\u539f\u59cbdom\u8282\u70b9\u3002\\nxxx.current\u7684\u503c\u53d1\u751f\u53d8\u5316\u4e0d\u4f1a\u9020\u6210\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\u3002\\n\\n```ts\\nimport { useState, useRef } from \'react\'\\nexport default function Test() {\\n    const [num, setNum] = useState(0);\\n    const ref = useRef(\'\u968f\u4fbf\u5199\uff0c\u4e0d\u91cd\u590d\u5c31\u884c\');\\n    const countRef = useRef(num);\\n    return <div ref={ref} onClick={() => {\\n        setNum(v => v + 1);\\n        console.log(\'ref\u662f\u4ec0\u4e48\uff1f\', ref, ref.current, countRef.current)\\n        countRef.current = num;\\n    }}>\\n    This is a test demo.<br/>\\n    The current num is ${num}\\n    </div>\\n}\\n```\\n\\n## 6. useContext\\n\\n\u642d\u914dcreateContext\u4f7f\u7528\u3002\u7528\u6765\u5171\u4eab\u503c\u7ed9\u591a\u4e2a\u5b50\u7ec4\u4ef6\\n\\n```ts\\nimport { useContext, createContext } from \\"react\\";\\nconst MyContext = createContext({});\\nfunction Test() {\\n  const { test } = useContext(MyContext);\\n  return <span>{test}</span>;\\n}\\nfunction Test2() {\\n  const { test2 } = useContext(MyContext);\\n  return <span>{test2}</span>;\\n}\\n\\nexport default function App() {\\n  return (\\n    <MyContext.Provider\\n      value={{\\n        test: \\"I\'m test.\\",\\n        test2: \\"I\'m test two.\\"\\n      }}\\n    >\\n      <Test />\\n      <br />\\n      <Test2 />\\n    </MyContext.Provider>\\n  );\\n}\\n```\\n\\n## 7. useReducer\\n\\n\u7528\u6765\u96c6\u4e2d\u7ba1\u7406\u7ec4\u4ef6\u4e2d\u7684\u72b6\u6001\u3002\u53ef\u4ee5\u7528\u6765\u5408\u5e76\u591a\u4e2astate\u53d8\u5316\uff0c\u51cf\u5c11state\u53d8\u5316\u5f15\u8d77render\u7684\u6b21\u6570\\n\\n```\\nimport { useReducer } from \\"react\\";\\n\\nfunction reducer(state, action) {\\n  return action.type === \\"update\\"\\n    ? {\\n        ...state,\\n        ...action.payload\\n      }\\n    : {\\n        ...state\\n      };\\n}\\n\\nexport default function App() {\\n  const [state, dispatch] = useReducer(reducer, {\\n    name: \\"app\\",\\n    count: 0\\n  });\\n\\n  return (\\n    <div>\\n      \u5f53\u524dcount\u503c\u4e3a\uff1a{state.count}\\n      <br />\\n      <span\\n        onClick={() => {\\n          dispatch({ type: \\"update\\", payload: { count: state.count + 1 } });\\n        }}\\n      >\\n        \u70b9\u51fb\u4fee\u6539count\u503c\\n      </span>\\n    </div>\\n  );\\n}\\n```\\n\\n## 8. useLayoutEffect\\n\\n\u5728\u7ec4\u4ef6\u5373\u5c06\u6e32\u67d3\u5230\u754c\u9762\u4e0a\u65f6\u6267\u884c\uff0c\u4f9d\u8d56\u5f71\u54cd\u540cuseEffect\\n\\n## 9. useImperativeHandle\\n\\n\u642d\u914d\u300cforwardRef\u300d\u4f7f\u7528\u3002\u53ef\u4ee5\u8ba9\u7236\u7ec4\u4ef6\u83b7\u53d6\u5b50\u7ec4\u4ef6\u7684\u771f\u5b9e\u8282\u70b9\\n\\n```\\nimport { useRef, useImperativeHandle, forwardRef, useEffect } from \\"react\\";\\n\\nfunction Test(props, ref) {\\n  const mRef = useRef(null);\\n  useImperativeHandle(ref, () => mRef.current);\\n  return <div ref={mRef}> I\'m test component</div>;\\n}\\n\\nconst TestRef = forwardRef(Test);\\nexport default function App() {\\n  const ref = useRef(null);\\n  useEffect(() => {\\n    console.log(ref.current.textContent, \\"this is app log\\");\\n  }, []);\\n  return <TestRef ref={ref} />;\\n}\\n```"},{"id":"/2022/04/07/\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f","metadata":{"permalink":"/blog/index/2022/04/07/\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f","source":"@site/blog/2022/04/07/\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f.md","title":"\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f","description":"\u4e00\u822c\u5e38\u7528 input \u4e8b\u4ef6\u76d1\u542c input \u8f93\u5165\u6846\u7684\u5185\u5bb9\u8f93\u5165\uff0c\u4f46\u662f input \u4e8b\u4ef6\u4e0d\u80fd\u8bc6\u522b\u8f93\u5165\u6cd5\u7684\u8f93\u5165\u3002\u5373\uff0c\u5f53\u5728 input \u8f93\u5165\u6846\u4e2d\u4f7f\u7528\u4e2d\u6587\u8f93\u5165\u6cd5\u8f93\u5165\u6c49\u5b57\u65f6\uff0cinput \u4e8b\u4ef6\u4f1a\u5728\u76d1\u542c\u5230\u6700\u7ec8\u8f93\u5165\u7684\u6c49\u5b57\u4e4b\u524d\uff0c\u76d1\u542c\u5230\u8f93\u5165\u7684\u6240\u6709\u7684\u4e2d\u6587\u62fc\u97f3\uff08\u82f1\u6587\u5b57\u6bcd\uff09\u3002\u6240\u4ee5\u5982\u679c\u60f3\u8981\u5728\u4f7f\u7528\u8f93\u5165\u6cd5\u8f93\u5165\u65f6\u53ea\u76d1\u542c\u8f93\u5165\u6cd5\u8f93\u5165\u7684\u6700\u7ec8\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u80fd\u53ea\u662f\u7b80\u5355\u7684\u4f7f\u7528 input \u4e8b\u4ef6\u4e86\u3002","date":"2022-04-07T00:00:00.000Z","formattedDate":"2022\u5e744\u67087\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":3.095,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55","permalink":"/blog/index/2022/07/21/react-\u5e38\u7528hooks\u7684\u57fa\u672c\u4f7f\u7528demo\u8bb0\u5f55"},"nextItem":{"title":"concurrently\u4f7f\u7528\u8bb0\u5f55","permalink":"/blog/index/2022/01/23/concurrently\u4f7f\u7528\u8bb0\u5f55"}},"content":"\x3c!-- truncate --\x3e\\n\\n\u4e00\u822c\u5e38\u7528 input \u4e8b\u4ef6\u76d1\u542c input \u8f93\u5165\u6846\u7684\u5185\u5bb9\u8f93\u5165\uff0c\u4f46\u662f input \u4e8b\u4ef6\u4e0d\u80fd\u8bc6\u522b\u8f93\u5165\u6cd5\u7684\u8f93\u5165\u3002\u5373\uff0c\u5f53\u5728 input \u8f93\u5165\u6846\u4e2d\u4f7f\u7528\u4e2d\u6587\u8f93\u5165\u6cd5\u8f93\u5165\u6c49\u5b57\u65f6\uff0cinput \u4e8b\u4ef6\u4f1a\u5728\u76d1\u542c\u5230\u6700\u7ec8\u8f93\u5165\u7684\u6c49\u5b57\u4e4b\u524d\uff0c\u76d1\u542c\u5230\u8f93\u5165\u7684\u6240\u6709\u7684\u4e2d\u6587\u62fc\u97f3\uff08\u82f1\u6587\u5b57\u6bcd\uff09\u3002\u6240\u4ee5\u5982\u679c\u60f3\u8981\u5728\u4f7f\u7528\u8f93\u5165\u6cd5\u8f93\u5165\u65f6\u53ea\u76d1\u542c\u8f93\u5165\u6cd5\u8f93\u5165\u7684\u6700\u7ec8\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u80fd\u53ea\u662f\u7b80\u5355\u7684\u4f7f\u7528 input \u4e8b\u4ef6\u4e86\u3002\\n\\n**_\u8fd9\u91cc\u7684 input \u4e8b\u4ef6\u6307\u7684\u662f oninput \u4e8b\u4ef6_**\\n\\n## \u4f7f\u7528\u7684\u4e8b\u4ef6\\n\\n\u4f7f\u7528 compositionstart \u548c compositionend \u4e24\u4e2a\u4e8b\u4ef6\uff08\u4e8b\u4ef6\u540d\u5c31\u662f\u5168\u5c0f\u5199\uff09\\n\\n- compositionstart \u4e8b\u4ef6\u662f\u5728\u8f93\u5165\u6cd5\u5f00\u59cb\u8f93\u5165\u7684\u65f6\u5019\u89e6\u53d1\\n- compositionend \u4e8b\u4ef6\u662f\u5728\u8f93\u5165\u6cd5\u7ed3\u675f\u8f93\u5165\u7684\u65f6\u5019\u89e6\u53d1\\n\\ncompositionstart\u3001compositionend \u4e0e input \u4e8b\u4ef6\u7684\u6267\u884c\u987a\u5e8f\u662f\uff1a`compositionstart > input > compositionend`\\n\\n## \u5982\u4f55\u5224\u65ad\u5f53\u524d\u662f\u5426\u662f\u8f93\u5165\u6cd5\u8f93\u5165\u5462\uff1f\\n\\n\u5728\u4e8b\u4ef6\u4e4b\u5916\uff0c\u8bbe\u7f6e\u4e00\u4e2a flag\uff0c\u5224\u65ad\u5f53\u524d\u662f\u5426\u662f\u8f93\u5165\u6cd5\u8f93\u5165\u3002\u7f3a\u7701\u4e3a\u975e\u8f93\u5165\u6cd5\u8f93\u5165\\n\\n1. \u56e0\u4e3a\u4e8b\u4ef6\u7684\u6267\u884c\u987a\u5e8f\u662f `compositionstart > input > compositionend`\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728 compositionstart \u4e2d\u8bbe\u7f6e flag \u4e3a true\uff0c\u8868\u793a\u73b0\u5728\u5f00\u59cb\u8f93\u5165\u6cd5\u8f93\u5165\\n2. input \u4e8b\u4ef6\u4e2d\uff0c\u5224\u65ad flag \u662f\u5426\u4e3a true\u3002\u5982\u679c flag \u4e3a true\uff0c\u8868\u793a\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u8f93\u5165\u6cd5\u8f93\u5165\uff0c\u4e0d\u505a\u5904\u7406\uff1b\u5426\u5219\u83b7\u53d6\u8f93\u5165\u7684\u5185\u5bb9\\n3. \u5728 compositionend \u4e2d\u8bbe\u7f6e flag \u4e3a false\uff0c\u8868\u793a\u8f93\u5165\u6cd5\u8f93\u5165\u7ed3\u675f\\n\\n## \u5982\u4f55\u62ff\u5230 input \u4e2d\u7684\u6240\u6709\u88ab\u8f93\u5165\u7684\u5185\u5bb9\u5462\uff1f\\n\\n\u4e0e flag \u7684\u8bbe\u8ba1\u76f8\u4f3c\u3002\u5728\u4e8b\u4ef6\u4e4b\u5916\u8bbe\u7f6e\u4e00\u4e2a\u53ef\u53d8\u7684 string \u7c7b\u578b\u53d8\u91cf\uff0c\u8fd9\u91cc\u5047\u5b9a\u4e3a content\u3002\\n\\n1. \u5728 compositionend \u4e2d `content += \u8f93\u5165\u7684\u503c`\\n2. \u5728 input \u4e2d\uff0c\u5224\u65ad flag\u3002\u5982\u679c\u662f false\uff0c\u8868\u793a\u662f\u975e\u8f93\u5165\u6cd5\u8f93\u5165\uff0c`content += \u8f93\u5165\u7684\u503c`\\n3. content \u7684\u503c\u5c31\u662f input \u8f93\u5165\u6846\u4e2d\u6240\u6709\u88ab\u8f93\u5165\u7684\u5185\u5bb9\u4e86\\n\\n## \u6d4b\u8bd5\u6e90\u7801\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <input id=\\"frame\\" type=\\"text\\" />\\n\\n    <script>\\n      let content = \\"\\";\\n      let compositionstart = false;\\n      // \u8f93\u5165\u6cd5\u8f93\u5165\u5f00\u59cb\u65f6\u6267\u884c\uff1b\u5982\u679c\u4e0d\u662f\u8f93\u5165\u6cd5\u8f93\u5165\uff0c\u4e0d\u89e6\u53d1\\n      frame.addEventListener(\\"compositionstart\\", (e) => {\\n        compositionstart = true;\\n        console.log(\\"compositionstart\\", e);\\n      });\\n      frame.addEventListener(\\"compositionend\\", (e) => {\\n        compositionstart = false;\\n        content += e.data;\\n        console.log(\\"compositionend\\", e);\\n      });\\n      frame.addEventListener(\\"input\\", (e) => {\\n        if (compositionstart) {\\n          return;\\n        }\\n        content += e.data;\\n        console.log(\\"input input\\", e);\\n      });\\n      frame.addEventListener(\\"blur\\", (e) => {\\n        console.log(\\"\u8f93\u5165\u7684\u6700\u7ec8\u5185\u5bb9:\\", content);\\n      });\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n## \u8865\u5145\u8bf4\u660e compositionupdate\\n\\ncompositionupdate \u4e8b\u4ef6\u4f1a\u6355\u83b7\u8f93\u5165\u6cd5\u8f93\u5165\u7684\u6240\u6709\u82f1\u6587\u5b57\u6bcd\uff0c\u7c7b\u540cinput\u4e8b\u4ef6\\n\\n# \u6765\u6e90\\n\\n[compositionstart](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/compositionstart_event \\"compositionstart\\")"},{"id":"/2022/01/23/concurrently\u4f7f\u7528\u8bb0\u5f55","metadata":{"permalink":"/blog/index/2022/01/23/concurrently\u4f7f\u7528\u8bb0\u5f55","source":"@site/blog/2022/01/23/concurrently\u4f7f\u7528\u8bb0\u5f55.md","title":"concurrently\u4f7f\u7528\u8bb0\u5f55","description":"\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\u591a\u6761\u547d\u4ee4","date":"2022-01-23T00:00:00.000Z","formattedDate":"2022\u5e741\u670823\u65e5","tags":[{"label":"npm","permalink":"/blog/index/tags/npm"}],"readingTime":0.59,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"concurrently\u4f7f\u7528\u8bb0\u5f55","toc_max_heading_level":6,"tags":["npm"]},"prevItem":{"title":"\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f","permalink":"/blog/index/2022/04/07/\u5982\u4f55\u76d1\u542cinput\u8f93\u5165\u6846\u4e2d\u7684\u4e2d\u6587\u8f93\u5165\uff1f"},"nextItem":{"title":"yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55","permalink":"/blog/index/2022/01/09/yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55"}},"content":"\x3c!-- truncate --\x3e\\n\\n\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\u591a\u6761\u547d\u4ee4\\n\\n## \u5b89\u88c5\\n\\n```sh\\nnpm i concurrently -D\\n# \u6216\u8005\\nnpm i concurrently -g\\n```\\n\\n## \u4f7f\u7528\\n\\n\u5177\u4f53\u4f7f\u7528\u53c2\u8003\u5b98\u65b9\u6587\u6863\\n\\n`package.json`\\n\\n```json\\n{\\n    \\"scripts\\": {\\n        \\"dev\\": \\"concurrently --names \\\\\\"HTTP,WATCH\\\\\\" -c \\\\\\"bgBlue.bold,bgMagenta.bold\\\\\\"\\n     \\\\\\"http-server\\\\\\" \\\\\\"npm run watch\\\\\\"\\",\\n        \\"watch\\": \\"...\\"\\n    }\\n}\\n```\\n\\n### \u6ce8\u610f\\n\\n`concurrently`\u8981\u6267\u884c\u7684\u811a\u672c\u547d\u4ee4\uff0c\u9700\u5168\u5c40\u5b89\u88c5\u6216\u4f7f\u7528\u5168\u5c40\u5305\u7ba1\u7406\u5de5\u5177\u8fd0\u884c`package.json`\u4e2d\u7684\u811a\u672c\u547d\u4ee4\u3002\\n\\n\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684`http-server`\u3001`npm`\u90fd\u5728`nodejs`\u7684\u5168\u5c40\u5b89\u88c5\u8def\u5f84\u4e2d\\n\\n# \u53c2\u8003\\n\\nhttps://www.npmjs.com/package/concurrently"},{"id":"/2022/01/09/yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55","metadata":{"permalink":"/blog/index/2022/01/09/yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55","source":"@site/blog/2022/01/09/yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55.md","title":"yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55","description":"\u67e5\u8be2\u5e2e\u52a9\u5217\u8868","date":"2022-01-09T00:00:00.000Z","formattedDate":"2022\u5e741\u67089\u65e5","tags":[{"label":"yarn","permalink":"/blog/index/tags/yarn"}],"readingTime":1.195,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55","toc_max_heading_level":6,"tags":["yarn"]},"prevItem":{"title":"concurrently\u4f7f\u7528\u8bb0\u5f55","permalink":"/blog/index/2022/01/23/concurrently\u4f7f\u7528\u8bb0\u5f55"},"nextItem":{"title":"canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/06/canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u67e5\u8be2\u5e2e\u52a9\u5217\u8868\\n\\n```bash\\nyarn help\\n```\\n\\n## \u521d\u59cb\u5316\u9879\u76ee\\n\\n```bash\\nyarn init\\n```\\n\\n## \u5b89\u88c5\u6240\u6709\u4f9d\u8d56\\n\\n```bash\\nyarn\\n# \u6216\u8005\\nyarn install\\n```\\n\\n## \u6dfb\u52a0\u4f9d\u8d56\\n\\n```bash\\n# \u5b89\u88c5\u6307\u5b9a\u4f9d\u8d56\u5305\\nyarn add [packageName]\\n# \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684\u4f9d\u8d56\u5305\\nyarn add [packageName]@[version]\\n# \u5b89\u88c5\u6307\u5b9a\u6807\u7b7e\u7684\u4f9d\u8d56\u5305\\nyarn add [packageName]@[tag]\\n\\n# \u5b89\u88c5\u5305\u5230\u5f00\u53d1\u4f9d\u8d56\\nyarn add [packageName] --dev\\n\\n# \u53c2\u6570\u7b80\u5199\\n--dev # \u7b80\u5199\u4e3a -D\uff0c\u6dfb\u52a0\u5230\u5f00\u53d1\u4f9d\u8d56\uff08\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u53c2\u6570\uff0c\u9ed8\u8ba4\u5b89\u88c5\u5230\u751f\u4ea7\u4f9d\u8d56\uff09\\n```\\n\\n## \u5347\u7ea7\u4f9d\u8d56\\n\\n```bash\\n# \u5347\u7ea7\u6307\u5b9a\u4f9d\u8d56\u5305\\nyarn up [packageName]\\n# \u5347\u7ea7\u6307\u5b9a\u7248\u672c\u7684\u4f9d\u8d56\u5305\\nyarn up [packageName]@[version]\\n# \u5347\u7ea7\u6307\u5b9a\u6807\u7b7e\u7684\u4f9d\u8d56\u5305\\nyarn up [packageName]@[tag]\\n```\\n\\n## \u79fb\u9664\u4f9d\u8d56\\n\\n```bash\\nyarn remove [packageName]\\n```\\n\\n## \u8fd0\u884cpackage.json\u4e2d\u7684\u811a\u672c\u547d\u4ee4\\n\\n```bash\\nyarn run <scriptName>\\n# yarn run test\\n# yarn test\\n```\\n\\n## \u66f4\u65b0yarn\u7248\u672c\\n\\n```bash\\n# \u66f4\u65b0yarn\u5230\u6700\u65b0\u7248\u672c\\nyarn set version latest\\nyarn set version from sources\\n```\\n\\n# \u53c2\u8003\\n\\nhttps://yarnpkg.com/getting-started/usage"},{"id":"/2022/01/06/canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3","metadata":{"permalink":"/blog/index/2022/01/06/canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3","source":"@site/blog/2022/01/06/canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3.md","title":"canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3","description":"\u6548\u679c","date":"2022-01-06T00:00:00.000Z","formattedDate":"2022\u5e741\u67086\u65e5","tags":[{"label":"canvas","permalink":"/blog/index/tags/canvas"}],"readingTime":6.445,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3","toc_max_heading_level":6,"tags":["canvas"]},"prevItem":{"title":"yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55","permalink":"/blog/index/2022/01/09/yarn\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55"},"nextItem":{"title":"canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1","permalink":"/blog/index/2022/01/05/canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6548\u679c\\n\\n![final](./canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3/final.gif)\\n\\n## \u6e90\u7801\\n\\n### html\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>\u7c92\u5b50\u80cc\u666f</title>\\n    <style>\\n      canvas {\\n        margin: 50px auto;\\n        display: block;\\n        box-shadow: 0 0 10px rgb(0 0 0 / 50%);\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <canvas width=\\"800\\" height=\\"500\\"></canvas>\\n\\n    <script src=\\"./js/\u7c92\u5b50\u80cc\u666f.js\\"><\/script>\\n    <script>\\n      // \u7c92\u5b50\u96c6\u5408\\n      let particles = [];\\n      // \u7c92\u5b50\u6570\u91cf\\n      const particleCount = 150;\\n      // \u9f20\u6807\u4f4d\u7f6e\u5bf9\u8c61\\n      let mouseOffset = null;\\n      // \u7c92\u5b50\u753b\u7ebf\u7684\u6700\u5c0f\u8ddd\u79bb\\n      const minDistance = 100;\\n      // \u8fb9\u754c\u78b0\u649e\u68c0\u6d4b\\n      const collideDetect = true;\\n      // \u662f\u5426\u6709\u9f20\u6807\u4ea4\u4e92\\n      const hasInteractMouse = true;\\n      const canvas = document.querySelector(\\"canvas\\");\\n      const ctx = canvas.getContext(\\"2d\\");\\n      createParticles();\\n      draw();\\n      handleCanvasEvent();\\n      function draw() {\\n        // \u6e05\u7a7a\u753b\u5e03\\n        canvas.width = canvas.width;\\n        drawParticles(ctx);\\n        ctx.lineWidth = 0.1;\\n        drawLines(ctx);\\n\\n        requestAnimationFrame(draw);\\n      }\\n\\n      // \u521b\u5efa\u7c92\u5b50\u5bf9\u8c61\\n      function createParticles() {\\n        for (let index = 0; index < particleCount; index++) {\\n          particles.push(\\n            new Particle(\\n              getRandomRange(0, canvas.width, canvas.height),\\n              getRandomRange(0, canvas.height),\\n            ),\\n          );\\n        }\\n      }\\n\\n      // \u5c06\u7c92\u5b50\u5bf9\u8c61\u753b\u5230\u753b\u5e03\u4e0a\\n      function drawParticles(ctx) {\\n        ctx.beginPath();\\n        for (let index = 0; index < particles.length; index++) {\\n          const particle = particles[index];\\n\\n          particle.draw(ctx);\\n\\n          // \u6ca1\u6709\u5f00\u542f\u8fb9\u754c\u78b0\u649e\u68c0\u6d4b\uff0c\u8d8a\u754c\u7684\u7c92\u5b50,\u66f4\u65b0\u4f4d\u7f6e\u5e76\u4fdd\u8bc1\u5176\u65b0\u4f4d\u7f6e\u4e0d\u8d8a\u754c\\n          if (!collideDetect) {\\n            if (\\n              particle.x > canvas.width ||\\n              particle.x < 0 ||\\n              particle.y > canvas.height ||\\n              particle.y < 0\\n            ) {\\n              // \u7c92\u5b50\u76f4\u5f84\\n              const diameter = particle.radius * 2;\\n              particle.updateCoordinate(\\n                getRandomRange(diameter, canvas.width - diameter),\\n                getRandomRange(diameter, canvas.height - diameter),\\n              );\\n            }\\n          } else {\\n            handleCollide(particle);\\n          }\\n\\n          particle.x += particle.speedX;\\n          particle.y += particle.speedY;\\n        }\\n        ctx.fill();\\n      }\\n\\n      // \u7ed8\u5236\u7c92\u5b50\u8fde\u7ebf\\n      function drawLines(ctx) {\\n        ctx.beginPath();\\n        let arr = [...particles];\\n        mouseOffset && (arr = [mouseOffset].concat(arr));\\n        for (let index = 0; index < particles.length; index++) {\\n          const particle = particles[index];\\n\\n          for (let j = arr.length - 1; j >= 0; j--) {\\n            const particle2 = arr[j];\\n            if (particle === particle2) {\\n              continue;\\n            }\\n            const distance = calDistance(\\n              particle.x,\\n              particle2.x,\\n              particle.y,\\n              particle2.y,\\n            );\\n            if (distance < minDistance) {\\n              // \u5982\u679c\u662f\u9f20\u6807\uff0c\u5219\u8ba9\u7c92\u5b50\u5411\u9f20\u6807\u7684\u4f4d\u7f6e\u79fb\u52a8,\u8ddd\u79bb-10 \u4fdd\u8bc1\u7c92\u5b50\u4e0e\u9f20\u6807\u4e4b\u95f4\u7684\u6700\u5c0f\u95f4\u8ddd\\n              if (particle2 === mouseOffset && distance > minDistance - 10) {\\n                const xc = particle.x - particle2.x;\\n                const yc = particle.y - particle2.y;\\n\\n                // 0.03 \u5411\u9f20\u6807\u5750\u6807\u79fb\u52a8\u7684\u901f\u7387\\n                particle.x -= xc * 0.03;\\n                particle.y -= yc * 0.03;\\n              }\\n              ctx.moveTo(particle.x, particle.y);\\n              ctx.lineTo(particle2.x, particle2.y);\\n            }\\n          }\\n\\n          // \u53bb\u6389\u91cd\u590d\u6bd4\u8f83\\n          arr.splice(arr.indexOf(particle), 1);\\n        }\\n\\n        ctx.stroke();\\n      }\\n\\n      // \u7c92\u5b50\u8fb9\u754c\u78b0\u649e\u68c0\u6d4b\\n      function handleCollide(particle) {\\n        if (\\n          (particle.speedX && particle.x + particle.radius > canvas.width) ||\\n          (particle.speedX < 0 && particle.x < particle.radius)\\n        ) {\\n          particle.speedX *= -1;\\n        }\\n        if (\\n          (particle.speedY > 0 &&\\n            particle.y + particle.radius >= canvas.height) ||\\n          (particle.speedY < 0 && particle.y <= particle.radius)\\n        ) {\\n          particle.speedY *= -1;\\n        }\\n      }\\n\\n      // \u5904\u7406canvas\u7684\u4e8b\u4ef6\\n      function handleCanvasEvent() {\\n        if (hasInteractMouse) {\\n          canvas.onmousemove = function (e) {\\n            if (!mouseOffset) {\\n              mouseOffset = {};\\n            }\\n            mouseOffset.x = e.offsetX;\\n            mouseOffset.y = e.offsetY;\\n          };\\n        }\\n      }\\n\\n      function calDistance(x1, x2, y1, y2) {\\n        return Math.hypot(x1 - x2, y1 - y2);\\n      }\\n\\n      function getRandomRange(min, max) {\\n        return Math.random() * (max - min) + min;\\n      }\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</details>\\n\\n### \u7c92\u5b50\u80cc\u666f.js\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```js\\nclass Particle {\\n  constructor(x, y) {\\n    this.x = x;\\n    this.y = y;\\n    this.radius = 0.5;\\n    this.speedX = this._getRandomRange(-1, 1);\\n    this.speedY = this._getRandomRange(-1, 1);\\n  }\\n\\n  draw(ctx) {\\n    ctx.moveTo(this.x, this.y);\\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\\n  }\\n\\n  updateCoordinate(x, y) {\\n    this.x = x;\\n    this.y = y;\\n    return this;\\n  }\\n\\n  _getRandomRange(min, max) {\\n    return Math.random() * (max - min) + min;\\n  }\\n}\\n```\\n\\n</details>\\n\\n## \u4e3b\u8981\u601d\u8def\\n\\n### \u73b0\u8c61\\n\\n- \u7c92\u5b50\u4e4b\u95f4\u3001\u9f20\u6807\u4e0e\u7c92\u5b50\u4e4b\u95f4\uff0c\u5c0f\u4e8e\u4e00\u5b9a\u7684\u503c\u4f1a\u8fde\u7ebf\\n- \u7c92\u5b50\u7684\u79fb\u52a8\u662f\u968f\u673a\u7684\\n- \u7c92\u5b50\u5411\u9f20\u6807\u79fb\u52a8\u65f6\uff0c\u6709\u4e00\u4e2a\u52a0\u901f\u7684\u8fc7\u7a0b\\n\\n### \u601d\u8def\u68b3\u7406\\n\\n- \u62bd\u8c61\u5706\u5f62\u7c92\u5b50\u7c7b\\n\\n  - \u5750\u6807\uff0cx,y\u3002\u7531\u5916\u90e8\u4f20\u5165\\n  - \u79fb\u901f\uff0cx,y\u3002\u81ea\u5df1\u5185\u90e8\u968f\u673a\u5b9a\u4e49\\n  - \u534a\u5f84\u3002\u5185\u90e8\u5b9a\u4e49\\n\\n- \u51c6\u5907\u7c92\u5b50\uff0c\u753b\u5e03\u4e0a\u4e00\u76f4\u53ea\u6709\u5b9a\u91cf\u7684\u7c92\u5b50\\n\\n  - \u4f7f\u7528\u4e00\u4e2a\u6570\u7ec4\uff0c\u627f\u8f7d\u521b\u5efa\u7684\u5b9a\u91cf\u7684\u7c92\u5b50\\n\\n- \u753b\u5e03\u6709\u9f20\u6807\u79fb\u52a8\u4e8b\u4ef6\u7684\u76d1\u542c\\n\\n  - \u50a8\u5b58\u9f20\u6807\u7684\u4f4d\u7f6e\uff0c\u7528\u6765\u5224\u65ad\u7c92\u5b50\u4e0e\u9f20\u6807\u4f4d\u7f6e\u95f4\u662f\u5426\u5e94\u8be5\u8fde\u7ebf\\n\\n- \u6279\u91cf\u7ed8\u5236\u7c92\u5b50\\n\\n  - \u7ed8\u5236\u7c92\u5b50\u65f6\u5bf9\u7c92\u5b50\u8fdb\u884c\u8fb9\u754c\u78b0\u649e\u68c0\u6d4b\u3002\u6216\u8005\u5230\u8fb9\u754c\u540e\u66f4\u65b0\u7c92\u5b50\u7684\u4f4d\u7f6e\uff08\u786e\u4fdd\u5176\u4e0d\u8d8a\u754c\uff09\\n\\n- \u6279\u91cf\u7ed8\u5236\u7c92\u5b50\u95f4\u3001\u9f20\u6807\u548c\u7c92\u5b50\u95f4\u7684\u8fde\u7ebf\\n\\n  - \u5982\u679c\u7c92\u5b50\u95f4\u7684\u7403\u5fc3\u8ddd\u79bb\u5c0f\u4e8e\u9650\u5b9a\u7684\u8fde\u7ebf\u8ddd\u79bb\uff0c\u5219\u5728\u8fd9\u4e24\u4e2a\u7c92\u5b50\u4e2d\u95f4\u8fde\u7ebf\\n\\n  - \u5982\u679c\u7c92\u5b50\u548c\u9f20\u6807\u7684\u8ddd\u79bb\u5c0f\u4e8e\u9650\u5b9a\u7684\u8fde\u7ebf\u8ddd\u79bb\uff0c\u5219\u5728\u9f20\u6807\u548c\u7c92\u5b50\u4e2d\u95f4\u8fde\u7ebf\\n\\n    - \u8fde\u7ebf\u524d\uff0c\u5982\u679c\u7c92\u5b50\u4e0e\u9f20\u6807\u4f4d\u7f6e\u95f4\u7684\u8ddd\u79bb\u5c0f\u4e8e\u4e00\u5b9a\u95f4\u8ddd\uff0c\u7c92\u5b50\u5411\u9f20\u6807\u4f4d\u7f6e\u79fb\u52a8\uff08\u6709\u4e00\u4e2a\u7c92\u5b50\u56f4\u7ed5\u7740\u9f20\u6807\u7684\u6548\u679c\uff09\\n\\n    - \u79fb\u52a8\u7684\u8ddd\u79bb\uff0c\u6709\u6b63\u3001\u8d1f\u3002\u7528\u9f20\u6807\u7684\u5750\u6807\u548c\u7c92\u5b50\u7684\u5750\u6807\u505a\u5bf9\u5e94\u65b9\u5411\u4e0a\u7684\u52a0\u51cf\u8fd0\u7b97\uff0c\u518d\u4e58\u4ee5\u4e00\u4e2a\u503c\uff08\u8868\u793a\u79fb\u52a8\u901f\u7387\uff0c\u4f53\u73b0\u5728\u7c92\u5b50\u5411\u9f20\u6807\u79fb\u52a8\u7684\u6548\u679c\u4e0a\uff09\\n\\n    - \u8ba1\u7b97\u793a\u4f8b<span style={{color: \'red\', fontWeight: 700}}>\u5b9e\u73b0\u9f20\u6807\u4ea4\u4e92\u7684\u91cd\u70b9</span>\\n\\n      - ```js\\n        // \u5982\u679c\u7c92\u5b50\u672c\u5c31\u5728\u9f20\u6807\u9644\u8fd1\uff0c\u4e0d\u7528\u518d\u505a\u79fb\u52a8(\u4e00\u5b9a\u95f4\u8ddd\u7684\u9650\u5236\uff0c\u6709\u4e00\u4e2a\u7c92\u5b50\u56f4\u7ed5\u9f20\u6807\u4f46\u4e0d\u6328\u7740\u9f20\u6807\u7684\u6548\u679c)\\n        if (\\n          \u7c92\u5b50\u4e0e\u9f20\u6807\u95f4\u7684\u8ddd\u79bb < \u8fde\u7ebf\u9650\u5b9a\u8ddd\u79bb &&\\n          \u7c92\u5b50\u4e0e\u9f20\u6807\u95f4\u7684\u8ddd\u79bb > \u4e00\u5b9a\u95f4\u8ddd\\n        ) {\\n          // xDistance \u6b63\u8d1f\u4e0d\u5b9a\\n          const xDistance = \u7c92\u5b50\u5750\u6807x - \u9f20\u6807\u5750\u6807.x;\\n          // yDistance \u6b63\u8d1f\u4e0d\u5b9a\\n          const yDistance = \u7c92\u5b50\u5750\u6807y - \u9f20\u6807\u5750\u6807.y;\\n\\n          const rate = 0.03;\\n\\n          // \u65e0\u8bbaxDistance\u3001yDistance\u6b63\u8d1f\u5982\u4f55\uff0c\u8fd9\u91cc\u90fd\u8981\u4fdd\u8bc1\u662f\u7c92\u5b50\u5728\u5411\u9f20\u6807\u79fb\u52a8\\n          \u7c92\u5b50\u5750\u6807.x -= xDistance * rate;\\n          \u7c92\u5b50\u5750\u6807.y -= yDistance * rate;\\n        }\\n        ```\\n\\n## \u53c2\u8003\\n\\n[canvas\u7c92\u5b50\u52a8\u753b\u80cc\u666f](https://segmentfault.com/a/1190000016209871)\\n\\n[\u7528 canvas \u505a\u4e2a\u597d\u73a9\u7684\u7f51\u7ad9\u80cc\u666f](https://www.cnblogs.com/axes/p/4960171.html)"},{"id":"/2022/01/05/canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1","metadata":{"permalink":"/blog/index/2022/01/05/canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1","source":"@site/blog/2022/01/05/canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1.md","title":"canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1","description":"\u80fd\u91cf\u5b88\u6052\u5b9a\u5f8b\u516c\u5f0f","date":"2022-01-05T00:00:00.000Z","formattedDate":"2022\u5e741\u67085\u65e5","tags":[{"label":"canvas","permalink":"/blog/index/tags/canvas"}],"readingTime":0.37,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1","toc_max_heading_level":6,"tags":["canvas"]},"prevItem":{"title":"canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/06/canvas\u5b9e\u73b0\u7c92\u5b50\u80cc\u666f\u7279\u6548\u601d\u8def\u603b\u7ed3"},"nextItem":{"title":"canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/05/canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u80fd\u91cf\u5b88\u6052\u5b9a\u5f8b\u516c\u5f0f\\n\\n![format](./canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1/format.png)\\n\\n## \u6e90\u7801\\n\\n\u975e\u7b14\u8005\u6210\u679c\uff0c\u5728\u6b64\u4ec5\u4f5c\u8bb0\u5f55\\n[\u5c0f\u7403\u78b0\u649e\u68c0\u6d4b](https://github.com/Jean-Xu/canvas-effects/blob/main/balls-collide.html \\"\u5c0f\u7403\u78b0\u649e\u68c0\u6d4b\\")\\n\\n## \u53c2\u8003\\n\\n[\u80fd\u91cf\u5b88\u6052\u5b9a\u5f8b\u516c\u5f0f](https://baike.baidu.com/item/%E5%8A%A8%E9%87%8F%E5%AE%88%E6%81%92%E5%AE%9A%E5%BE%8B/552651#7 \\"\u80fd\u91cf\u5b88\u6052\u5b9a\u5f8b\u516c\u5f0f\\")"},{"id":"/2022/01/05/canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3","metadata":{"permalink":"/blog/index/2022/01/05/canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3","source":"@site/blog/2022/01/05/canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3.md","title":"canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3","description":"\u6548\u679c","date":"2022-01-05T00:00:00.000Z","formattedDate":"2022\u5e741\u67085\u65e5","tags":[{"label":"canvas","permalink":"/blog/index/tags/canvas"}],"readingTime":6.76,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3","toc_max_heading_level":6,"tags":["canvas"]},"prevItem":{"title":"canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1","permalink":"/blog/index/2022/01/05/canvas\u5b9e\u73b0\u5c0f\u7403\u78b0\u649e\u8bb0\u5f55--\u6e90\u7801\u8f6c\u53d1"},"nextItem":{"title":"canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/04/canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6548\u679c\\n\\n![final](./canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3/final.png)\\n\\n## \u6e90\u7801\\n\\n### html\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>\u70df\u82b1\u6548\u679c</title>\\n    <style>\\n      canvas {\\n        margin: 80px auto;\\n        display: block;\\n        box-shadow: 0 0 10px rgb(0 0 0 / 50%);\\n      }\\n    </style>\\n  </head>\\n  <body onload=\\"draw()\\">\\n    <canvas width=\\"800\\" height=\\"500\\"></canvas>\\n\\n    <script src=\\"./js/\u70df\u82b1.js\\"><\/script>\\n    <script src=\\"./js/\u70df\u82b1\u7c92\u5b50.js\\"><\/script>\\n    <script>\\n      let timeTicker = 0;\\n      // \u52a8\u753b\u6267\u884c80\u6b21\uff0c\u53d1\u5c048\u4e2a\u70df\u82b1\\n      let timeTotal = 80;\\n      let fireworks = [];\\n      // \u4e00\u4e2a\u70df\u82b1\u6709\u591a\u5c11\u4e2a\u7c92\u5b50\\n      const particlesCount = 50;\\n      let particles = [];\\n      function draw() {\\n        const canvas = document.querySelector(\\"canvas\\");\\n        const ctx = canvas.getContext(\\"2d\\");\\n        // \u900f\u660e\u5ea6\u63a7\u5236\u62d6\u5c3e\u6548\u679c\\n        ctx.fillStyle = \\"rgba(0,0,0,0.03)\\";\\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\\n\\n        // \u753b\u70df\u82b1\\n        for (let index = 0; index < fireworks.length; index++) {\\n          const firework = fireworks[index];\\n          firework.draw(ctx);\\n          if (firework.isArrived()) {\\n            fireworks.splice(index, 1);\\n            index--;\\n            for (let j = 0; j < particlesCount; j++) {\\n              particles.push(\\n                new Particle(\\n                  ...firework.getTargetCoordinate(),\\n                  firework.getHue(),\\n                ),\\n              );\\n            }\\n          }\\n        }\\n\\n        // \u753b\u7c92\u5b50\\n        for (let index = 0; index < particles.length; index++) {\\n          const particle = particles[index];\\n          particle.draw(ctx);\\n          if (particle.isVanished()) {\\n            particles.splice(index, 1);\\n            index--;\\n          }\\n        }\\n\\n        // \u51fd\u6570\u5faa\u73af80\u6b21\u81ea\u52a8\u53d1\u5c048\u652f\u70df\u82b1\\n        if (timeTicker >= timeTotal) {\\n          for (let index = 0; index < timeTotal / 10; index++) {\\n            fireworks.push(\\n              new FireWork(\\n                canvas.width / 2,\\n                canvas.height,\\n                getRandomRange(0, canvas.width),\\n                getRandomRange(100, canvas.height / 2),\\n              ),\\n            );\\n          }\\n          timeTicker = 0;\\n        } else {\\n          timeTicker++;\\n        }\\n\\n        requestAnimationFrame(draw);\\n      }\\n\\n      function getRandomRange(min, max) {\\n        return Math.random() * (max - min) + min;\\n      }\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</details>\\n\\n### \u70df\u82b1.js\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```js\\nclass FireWork {\\n  constructor(startX, startY, endX, endY) {\\n    // \u70df\u82b1\u8d77\u59cb\u70b9(\u4ece\u54ea\u4e2a\u5730\u65b9\u5f00\u59cb\u53d1\u5c04)\\n    this.startX = startX;\\n    this.startY = startY;\\n\\n    // \u5f53\u524d\u5750\u6807(\u70df\u82b1\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u4f7f\u7528)\\n    this.x = this.startX;\\n    this.y = this.startY;\\n\\n    // \u70df\u82b1\u7ed3\u675f\u70b9(\u53d1\u5c04\u5230\u54ea\u4e2a\u5730\u65b9)\\n    this.endX = endX;\\n    this.endY = endY;\\n\\n    // \u76ee\u6807\u8ddd\u79bb\\n    this.targetDistance = this._getPointsDistance(\\n      this.startX,\\n      this.startY,\\n      this.endX,\\n      this.endY,\\n    );\\n\\n    // \u5f53\u524d\u70df\u82b1\u79fb\u52a8\u7684\u8ddd\u79bb\\n    this.currentDistance = 0;\\n\\n    // hsla \u8272\u8c03\\n    this.hue = this._getRandomRange(0, 360);\\n    // hsla \u4eae\u5ea6\\n    this.lightness = this._getRandomRange(50, 70);\\n\\n    // \u88ab\u53d1\u5c04\u7684\u89d2\u5ea6(\u6839\u636e\u7ed9\u5b9a\u7684\u5f00\u59cb\u3001\u7ed3\u675f\u4f4d\u7f6e\u8ba1\u7b97\u89d2\u5ea6)\\n    this.angle = Math.atan2(this.endY - this.startY, this.endX - this.startX);\\n\\n    // \u79fb\u52a8\u901f\u5ea6\\n    this.speed = 2;\\n    this.acceleration = 1.05; // \u52a0\u901f\u5ea6\u7cfb\u6570\\n  }\\n\\n  draw(ctx) {\\n    ctx.save();\\n    this.speed *= this.acceleration;\\n    const moveX = this.x + Math.cos(this.angle) * this.speed;\\n    const moveY = this.y + Math.sin(this.angle) * this.speed;\\n    ctx.strokeStyle = `hsla(${this.hue}, 100%, ${this.lightness}%, 60%)`; // \u4ec5\u4eae\u5ea6\u4f1a\u53d8\u5316\\n    ctx.lineWidth = 1;\\n    ctx.beginPath();\\n    ctx.moveTo(this.x, this.y);\\n    ctx.lineTo(moveX, moveY);\\n    ctx.stroke();\\n    ctx.restore();\\n\\n    this.currentDistance = this._getPointsDistance(\\n      this.startX,\\n      this.startY,\\n      moveX,\\n      moveY,\\n    );\\n\\n    this.x = moveX;\\n    this.y = moveY;\\n  }\\n\\n  // \u662f\u5426\u5230\u8fbe\u76ee\u6807\u5730\u70b9\\n  isArrived() {\\n    return this.currentDistance >= this.targetDistance;\\n  }\\n\\n  // \u83b7\u53d6\u70df\u82b1\u8272\u8c03\\n  getHue() {\\n    return this.hue;\\n  }\\n\\n  // \u83b7\u53d6\u76ee\u6807\u4f4d\u7f6e\u7684\u5750\u6807\\n  getTargetCoordinate() {\\n    return [this.endX, this.endY];\\n  }\\n\\n  _getRandomRange(min, max) {\\n    return Math.random() * (max - min) + min;\\n  }\\n\\n  // \u8ba1\u7b97\u76f4\u89d2\uff08\u7b1b\u5361\u5c14\uff09\u5750\u6807\u7cfb\u4e2d\u4e24\u70b9\u95f4\u8ddd\u79bb\\n  _getPointsDistance(x1, y1, x2, y2) {\\n    return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\\n  }\\n}\\n```\\n\\n</details>\\n\\n### \u70df\u82b1\u7c92\u5b50.js\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```js\\nclass Particle {\\n  constructor(x, y, hue) {\\n    // \u521d\u59cb\u4f4d\u7f6e\\n    this.x = x;\\n    this.y = y;\\n\\n    // \u4ece\u70df\u82b1\u90a3\u5f97\u6765\u7684hsla\u8272\u8c03\\n    this.hue = this._getRandomRange(hue - 20, hue + 20);\\n    //this.hue = hue\\n    // \u968f\u673ahsla\u4eae\u5ea6\\n    this.lightness = this._getRandomRange(50, 80);\\n\\n    // \u521d\u59cb\u900f\u660e\u5ea6\\n    this.alpha = 1;\\n    // \u968f\u673a\u7684\u900f\u660e\u5ea6\u8870\u53d8\u7cfb\u6570\uff08\u900f\u660e\u5ea6\u51cf\u6de1\uff09\\n    this.alphaDecay = this._getRandomRange(0.015, 0.03);\\n\\n    // \u6a21\u62df\u4e0b\u5760\u6469\u64e6\u529b(\u8ba9\u7c92\u5b50\u51cf\u901f)\\n    this.friction = 0.95;\\n    // \u6a21\u62df\u91cd\u529b\u52a0\u901f\u5ea6\\n    this.gravity = 1;\\n\\n    // \u968f\u673a\u89d2\u5ea6\\n    this.angle = this._getRandomRange(0, 2 * Math.PI);\\n    // \u968f\u673a\u521d\u59cb\u901f\u5ea6\\n    this.speed = this._getRandomRange(1, 10);\\n  }\\n\\n  draw(ctx) {\\n    ctx.save();\\n    // \u51cf\u901f\\n    this.speed *= this.friction;\\n    // \u8ba1\u7b97\u65b0\u4f4d\u7f6e\\n    const moveX = this.x + Math.cos(this.angle) * this.speed;\\n    const moveY = this.y + Math.sin(this.angle) * this.speed + this.gravity;\\n\\n    ctx.beginPath();\\n    ctx.moveTo(this.x, this.y);\\n    ctx.lineTo(moveX, moveY);\\n\\n    ctx.strokeStyle = `hsla(${this.hue}, 100%, ${this.lightness}%, ${this.alpha})`;\\n    ctx.lineWidth = 3;\\n    ctx.lineCap = \\"round\\";\\n    ctx.stroke();\\n    ctx.restore();\\n    this.x = moveX;\\n    this.y = moveY;\\n    // \u900f\u660e\u5ea6\u8870\u51cf\\n    this.alpha -= this.alphaDecay;\\n  }\\n\\n  _getRandomRange(min, max) {\\n    return Math.random() * (max - min) + min;\\n  }\\n\\n  // \u7c92\u5b50\u662f\u5426\u5df2\u7ecf\u770b\u4e0d\u89c1\\n  isVanished() {\\n    return this.alpha < this.alphaDecay;\\n  }\\n}\\n```\\n\\n</details>\\n\\n## \u4e3b\u8981\u6d41\u7a0b\\n\\n\u70df\u82b1\u88ab\u53d1\u5c04\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\u6d88\u5931\uff0c\u7c92\u5b50\u7efd\u653e\uff0c\u5b9e\u73b0\u70df\u82b1\u7efd\u653e\u7684\u6548\u679c\\n\\n#### \u70df\u82b1\u53d1\u5c04\\n\\n- \u70df\u82b1\u5c04\u901f\u63a7\u5236\uff0c\u52a8\u753b\u6267\u884c80\u6b21\u540e\uff0c\u53d1\u5c048\u4e2a\u70df\u82b1\uff08\u63a7\u5236\u53d1\u5c04\u9891\u7387\uff09\\n- \u70df\u82b1\u53d1\u5c04\u524d\uff0c\u5176\u89d2\u5ea6\u3001\u989c\u8272\u3001\u76ee\u6807\u4f4d\u7f6e\u5747\u5df2\u786e\u5b9a\\n  - \u89d2\u5ea6\u3001\u989c\u8272\u3001\u76ee\u6807\u4f4d\u7f6e\u90fd\u662f\u968f\u673a\u7684\\n- \u70df\u82b1\u53d1\u5c04\u65f6\u6709\u521d\u59cb\u901f\u5ea6\u548c\u52a0\u901f\u5ea6(\u8868\u73b0\u5728\u70df\u82b1\u6d88\u5931\u65f6\u523b\u7684\u90a3\u4e2a\u51b2\u52b2\u513f)\\n- \u70df\u82b1\u5230\u8fbe\u76ee\u6807\u4f4d\u7f6e\u540e\u6d88\u5931\uff0c\u7efd\u653e\u7c92\u5b50\\n\\n#### \u7c92\u5b50\u7efd\u653e\\n\\n- \u6bcf\u4e2a\u7c92\u5b50\u7efd\u653e\u65f6\uff0c\u521d\u59cb\u4f4d\u7f6e\u3001\u901f\u5ea6\u3001\u89d2\u5ea6\u3001\u989c\u8272\u5747\u5df2\u786e\u5b9a\\n  - \u521d\u59cb\u4f4d\u7f6e\uff1a\u70df\u82b1\u7684\u7ed3\u675f\u4f4d\u7f6e\\n  - \u901f\u5ea6\uff1a\u521d\u59cb\u662f\u968f\u673a\u7684\u3002\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u6a21\u62df\u6469\u64e6\u529b/\u963b\u529b\uff0c\u901f\u5ea6\u9010\u6e10\u51cf\u5c0f\\n  - \u89d2\u5ea6\uff1a\u968f\u673a\u3002\u751f\u6210\u540e\u4e0d\u518d\u53d1\u751f\u53d8\u5316\\n  - \u989c\u8272\uff1a\u70df\u82b1\u7684\u989c\u8272\u3002\u53ef\u4ee5\u56f4\u7ed5\u70df\u82b1\u7684\u989c\u8272\u6709\u4e9b\u8bb8\u53d8\u5316\uff0c\u5448\u73b0\u4e94\u989c\u516d\u8272\u7684\u6548\u679c\\n- \u4e3a\u6a21\u62df\u7269\u4f53\u4e0b\u5760\uff0c\u7c92\u5b50\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u9700\u8981\u6709\u6a21\u62df\u7684\u6469\u64e6\u529b\uff08\u7c92\u5b50\u79fb\u901f\u51cf\u5c0f\uff09\u3001\u91cd\u529b\u52a0\u901f\u5ea6\uff08\u6a21\u62df\u7c92\u5b50\u6709\u91cd\u529b\uff09\\n- \u7c92\u5b50\u79fb\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u989c\u8272\u9010\u6e10\u900f\u660e\uff08\u8868\u793a\u7c92\u5b50/\u70df\u82b1\u6d88\u5931\uff09\u3002\u4f4e\u4e8e\u4e00\u5b9a\u7684\u900f\u660e\u5ea6\u65f6\uff0c\u7c92\u5b50\u6d88\u5931\\n\\n#### \u8def\u7ebf\u5f62\u6210\\n\\n\u70df\u82b1\u548c\u7c92\u5b50\u7684\u79fb\u52a8\u8def\u7ebf\u8ba1\u7b97\u90fd\u7b26\u5408\u4e0b\u9762\u7684\u6d41\u7a0b\\n\\n- \u521d\u59cb\u4f4d\u7f6e\u968f\u673a\\n- \u79fb\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u968f\u7740\u901f\u5ea6\u53d1\u751f\u53d8\u5316\uff0c\u6839\u636e\u89d2\u5ea6\u8ba1\u7b97\u79fb\u52a8\u7684\u5750\u6807\\n- \u7528\u4e0a\u4e00\u6b21\u7684\u7ed3\u675f\u5750\u6807\u4f5c\u4e3a\u8fd9\u4e00\u6b21\u7684\u5f00\u59cb\u5750\u6807\uff0c\u5e76\u91cd\u65b0\u6839\u636e\u901f\u5ea6\u3001\u89d2\u5ea6\uff08\u56e0\u4e3a\u8981\u6cbf\u7740\u540c\u4e00\u4e2a\u65b9\u5411\u8d70\uff09\u8ba1\u7b97\u8981\u79fb\u52a8\u7684\u5750\u6807\u8ddd\u79bb\uff08\u5750\u6807\u53d8\u5316\u91cf\uff09\\n  - \u65b0\u5750\u6807=\u65e7\u5750\u6807+\u5750\u6807\u53d8\u5316\u91cf\\n\\n#### \u62d6\u5c3e\u6548\u679c\\n\\n`fillStyle`\u7684\u900f\u660e\u5ea6\u63a7\u5236\u62d6\u5c3e\u6548\u679c\uff0c\u8d8a\u900f\u660e\uff0c\u62d6\u5c3e\u8d8a\u660e\u663e\\n\\n![tail](./canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3/tail.png)\\n\\n# \u53c2\u8003\\n\\n[Canvas\u653e\u70df\u82b1](https://juejin.cn/post/6950544215549935623)"},{"id":"/2022/01/04/canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3","metadata":{"permalink":"/blog/index/2022/01/04/canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3","source":"@site/blog/2022/01/04/canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3.md","title":"canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3","description":"\u6548\u679c","date":"2022-01-04T00:00:00.000Z","formattedDate":"2022\u5e741\u67084\u65e5","tags":[{"label":"canvas","permalink":"/blog/index/tags/canvas"}],"readingTime":4.75,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3","toc_max_heading_level":6,"tags":["canvas"]},"prevItem":{"title":"canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/05/canvas\u70b8\u70df\u82b1\u601d\u8def\u603b\u7ed3"},"nextItem":{"title":"canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/03/canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3"}},"content":"\x3c!-- truncate --\x3e\\n\\n### \u6548\u679c\\n\\n![final](./canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3/final.gif)\\n\\n### \u6e90\u7801\\n\\n#### html\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```js\\n<!DOCTYPE html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b</title>\\n    <style>\\n      canvas {\\n        margin: 50px auto;\\n        display: block;\\n        box-shadow: 0 0 10px rgb(0 0 0 / 50%);\\n      }\\n    </style>\\n  </head>\\n  <body onload=\\"draw()\\">\\n    <canvas width=\\"800\\" height=\\"500\\"></canvas>\\n\\n    <script src=\\"./js/\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b.js\\"><\/script>\\n    <script>\\n      let offsetX = 0\\n      let offsetY = 0\\n      let targetArr = []\\n      function draw() {\\n        const canvas = document.querySelector(\'canvas\')\\n        const ctx = canvas.getContext(\'2d\')\\n        canvas.onmousemove = function (e) {\\n          offsetX = e.offsetX\\n          offsetY = e.offsetY\\n        }\\n        targetArr = prepareLine(canvas.width / 2, canvas.height / 2)\\n        startAnimation(ctx, canvas.width, canvas.height)\\n      }\\n      function prepareLine(startX, startY) {\\n        const res = []\\n        offsetX = startX\\n        offsetY = startY\\n        for (let i = 0; i < 100; i++) {\\n          res.push(new Line(startX, startY))\\n        }\\n        return res\\n      }\\n\\n      function startAnimation(ctx, width, height) {\\n        requestAnimationFrame(() => startAnimation(ctx, width, height))\\n        // \u900f\u660e\u5ea6\u63a7\u5236\u957f\u5c3e\u6548\u679c\u7684\u957f\u5ea6\\n        ctx.fillStyle = \'rgba(0,0,0,0.05)\'\\n        ctx.fillRect(0, 0, width, height)\\n        targetArr.forEach((obj) => {\\n          obj.draw(ctx, offsetX, offsetY)\\n        })\\n      }\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</details>\\n\\n#### js\\n\\n`\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b.js`\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```js\\nclass Line {\\n  constructor(startX, startY) {\\n    this.startX = startX;\\n\\n    this.startY = startY;\\n    // \u7ebf\u7684\u968f\u673a\u89d2\u5ea6\\n    this.randomAngle = this._getRandomAngle();\\n    // \u63a7\u5236\u8303\u56f4\\n    this.maxLineLength = 150;\\n    // \u63a7\u5236\u7c97\u7ec6\\n    this.lineWidth = 4;\\n    // \u89d2\u5ea6\u6539\u53d8\u7684\u9891\u7387\uff08\u8f6c\u901f\uff09\\n    this.angleRate = 0.02;\\n    // \u7531maxLineLength\u800c\u6765\uff0c\u63a7\u5236\u8303\u56f4\\n    this.lineLength = this._getRandomLength();\\n    this.lineColor = this._getRandomColor();\\n  }\\n\\n  setMaxLineLength(length) {\\n    this.maxLineLength = length;\\n  }\\n\\n  setLineWidth(width) {\\n    this.lineWidth = width;\\n  }\\n\\n  draw(ctx, offsetX, offsetY) {\\n    ctx.save();\\n    const { lineW, lineH } = this._computeLocationData();\\n    ctx.lineWidth = this.lineWidth;\\n    ctx.strokeStyle = this.lineColor;\\n    ctx.beginPath();\\n    // \u4e0a\u4e00\u4e2a\u70b9\u7684\u4f4d\u7f6e\\n    ctx.moveTo(this.startX, this.startY);\\n    // \u8ddd\u79bb\u9f20\u6807\u4f4d\u7f6e\u7684x\u5750\u6807\\n    this.startX = offsetX + lineW;\\n    // \u8ddd\u79bb\u9f20\u6807\u4f4d\u7f6e\u7684y\u5750\u6807\\n    this.startY = offsetY + lineH;\\n    // \u4ece\u4e0a\u4e00\u4e2a\u70b9\u7684\u4f4d\u7f6e\u753b\u5230\u4e0b\u4e00\u4e2a\u70b9\u7684\u4f4d\u7f6e(\u89d2\u5ea6\u65b9\u9762\u4e2d\u95f4\u76f8\u5deethis.angleRate\u5ea6)\\n    ctx.lineTo(this.startX, this.startY);\\n    ctx.stroke();\\n    ctx.closePath();\\n    ctx.restore();\\n  }\\n\\n  _computeLocationData() {\\n    this.randomAngle += this.angleRate;\\n    return {\\n      lineW: Math.cos(this.randomAngle) * this.lineLength, // \u7ebf\u7684\u968f\u673a\u957f\u5ea6\uff08x\u5750\u6807\uff09\\n      lineH: Math.sin(this.randomAngle) * this.lineLength, // \u7ebf\u7684\u968f\u673a\u9ad8\u5ea6\uff08y\u5750\u6807\uff09\\n    };\\n  }\\n\\n  _getRandomAngle() {\\n    return Math.random() * Math.PI * 2;\\n  }\\n\\n  _getRandomLength() {\\n    return Math.random() * this.maxLineLength;\\n  }\\n\\n  _getRandomColor() {\\n    const s = \\"0123456789ABCDEF\\";\\n    let c = \\"#\\";\\n    for (let i = 0; i < 6; i++) {\\n      c += s[Math.ceil(Math.random() * 15)];\\n    }\\n    return c;\\n  }\\n}\\n```\\n\\n</details>\\n\\n### \u601d\u8def\u68b3\u7406\\n\\n1. \u6240\u6709\u7684\u7ebf\u90fd\u6709\u76f8\u540c\u7684\u8868\u73b0\u5f62\u5f0f\uff0c\u53ef\u4ee5\u62bd\u8c61\u4e3a\u4e00\u4e2a`Line`\u7c7b\\n   1. \u6bcf\u6761\u7ebf\u7684\u957f\u5ea6\u3001\u989c\u8272\u90fd\u662f\u6052\u5b9a\u7684\uff0c\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u6bcf\u6761\u7ebf\u90fd\u6709\u957f\u5c3e\u6548\u679c\\n2. \u7ebf\u7684\u79fb\u52a8\u4f9d\u8d56\u4e8e\u9f20\u6807\u7684\u4f4d\u7f6e\\n   1. \u9f20\u6807\u79fb\u52a8\uff0c\u6bcf\u6761\u7ebf\u90fd\u4f1a\u8ddf\u7740\u52a8\\n\\n#### \u4e3b\u8981\u6d41\u7a0b\\n\\n1. \u521d\u59cb\u6240\u6709\u7ebf\u7684\u8d77\u70b9\u662f\u753b\u5e03\u4e2d\u95f4\uff0c\u6bcf\u6761\u7ebf\u957f\u3001\u989c\u8272\u90fd\u662f\u968f\u673a\u8ba1\u7b97\u7684\\n2. \u51c6\u5907\u7ebf\u65f6\uff0c\u662f\u4ece\u753b\u5e03\u4e2d\u5fc3\u5411\u5916\u6839\u636e\u968f\u673a\u8ba1\u7b97\u7684\u89d2\u5ea6\u3001\u7ebf\u957f\u5f00\u59cb\u753b\u7ebf\uff08\u8ba1\u7b97\u65b9\u5f0f\u53c2\u8003\u6b65\u9aa44\uff09\\n3. \u52a8\u753b\u5f00\u59cb\u540e\uff0c\u7ebf\u4ee5\u4e0a\u4e00\u6b21\u7684\u7ec8\u70b9\u4e3a\u8d77\u70b9\u5f00\u59cb\u7ed8\u5236\u65b0\u7ebf\\n4. \u65b0\u7ebf\u7684\u4f4d\u7f6e\\n   1. \u4f9d\u8d56\u4e8e\u9f20\u6807\u4f4d\u7f6e\\n   2. \u8ddd\u79bb\u9f20\u6807\u4f4d\u7f6e\u7684\u957f\u5ea6\u4f9d\u8d56\u4e8e\u4e4b\u524d\u968f\u673a\u8ba1\u7b97\u7684\u7ebf\u957f\u3002\u5e94\u8be5\u662f\uff1a\u9f20\u6807\u4f4d\u7f6e + \u7ebf\u957f\\n   3. \u56e0\u4e3a\u6bcf\u6761\u7ebf\u4f1a\u6709\u65cb\u8f6c\u7684\u6548\u679c\uff0c\u6240\u6709\u8be5\u4f4d\u7f6e\u5e94\u8be5\u6709\u4e00\u5b9a\u7684\u89d2\u5ea6\u53d8\u5316\uff0c\u5426\u5219\u5b9e\u73b0\u4e0d\u4e86\u7ebf\u65cb\u8f6c\u7684\u6548\u679c\\n      1. \u60f3\u8c61\u4e00\u4e0b\u5750\u6807\u7cfb\u4e0a\u534a\u5f84\u4e3a`r`\u7684\u5706\\n      2. \u4ece\u5706\u5fc3\u5411\u5916\u62c9\u4e00\u6761\u7ebf\uff0c\u4e0e\u5706\u4ea4\u4e8eA\u70b9(x, y)\uff0c\u89d2\u5ea6\u4e3a\u03b8\\n         1. \u7531\u4e09\u89d2\u51fd\u6570\uff0c\u53ef\u4ee5\u77e5\u9053\uff0c`x = r * cos\u03b8`\uff0c`y = r * sin\u03b8`\\n      3. \u89d2\u5ea6\u03b8\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5bf9\u5e94\u7684`x`\u3001`y`\u4e5f\u4f1a\u53d1\u751f\u76f8\u5e94\u7684\u53d8\u5316\\n   4. \u5f53\u89d2\u5ea6\u53d8\u5316\u65f6\uff0c\u65b0\u7ebf\u7684\u4f4d\u7f6e\u5e94\u8be5\u662f\\n      1. `x = \u9f20\u6807\u4f4d\u7f6eX + \u7ebf\u957f * cos\u03b8`\\n      2. `y = \u9f20\u6807\u4f4d\u7f6eY + \u7ebf\u957f * sin\u03b8`\\n5. \u52a8\u753b\u8fc7\u7a0b\u4e2d\u5faa\u73af\u6b65\u9aa43\u3001\u6b65\u9aa44\\n\\n![axis](./canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3/axis.png)\\n\\n#### \u957f\u5c3e\u6548\u679c\\n\\n\u5c06\u6e05\u9664\u753b\u5e03\u7684\u4ee3\u7801` ctx.clearRect(0, 0, canvas.width, canvas.heigth)`\\n\\n\u6362\u4e3a\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u8ba9\u5176\u91cd\u590d\u8986\u76d6\u4e4b\u524d\u7684\u6837\u5f0f\uff0c\u8fbe\u5230\u957f\u5c3e\u6548\u679c\\n\\n```js\\nctx.fillStyle = \\"rgba(0,0,0,0.05)\\";\\nctx.fillRect(0, 0, canvas.width, canvas.heigth);\\n```\\n\\n## \u53c2\u8003\\n\\nhttps://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_animations\\n\\nhttps://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Advanced_animations"},{"id":"/2022/01/03/canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3","metadata":{"permalink":"/blog/index/2022/01/03/canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3","source":"@site/blog/2022/01/03/canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3.md","title":"canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3","description":"\u6548\u679c","date":"2022-01-03T00:00:00.000Z","formattedDate":"2022\u5e741\u67083\u65e5","tags":[{"label":"canvas","permalink":"/blog/index/tags/canvas"}],"readingTime":6.09,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3","toc_max_heading_level":6,"tags":["canvas"]},"prevItem":{"title":"canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/04/canvas\u5b9e\u73b0\u9f20\u6807\u8ffd\u8e2a\u52a8\u753b\u601d\u8def\u603b\u7ed3"},"nextItem":{"title":"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0","permalink":"/blog/index/2022/01/01/\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6548\u679c\\n\\n![final](./canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3/final.gif)\\n\\n## \u6e90\u7801\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>\u592a\u9633\u7cfb\u52a8\u753b</title>\\n    <style>\\n      canvas {\\n        margin: 50px auto;\\n        display: block;\\n        box-shadow: 0 0 10px rgb(0 0 0 / 50%);\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <canvas width=\\"800\\" height=\\"500\\"></canvas>\\n\\n    <script>\\n      const sun = new Image();\\n      const moon = new Image();\\n      const earth = new Image();\\n      // \u5730\u7403\u8f68\u9053\u534a\u5f84\\n      const orbitRadius = 105;\\n      const sunSize = 300;\\n      const earthSize = 24;\\n\\n      init();\\n\\n      function init() {\\n        sun.src = \\"https://mdn.mozillademos.org/files/1456/Canvas_sun.png\\";\\n        moon.src = \\"https://mdn.mozillademos.org/files/1443/Canvas_moon.png\\";\\n        earth.src = \\"https://mdn.mozillademos.org/files/1429/Canvas_earth.png\\";\\n\\n        // \u5145\u5f53\u4e00\u6b21,\u56fe\u7247load\u4e8b\u4ef6\\n        window.requestAnimationFrame(draw);\\n      }\\n      function draw() {\\n        const canvas = document.querySelector(\\"canvas\\");\\n        const ctx = canvas.getContext(\\"2d\\");\\n\\n        // \u6e05\u7a7a\u56fe\u50cf(\u4e3a\u52a8\u753b\u505a\u51c6\u5907)\\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\\n        // \u4fdd\u5b58\u7ed8\u5236\u7684\u9ed8\u8ba4\u72b6\u6001\\n        ctx.save();\\n        // \u79fb\u52a8\u539f\u70b9(\u53ef\u6709\u53ef\u65e0)\\n        ctx.translate(100, 100);\\n\\n        drawSun(ctx);\\n\\n        // \u8c03\u6574\u7ed8\u5236\u539f\u70b9\uff0c\u4f7f\u5730\u7403\u4ee5\u592a\u9633\u5706\u5fc3\u4e3a\u65cb\u8f6c\u4e2d\u7ebf\u65cb\u8f6c => \u5730\u7403\u6cbf\u7740\u8f68\u9053\u8d70\uff08\u91cd\u70b9\uff09\\n        ctx.translate(sunSize / 2, sunSize / 2);\\n        drawEarth(ctx);\\n\\n        // \u4fdd\u5b58\u7ed8\u5236\u539f\u70b9\u5728\u8f68\u9053\u4e0a\u7684\u72b6\u6001\u5373\u65cb\u8f6c\u72b6\u6001\\n        ctx.save();\\n\\n        drawMoon(ctx);\\n        drawShadow(ctx);\\n\\n        // \u6062\u590d\u753b\u7b14\u72b6\u6001\uff08\u7ed8\u5236\u539f\u70b9\u5728\u8f68\u9053\u4e0a\uff09\\n        ctx.restore();\\n\\n        // \u6062\u590d\u9ed8\u8ba4\u72b6\u6001\uff0c\u907f\u514d\u5f71\u54cd\u4e0b\u6b21\u7ed8\u5236\\n        ctx.restore();\\n\\n        window.requestAnimationFrame(draw);\\n      }\\n\\n      function drawSun(ctx) {\\n        ctx.save();\\n        // \u7ed8\u5236\u592a\u9633\\n        ctx.drawImage(sun, 0, 0, sunSize, sunSize);\\n        // \u8bbe\u7f6e\u63cf\u8fb9\u989c\u8272\\n        ctx.strokeStyle = \\"rgba(0,153,255,0.4)\\";\\n        ctx.beginPath();\\n        // \u7ed8\u5236\u5730\u7403\u7684\u8f68\u9053(\u592a\u9633\u56fe\u7247\u5927\u5c0f\u662f300*300 => \u592a\u9633\u4e2d\u5fc3\u7684\u4f4d\u7f6e(150, 150))\\n        ctx.arc(sunSize / 2, sunSize / 2, orbitRadius, 0, Math.PI * 2);\\n        ctx.stroke();\\n        ctx.restore();\\n      }\\n\\n      function drawEarth(ctx) {\\n        const time = new Date();\\n        /*\\n          \u7ed8\u5236\u5730\u7403 \u8fd9\u4e2a6\u548c6000\u662f\u4ec0\u4e48\u610f\u601d?\\n          \u6309\u7167\u949f\u8868\u4e0a\u7684\u65cb\u8f6c\u89d2\u5ea6\uff1a1s\u8f6c6\u5ea6\\n\\n          // \u6bcf\u79d2\u8f6c60\u5ea6(\u6708\u4eae\u8f6c\uff0c\u6bd4\u5730\u7403\u8f6c\u7684\u5feb)\\n          \u5f53\u524d\u5ea6\u6570 = (360 / 6) * \u5f53\u524d\u79d2\u6570\\n          // \u6bcf\u79d2\u8f6c6\u5ea6 \uff08\u5730\u7403\u8f6c\uff09\\n          \u5f53\u524d\u5ea6\u6570 = (360 / 60) * \u5f53\u524d\u79d2\u6570\\n\\n          => \u6548\u679c\u4e0a\u6708\u4eae\u7ed5\u5730\u7403\u7684\u8f6c\u901f\u6bd4\u5730\u7403\u7ed5\u592a\u9633\u7684\u8f6c\u901f\u5feb10\u500d\\n        */\\n        ctx.rotate(\\n          ((2 * Math.PI) / 60) * time.getSeconds() +\\n            ((2 * Math.PI) / 60000) * time.getMilliseconds(),\\n        );\\n\\n        // \u5728\u539f\u70b9\u5728\u592a\u9633\u4e2d\u5fc3\u7684\u57fa\u7840\u4e0a\uff0c\u79fb\u52a8\u7ed8\u5236\u539f\u70b9\u5230\u5730\u7403\u4e2d\u5fc3\\n        ctx.translate(orbitRadius, 0);\\n        // \u600e\u4e48\u6cbf\u7740\u8f68\u9053\u8d70\uff1f\u5148\u4ee5\u592a\u9633\u4e2d\u5fc3\u4e3a\u65cb\u8f6c\u4e2d\u5fc3\u65cb\u8f6c\uff0c\u518d\u8c03\u6574\u8ddd\u79bb\\n        ctx.drawImage(\\n          earth,\\n          -earthSize / 2, // \u4f7f\u5730\u7403\u4e2d\u5fc3\u7684x\u5750\u6807\u5728\u8f68\u9053\u4e0a\\n          -earthSize / 2, // \u4f7f\u5730\u7403\u4e2d\u5fc3\u7684y\u5750\u6807\u5728\u8f68\u9053\u4e0a\\n          earthSize,\\n          earthSize,\\n        );\\n      }\\n\\n      function drawMoon(ctx) {\\n        // \u4fdd\u5b58\u753b\u7b14\u72b6\u6001\uff0c\u63a5\u4e0b\u91cc\u6709\u539f\u70b9\u4f4d\u79fb\u3001\u65cb\u8f6c\u6548\u679c\u4fee\u6539\\n        ctx.save();\\n        const time = new Date();\\n        ctx.rotate(\\n          ((2 * Math.PI) / 6) * time.getSeconds() +\\n            ((2 * Math.PI) / 6000) * time.getMilliseconds(),\\n        );\\n\\n        // 20: \u5730\u7403\u8f68\u9053\u4e0e\u6708\u4eae\u7684\u95f4\u8ddd\\n        ctx.translate(20, 0);\\n        // \u7ed8\u5236\u6708\u4eae\\n        ctx.drawImage(moon, 0, 0);\\n\\n        // \u6062\u590d\u72b6\u6001\uff0c\u907f\u514d\u5f71\u54cd\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\\n        ctx.restore();\\n      }\\n\\n      function drawShadow(ctx) {\\n        ctx.save();\\n        ctx.fillStyle = \\"rgba(0,0,0,0.4)\\";\\n        ctx.fillRect(\\n          0,\\n          -earthSize / 2, // \u8ba9\u77e9\u5f62\u7eb5\u5411\u4e2d\u5fc3\u4e0e\u5730\u7403\u7684\u7eb5\u5411\u4e2d\u5fc3\u6301\u5e73\\n          40, // \u80fd\u906e\u7740\u4e00\u822c\u5730\u7403\u548c\u6708\u4eae\u5c31\u884c\\n          earthSize,\\n        );\\n        ctx.restore();\\n      }\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</details>\\n\\n## \u601d\u8def\\n\\n\u7ed8\u5236\u5730\u7403\u3001\u6708\u4eae\u3001\u9634\u5f71\u7684\u65f6\u5019\uff0c\u5c06\u4ed6\u4eec\u770b\u4f5c\u4e0e\u592a\u9633\u4e2d\u5fc3\u5728\u4e00\u6c34\u5e73\u7ebf\u4e0a\u3002\\n\\n1. \u4fdd\u5b58\u539f\u59cb\u753b\u7b14\u72b6\u6001\\n2. \u7ed8\u5236\u592a\u9633\\n3. \u7ed8\u5236\u5730\u7403\u8f68\u9053\\n   1. \u4ee5\u592a\u9633\u4e2d\u5fc3\u4e3a\u7ed8\u5236\u539f\u70b9\u753b\u5706\u5f27\\n4. \u7ed8\u5236\u5730\u7403\\n   1. \u4ee5\u592a\u9633\u4e2d\u5fc3\u4e3a\u65cb\u8f6c\u4e2d\u5fc3\uff0c\u65cb\u8f6c\u5730\u7403\u3002\u65cb\u8f6c\u89d2\u5ea6\u5bf9\u7167\u949f\u8868\u65cb\u8f6c\uff0c\u4ee5\u79d2\u6765\u8ba1\u7b97\\n   2. \u4ee5\u4e0e\u592a\u9633\u4e2d\u5fc3\u7eb5\u5411\u6301\u5e73\u7684\u8f68\u9053\u4f4d\u7f6e(A\u70b9)\u4e3a\u7ed8\u5236\u539f\u70b9\u7ed8\u5236\u5730\u7403\u3002\\n5. \u7ed8\u5236\u6708\u4eae\\n   1. \u6708\u4eae\u7684\u7ed8\u5236\u4e0d\u5f71\u54cd\u5176\u4ed6\u56fe\u5f62\u7684\u7ed8\u5236\uff0c\u6240\u6709\u7ed8\u5236\u6708\u4eae\u524d\u540e\u8981\u4fdd\u5b58\u548c\u6062\u590d\u753b\u7b14\u72b6\u6001\\n   2. \u4ee5A\u70b9\u4e3a\u4e2d\u5fc3\u65cb\u8f6c\\n   3. \u8bbe\u7f6e\u6708\u4eae\u4e0eA\u70b9\u7684\u8ddd\u79bb(\u6548\u679c\u4e0a\u662f\u8bbe\u7f6e\u5730\u7403\u4e0e\u6708\u4eae\u7684\u8ddd\u79bb)\\n6. \u7ed8\u5236\u5730\u7403\u906e\u6321\u6708\u4eae\u592a\u9633\u5149\u7167\u5c04\u7684\u6548\u679c\\n   1. \u9634\u5f71\u7684\u7ed8\u5236\u4e0d\u5f71\u54cd\u5176\u4ed6\u56fe\u5f62\u7684\u7ed8\u5236\uff0c\u6240\u6709\u7ed8\u5236\u9634\u5f71\u524d\u540e\u8981\u4fdd\u5b58\u548c\u6062\u590d\u753b\u7b14\u72b6\u6001\\n   2. \u4ee5A\u70b9\u753b\u77e9\u5f62\uff0c\u9ad8\u4e3a\u5730\u7403\u7684\u9ad8\u5ea6\uff0c\u5bbd\u4ee5\u80fd\u906e\u7740\u6708\u4eae\u4e3a\u4e3b\uff0c\u8981\u906e\u7740\u4e00\u534a\u7684\u5730\u7403\uff08\u77e9\u5f62\u7eb5\u5411\u4e2d\u5fc3\u8981\u4e0e\u5730\u7403\u7eb5\u5411\u4e2d\u5fc3\u6301\u5e73\uff09\\n7. \u6062\u590d\u539f\u59cb\u753b\u7b14\u72b6\u6001\uff0c\u907f\u514d\u5f71\u54cd\u4e0b\u6b21\u7ed8\u5236\\n\\n## \u603b\u7ed3\\n\\n### beginPath\\n\\n\u753b\u5706\u5f27\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u8c03\u7528`beginPath()`\u65b9\u6cd5\uff0c\u5426\u5219\u5730\u7403\u8f68\u9053\u7684\u989c\u8272\u5c31\u5f88\u4eae\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u73b0\u5728\u8fd8\u4e0d\u77e5\u9053\u3002\\n\\n### translate\\n\\n\u6bcf\u6b21\u79fb\u52a8\u662f\u4ee5\u4e0a\u6b21\u7684\u539f\u70b9\u4e3a\u57fa\u51c6\u70b9\u79fb\u52a8\u7ed8\u5236\u539f\u70b9\u3002\u521d\u59cb\u7ed8\u5236\u539f\u70b9\u5750\u6807\u4e3a`(0,0)`\\n\\n### rotate\\n\\n\u6bcf\u6b21\u90fd\u662f\u4ee5\u4e0a\u4e00\u6b21\u7684\u65cb\u8f6c\u89d2\u5ea6\u4e3a\u57fa\u51c6\uff0c\u4ee5\u539f\u70b9\u4e3a\u4e2d\u5fc3\u65cb\u8f6c\u3002\u521d\u59cb\u89d2\u5ea6\u4e3a`0\xb0`\\n\\n### translate\u4e0erotate\u7684\u524d\u540e\u987a\u5e8f\\n\\n\u5047\u8bbe\uff0c\u521d\u59cb\u5750\u6807\u539f\u70b9\u4e3a(0, 0)\uff1b\u4f4d\u79fb\u5750\u6807\u4e3a(100, 100);\u65cb\u8f6c\u89d2\u5ea6\u4e3a45\u5ea6\\n\\n- \u5148translate\u518drotate\\n  - \u5148\u79fb\u52a8\u5750\u6807\u539f\u70b9\u5230(100, 100)\\n  - \u4f1a\u4ee5(100,100)\u4e3a\u4e2d\u5fc3\u65cb\u8f6c45\u5ea6\\n- \u5148rotate\u518dtranslate\\n  - \u5148\u4ee5(0, 0)\u4e3a\u4e2d\u5fc3\u65cb\u8f6c45\u5ea6\\n  - \u518d\u79fb\u52a8\u539f\u70b9\u5230(100, 100)\u4e3a\u4e0b\u6b21\u7ed8\u753b\u505a\u51c6\u5907\\n\\n## \u53c2\u8003\\n\\n[Basic Animations](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_animations)"},{"id":"/2022/01/01/\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0","metadata":{"permalink":"/blog/index/2022/01/01/\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0","source":"@site/blog/2022/01/01/\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0.md","title":"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0","description":"\u6e90\u7801","date":"2022-01-01T00:00:00.000Z","formattedDate":"2022\u5e741\u67081\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":1.34,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3","permalink":"/blog/index/2022/01/03/canvas\u5b9e\u73b0\u7684\u592a\u9633\u7cfb\u52a8\u753b\u601d\u8def\u603b\u7ed3"},"nextItem":{"title":"\u9632\u6296\u4e0e\u8282\u6d41","permalink":"/blog/index/2022/01/01/\u9632\u6296\u4e0e\u8282\u6d41"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6e90\u7801\\n\\n```js\\nclass EventEmitter {\\n  constructor() {\\n    this.events = {};\\n  }\\n  // \u7ed1\u5b9a\u51fd\u6570\\n  on(type, fn) {\\n    (this.events[type] || (this.events[type] = [])).push(fn);\\n  }\\n  // \u901a\u77e5\u51fd\u6570\u6267\u884c\\n  emit(type, ...args) {\\n    const callbackArr = this.events[type];\\n    if (!callbackArr || !callbackArr.length) {\\n      return;\\n    }\\n    callbackArr.forEach((callback) => {\\n      callback(...args);\\n    });\\n  }\\n  // \u89e3\u7ed1\\n  off(type, fn) {\\n    if (!this.events[type]) {\\n      return;\\n    }\\n    if (!fn) {\\n      this.events[type].length = 0;\\n      return;\\n    }\\n    const callbackArr = this.events[type];\\n    if (!callbackArr.length) {\\n      return;\\n    }\\n\\n    let i = callbackArr.length,\\n      callback = null;\\n    while (i--) {\\n      callback = callbackArr[i];\\n      // fn\u662f\u5c5e\u6027\u65f6\u5bf9\u5e94once\u65b9\u6cd5\u4e2d\u7684fn\u5c5e\u6027\u8d4b\u503c\\n      if (callback === fn || callback.fn === fn) {\\n        callbackArr.splice(i, 1);\\n        break;\\n      }\\n    }\\n  }\\n  // \u7ed1\u5b9a\u7684\u51fd\u6570\u53ea\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21\\n  once(type, fn) {\\n    const _this = this;\\n    function on(...args) {\\n      _this.off(type, on);\\n      fn.apply(_this, ...args);\\n    }\\n    // \u7ed9\u89e3\u7ed1\u65f6\u4f7f\u7528\\n    /* \u5f53once\u7ed1\u5b9a\u7684\u51fd\u6570\u4e00\u6b21\u4e5f\u6ca1\u6709\u88ab\u8c03\u7528\u8fc7\uff0c\u4f46\u662ffn\u51fd\u6570\u9700\u8981\u88ab\u89e3\u7ed1\u65f6\uff0c\\n\\t\u89e3\u7ed1\u5224\u65ad\u4f7f\u7528\u7684\u5c31\u662f\u5305\u88c5\u51fd\u6570on\u548c\u7ed1\u5b9a\u51fd\u6570fn\u7684\u6bd4\u8f83\u7ed3\u679c\uff0c\u6b64\u65f6\u5224\u5b9a\u4e00\u5b9a\u4e0d\u6b63\u786e\u3002\\n\\t\u6240\u4ee5\u5c06fn\u4fdd\u5b58\u8d77\u6765\u4f9b\u89e3\u7ed1\u65f6\u5224\u5b9a\u4f7f\u7528 */\\n    on.fn = fn;\\n    this.on(type, on);\\n  }\\n}\\n```\\n\\n## \u53c2\u8003\\n\\n> [\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u53ca\u7528\u6237`TE_0915`\u7684\u8bc4\u8bba](https://juejin.cn/post/6844903850105634824)"},{"id":"/2022/01/01/\u9632\u6296\u4e0e\u8282\u6d41","metadata":{"permalink":"/blog/index/2022/01/01/\u9632\u6296\u4e0e\u8282\u6d41","source":"@site/blog/2022/01/01/\u9632\u6296\u4e0e\u8282\u6d41.md","title":"\u9632\u6296\u4e0e\u8282\u6d41","description":"\u9632\u6296","date":"2022-01-01T00:00:00.000Z","formattedDate":"2022\u5e741\u67081\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":9.47,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u9632\u6296\u4e0e\u8282\u6d41","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0","permalink":"/blog/index/2022/01/01/\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684js\u4ee3\u7801\u5b9e\u73b0"},"nextItem":{"title":"SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0","permalink":"/blog/index/2021/12/31/SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0"}},"content":"\x3c!-- truncate --\x3e\\n\\n### \u9632\u6296\\n\\n\u77ed\u65f6\u95f4\u5185\u591a\u6b21\u89e6\u53d1\u540c\u4e00\u51fd\u6570\uff0c\u53ea\u6267\u884c\u7b2c\u4e00\u6b21/\u6700\u540e\u4e00\u6b21\u3002\u6bd4\u5982\u8bf4\uff1a\u4e00\u53ea\u5c0f\u732b\u51b7\u7684\u53d1\u6296\uff0c\u7a0d\u7528\u529b\u6309\u4f4f\u5b83\uff0c\u5b83\u5c31\u4e0d\u6296\u4e86\u3002\u53ef\u4ee5\u5728\u5b83\u8fd8\u6ca1\u6296\u7684\u65f6\u5019\u6309\u4f4f\uff0c\u4e5f\u53ef\u4ee5\u5728\u5b83\u6296\u4e86\u5f88\u4e45\u4e4b\u540e\u6309\u4f4f\\n\\n#### \u666e\u901a\u9632\u6296\\n\\n```js\\n/**\\n * \u666e\u901a\u5b9e\u73b0\\n * \u51fd\u6570\u9632\u6296[\u51fd\u6570\u9ad8\u9891\u7387\u88ab\u8c03\u7528\u53ea\u6267\u884c\u7b2c\u4e00\u6b21/\u6700\u540e\u4e00\u6b21]\\n * @param {Function} func \u9700\u8981\u9632\u6296\u7684\u51fd\u6570\\n * @param {Number} [duration=1000] \u9632\u6296\u65f6\u957f[\u591a\u957f\u65f6\u95f4\u5185\u7684\u70b9\u51fb\u9700\u8981\u9632\u6296]\\n */\\nfunction debounce(func, duration = 1000) {\\n  let timer = null;\\n  return function (...args) {\\n    /*if (timer!== null)*/ clearTimeout(timer);\\n    timer = setTimeout(() => {\\n      clearTimeout(timer);\\n      func.apply(this, args);\\n    }, duration);\\n  };\\n}\\n```\\n\\n\u5982\u679c\u8981\u7ed9\u9632\u6296\u51fd\u6570\u7ed1\u5b9a`this`\uff0c\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\\n\\n##### \u7ed1\u5b9athis\\n\\n```js\\nfunction mClick() {\\n  console.log(\\"\u6211\u88ab\u70b9\u540d\u5566\uff01\\");\\n}\\n\\ndebounce(mClick).bind(this);\\n```\\n\\n#### \u6709\u914d\u7f6e\u9879\u7684\u9632\u6296\\n\\n```js\\n/**\\n * \u51fd\u6570\u9632\u6296\\n * @param {Function} func \u9700\u8981\u9632\u6296\u7684\u51fd\u6570\\n * @param {Boolean} [first=true] \u662f\u5426\u9996\u6b21\u9632\u6296\\n * @param {Number} [duration=1000] \u9632\u6296\u6301\u7eed\u65f6\u957f\\n * @returns\\n */\\nfunction debounce(func, first = true, duration = 1000) {\\n  // \u58f0\u660e\u4e00\u4e2a\u7a7a\u7684\u5b9a\u65f6\u5668id\uff0c\u4e3a\u9632\u6296\u505a\u51c6\u5907\\n  let timer = null;\\n  // \u8fd4\u56de\u51fd\u6570\u662f\u56e0\u4e3a\u8fd9\u4e2a\u9632\u6296\u51fd\u6570\u53ef\u80fd\u4f1a\u88ab\u7ed1\u5b9a/\u8d4b\u503c\u7ed9\u5176\u4ed6\u51fd\u6570\u4f7f\u7528\\n  return function (...args) {\\n    first && !timer && func.apply(this, args);\\n    // \u4e0d\u7528\u5224\u65adtimer\u662f\u5426\u5b58\u5728\uff0c\u4f20\u5165\u4e00\u4e2a\u9519\u8bef\u7684 ID \u7ed9 clearTimeout()\u4e0d\u4f1a\u6709\u4efb\u4f55\u5f71\u54cd\uff1b\u4e5f\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\\n    clearTimeout(timer);\\n    timer = setTimeout(() => {\\n      clearTimeout(timer);\\n      // \u975e\u9996\u6b21\u9632\u6296\u5219\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\\n      !first && func.apply(this, args);\\n      // \u4e3a\u4e0b\u4e00\u6b21\u9632\u6296\u505a\u51c6\u5907\\n      timer = null;\\n    }, duration);\\n  };\\n}\\n```\\n\\n#### \u53ef\u53d6\u6d88\u7684\u9632\u6296\\n\\n```js\\n/**\\n * \u51fd\u6570\u9632\u6296\\n * @param {Function} func \u9700\u8981\u9632\u6296\u7684\u51fd\u6570\\n * @param {Boolean} [first=true] \u662f\u5426\u9996\u6b21\u9632\u6296\\n * @param {Number} [duration=1000] \u9632\u6296\u6301\u7eed\u65f6\u957f\\n * @returns\\n */\\nfunction debounce(func, first = true, duration = 1000) {\\n  // \u58f0\u660e\u4e00\u4e2a\u7a7a\u7684\u5b9a\u65f6\u5668id\uff0c\u4e3a\u9632\u6296\u505a\u51c6\u5907\\n  let timer = null;\\n  let debounced = function (...args) {\\n    first && !timer && func.apply(this, args);\\n    // \u4e0d\u7528\u5224\u65adtimer\u662f\u5426\u5b58\u5728\uff0c\u4f20\u5165\u4e00\u4e2a\u9519\u8bef\u7684 ID \u7ed9 clearTimeout()\u4e0d\u4f1a\u6709\u4efb\u4f55\u5f71\u54cd\uff1b\u4e5f\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\\n    clearTimeout(timer);\\n    timer = setTimeout(() => {\\n      clearTimeout(timer);\\n      // \u975e\u9996\u6b21\u9632\u6296\u5219\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\\n      !first && func.apply(this, args);\\n      // \u4e3a\u4e0b\u4e00\u6b21\u9632\u6296\u505a\u51c6\u5907\\n      timer = null;\\n    }, duration);\\n  };\\n  debounced.cancel = function () {\\n    clearTimeout(timer);\\n    // \u4e3a\u4e0b\u4e00\u6b21\u9632\u6296\u505a\u51c6\u5907\\n    timer = null;\\n  };\\n  // \u8fd4\u56de\u51fd\u6570\u662f\u56e0\u4e3a\u8fd9\u4e2a\u9632\u6296\u51fd\u6570\u53ef\u80fd\u4f1a\u88ab\u7ed1\u5b9a/\u8d4b\u503c\u7ed9\u5176\u4ed6\u51fd\u6570\u4f7f\u7528\\n  return debounced;\\n}\\n```\\n\\n### \u8282\u6d41\\n\\n\u4e00\u6bb5\u65f6\u95f4\u5185\u53ea\u5141\u8bb8\u51fd\u6570\u6267\u884c\u4e00\u6b21\\n\\n\u4f7f\u7528\u573a\u666f\uff1a\u6eda\u52a8\u6761\u6eda\u52a8\uff0c\u8fc7\u7a0b\u4e2d\u901f\u5ea6\u53ef\u80fd\u5f88\u5feb\uff0c\u4f46\u662f\u8089\u773c\u6355\u6349\u4e0d\u5230\uff0c\u6240\u4ee5\u90a3\u4e9b\u8089\u773c\u6355\u6349\u4e0d\u5230\u7684\u51fd\u6570\u8c03\u7528\u662f\u4e0d\u5fc5\u8981\u7684\uff0c\u6545\u800c\u8282\u6d41\uff0c\u8282\u7701\u6027\u80fd\u3002\\n\\n#### \u65f6\u95f4\u6233\u8282\u6d41\\n\\n\u9996\u6b21\u6267\u884c\uff0c`duration`\u671f\u95f4\u5185\u5c3e\u6b21\u4e0d\u6267\u884c\\n\\n\u4f1a\u5728\u7b2c\u4e00\u6b21\u89e6\u53d1\u4e8b\u4ef6\u65f6\u7acb\u5373\u6267\u884c[\u7ed9\u4e8b\u4ef6\u7ed1\u5b9a\u51fd\u6570\u4e0e\u771f\u6b63\u89e6\u53d1\u4e8b\u4ef6\u7684\u95f4\u9694\u4e00\u822c\u5927\u4e8e`duration`]\uff0c\u4ee5\u540e\u6bcf\u8fc7`duration`\u65f6\u957f\u540e\uff0c\u51fd\u6570\u53ef\u4ee5\u88ab\u518d\u6b21\u89e6\u53d1\u6267\u884c\u3002\\n\\n```js\\n/**\\n * \u51fd\u6570\u8282\u6d41\\n * @param {Function} func \u9700\u8981\u8282\u6d41\u7684\u51fd\u6570\\n * @param {Number} [duration=1000] \u8282\u6d41\u6301\u7eed\u7684\u65f6\u957f\\n */\\nfunction throttle(func, duration = 1000) {\\n  let prev = 0;\\n  return function (...args) {\\n    const now = Date.now();\\n    // \u4e24\u6b21\u51fd\u6570\u88ab\u8c03\u7528\u7684\u65f6\u957f\u5927\u4e8e\u8282\u6d41\u65f6\u957f\\n    if (now - prev > duration) {\\n      func.apply(this, args);\\n      prev = Date.now();\\n    }\\n  };\\n}\\n```\\n\\n##### \u7ed1\u5b9athis\\n\\n```js\\nfunction mScroll() {\\n  console.log(\\"\u6211\u6ed1\u6ed1\u68af\u5566\uff01\\");\\n}\\nthrottle(mScroll).bind(this);\\n```\\n\\n#### \u5b9a\u65f6\u5668\u8282\u6d41\\n\\n\u7b2c\u4e00\u6b21\u89e6\u53d1\u4e0d\u4f1a\u6267\u884c\uff0c\u800c\u662f\u5728`duration`\u65f6\u957f\u540e\u6267\u884c\uff0c\u5f53\u6700\u540e\u4e00\u6b21\u505c\u6b62\u89e6\u53d1\u540e\uff0c\u8fd8\u4f1a\u518d\u6267\u884c\u4e00\u6b21\u51fd\u6570\u3002\\n\\n```js\\n/**\\n * \u51fd\u6570\u8282\u6d41\\n * @param {Function} func \u9700\u8981\u88ab\u8282\u6d41\u7684\u51fd\u6570\\n * @param {Number} [duration=1000] \u8282\u6d41\u6301\u7eed\u65f6\u957f\\n */\\nfunction throttle(func, duration = 1000) {\\n  let timer = null;\\n  return function (...args) {\\n    // \u5b9a\u65f6\u5668\u672a\u6267\u884c\u7ed3\u675f\uff0c\u51fd\u6570\u518d\u6b21\u88ab\u8c03\u7528\u4e0d\u751f\u6548\\n    if (!timer) {\\n      timer = setTimeout(() => {\\n        clearTimeout(timer);\\n        func.apply(this, args);\\n        timer = null;\\n      }, duration);\\n    }\\n  };\\n}\\n```\\n\\n#### \u65f6\u95f4\u6233 + \u5b9a\u65f6\u5668\u7684\u8282\u6d41\\n\\n\u9996\u3001\u5c3e\u6b21\u5747\u6267\u884c\u3002[\u4e24\u8005\u4ea4\u66ff\u4f7f\u7528\uff0c\u7b2c\u4e00\u6b21\u662f\u65f6\u95f4\u6233\uff0c\u7b2c\u4e8c\u6b21\u662f\u5b9a\u65f6\u5668\uff0c\u7b2c\u4e09\u6b21\u662f\u65f6\u95f4\u6233\uff0c\u7b2c\u56db\u6b21\u662f\u5b9a\u65f6\u5668\u2026\u2026\uff0c\u7406\u60f3\u72b6\u6001\u4e0b\u5982\u6b64\uff0c\u4f46\u788d\u4e8e\u5b9a\u65f6\u5668\u7684\u6d88\u606f\u961f\u5217\u5904\u7406\u7b49\u5f71\u54cd\uff0c\u6709\u65f6\u53ef\u80fd\u4e0d\u662f\u8fd9\u6837\u3002]\\n\\n```js\\n/**\\n * \u51fd\u6570\u8282\u6d41\\n * @param {Function} func \u9700\u8981\u88ab\u8282\u6d41\u7684\u51fd\u6570\\n * @param {Number} [duration=1000] \u8282\u6d41\u6301\u7eed\u65f6\u957f\\n */\\nfunction throttle(func, duration = 1000) {\\n  let timer,\\n    prev = 0;\\n  return function (...args) {\\n    const now = Date.now();\\n    // \u89e3\u51b3\u7b2c\u4e00\u6b21\u4e0d\u6267\u884c\\n    if (now - prev > duration) {\\n      // \u67d0\u4e2a\u5b9a\u65f6\u5668\u6267\u884c\u7ed3\u675f\uff0c\u6e05\u9664\u5b9a\u65f6\u5668\\n      if (timer) {\\n        clearTimeout(timer);\\n        // \u5982\u679c\u5b9a\u65f6\u5668\u8d85\u8fc7\u4e86duration\u65f6\u957f\u4ecd\u7136\u6ca1\u6709\u6267\u884c\u51fd\u6570[\u88ab\u5176\u4ed6\u4e8b\u60c5\u5f71\u54cd]\uff0c\u5219\u53d6\u6d88\u8fd9\u4e2a\u5b9a\u65f6\u5668\uff0c\u7acb\u5373\u6267\u884c\u51fd\u6570\\n        timer = null;\\n      }\\n      func.apply(this, args);\\n      prev = Date.now();\\n    } else if (!timer) {\\n      // \u89e3\u51b3\u6700\u540e\u4e00\u6b21\u4e0d\u6267\u884c\\n      // \u4e24\u6b21\u8c03\u7528\u65f6\u957f\u5c0f\u4e8eduration\u65f6\u4f7f\u7528\\n      timer = setTimeout(() => {\\n        prev = Date.now();\\n        func.apply(this, args);\\n        timer = null;\\n      }, duration);\\n    }\\n  };\\n}\\n```\\n\\n#### \u6709\u914d\u7f6e\u9879\u7684\u8282\u6d41\\n\\n```js\\n/**\\n * \u51fd\u6570\u8282\u6d41\\n * @param {Function} func \u9700\u8981\u88ab\u8282\u6d41\u7684\u51fd\u6570\\n * @param {Object} option \u8282\u6d41\u914d\u7f6e\u9879\\n * option = {\\n * \\t\\tleading: false, // \u7981\u6b62\u7b2c\u4e00\u6b21\u6267\u884c\\n * \\t\\ttrailing: false // \u7981\u6b62\u6700\u540e\u4e00\u6b21\u6267\u884c\\n *\\t}\\n *\\t\\tleading\u548ctrailing\u4e0d\u80fd\u540c\u65f6\u4e3afalse[\u540c\u4e3afalse\uff0c\u8282\u6d41\u5931\u6548]\\n * @param {Number} [duration=1000] \u8282\u6d41\u6301\u7eed\u65f6\u957f\\n */\\nfunction throttle(func, option, duration = 1000) {\\n  !option && (option = { leading: true, trailing: true });\\n  let timer,\\n    prev = 0;\\n  return function (...args) {\\n    const now = Date.now();\\n    if (!(option.leading || prev)) {\\n      prev = now;\\n    }\\n    // \u89e3\u51b3\u7b2c\u4e00\u6b21\u4e0d\u6267\u884c\\n    if (now - prev > duration) {\\n      // \u67d0\u4e2a\u5b9a\u65f6\u5668\u6267\u884c\u7ed3\u675f\uff0c\u6e05\u9664\u5b9a\u65f6\u5668\\n      if (timer) {\\n        clearTimeout(timer);\\n        // \u5982\u679c\u5b9a\u65f6\u5668\u8d85\u8fc7\u4e86duration\u65f6\u957f\u4ecd\u7136\u6ca1\u6709\u6267\u884c\u51fd\u6570[\u88ab\u5176\u4ed6\u4e8b\u60c5\u5f71\u54cd]\uff0c\u5219\u53d6\u6d88\u8fd9\u4e2a\u5b9a\u65f6\u5668\uff0c\u7acb\u5373\u6267\u884c\u51fd\u6570\\n        timer = null;\\n      }\\n      func.apply(this, args);\\n      prev = Date.now();\\n    } else if (!timer && option.trailing) {\\n      // \u89e3\u51b3\u6700\u540e\u4e00\u6b21\u4e0d\u6267\u884c\\n      // \u4e24\u6b21\u8c03\u7528\u65f6\u957f\u5c0f\u4e8eduration\u65f6\u4f7f\u7528\\n      timer = setTimeout(() => {\\n        clearTimeout(timer);\\n        prev = Date.now();\\n        func.apply(this, args);\\n        timer = null;\\n      }, duration);\\n    }\\n  };\\n}\\n```\\n\\n#### \u53ef\u53d6\u6d88\u7684\u8282\u6d41\\n\\n```js\\n/**\\n * \u51fd\u6570\u8282\u6d41\\n * @param {Function} func \u9700\u8981\u88ab\u8282\u6d41\u7684\u51fd\u6570\\n * @param {Object} option \u8282\u6d41\u914d\u7f6e\u9879\\n * option = {\\n * \\t\\tleading: false, // \u7981\u6b62\u7b2c\u4e00\u6b21\u6267\u884c\\n * \\t\\ttrailing: false // \u7981\u6b62\u6700\u540e\u4e00\u6b21\u6267\u884c\\n *\\t}\\n *\\t\\tleading\u548ctrailing\u4e0d\u80fd\u540c\u65f6\u4e3afalse[\u540c\u4e3afalse\uff0c\u8282\u6d41\u5931\u6548]\\n * @param {Number} [duration=1000] \u8282\u6d41\u6301\u7eed\u65f6\u957f\\n */\\nfunction throttle(func, option, duration = 1000) {\\n  !option && (option = { leading: true, trailing: true });\\n  let timer,\\n    prev = 0;\\n\\n  let trottled = function (...args) {\\n    const now = Date.now();\\n    if (!(option.leading || prev)) {\\n      prev = now;\\n    }\\n    // \u89e3\u51b3\u7b2c\u4e00\u6b21\u4e0d\u6267\u884c\\n    if (now - prev > duration) {\\n      // \u67d0\u4e2a\u5b9a\u65f6\u5668\u6267\u884c\u7ed3\u675f\uff0c\u6e05\u9664\u5b9a\u65f6\u5668\\n      if (timer) {\\n        clearTimeout(timer);\\n        // \u5982\u679c\u5b9a\u65f6\u5668\u8d85\u8fc7\u4e86duration\u65f6\u957f\u4ecd\u7136\u6ca1\u6709\u6267\u884c\u51fd\u6570[\u88ab\u5176\u4ed6\u4e8b\u60c5\u5f71\u54cd]\uff0c\u5219\u53d6\u6d88\u8fd9\u4e2a\u5b9a\u65f6\u5668\uff0c\u7acb\u5373\u6267\u884c\u51fd\u6570\\n        timer = null;\\n      }\\n      func.apply(this, args);\\n      prev = Date.now();\\n    } else if (!timer && option.trailing) {\\n      // \u89e3\u51b3\u6700\u540e\u4e00\u6b21\u4e0d\u6267\u884c\\n      // \u4e24\u6b21\u8c03\u7528\u65f6\u957f\u5c0f\u4e8eduration\u65f6\u4f7f\u7528\\n      timer = setTimeout(() => {\\n        clearTimeout(timer);\\n        prev = Date.now();\\n        func.apply(this, args);\\n        timer = null;\\n      }, duration);\\n    }\\n  };\\n\\n  trottled.cancel = function () {\\n    clearTimeout(timer);\\n    timer = null;\\n    prev = 0;\\n  };\\n  return trottled;\\n}\\n```\\n\\n#### window.requestAnimationFrame\u8282\u6d41\\n\\n\u8282\u6d41\u65f6\u673a\u4e0d\u53ef\u63a7[\u51fd\u6570\u4e0d\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u5c31\u88ab\u8c03\u7528\u4e86\uff0c\u56e0\u4e3a\u4e0d\u77e5\u9053\u4ec0\u4e48\u65f6\u95f4\u6d4f\u89c8\u5668\u4f1a\u91cd\u7ed8]\\n\\n```js\\n/**\\n * \u51fd\u6570\u8282\u6d41\\n * @param {Function} func \u9700\u8981\u8282\u6d41\u7684\u51fd\u6570\\n */\\nfunction throttle(func) {\\n  let lock = false;\\n  return function (...args) {\\n    !lock &&\\n      window.requestAnimationFrame(() => {\\n        func.apply(this, args);\\n        lock = false;\\n      });\\n    lock = true;\\n  };\\n}\\n```\\n\\n## \u53c2\u8003\\n\\n[JS\u7cfb\u5217\u4e4b\u4e8b\u4ef6\u8282\u6d41(Debounce)](https://mp.weixin.qq.com/s/MYpzM0XBvcDyI-HewhkMmg)\\n\\n[[JavaScript] \u8282\u6d41(throttle)-\u9632\u6296(debounce) \u4e0d\u61f5\u5708\u6307\u5317](https://www.cnblogs.com/CoderMonkie/p/throttle-and-debounce-in-js.html)\\n\\n[JS\u624b\u5199\u7cfb\u5217\u4e4b\u9632\u6296\u8282\u6d41](https://mp.weixin.qq.com/s/6phKp63cv-N8AqJN2zv02g)\\n\\n[JS\u4e8b\u4ef6\u8282\u6d41(Throttle)](https://mp.weixin.qq.com/s/2vhdnt_t8VeTv0UTZ-G0lg)\\n\\n[\u4f7f\u7528 requestAnimationFrame \u66ff\u4ee3 throttle \u4f18\u5316\u9875\u9762\u6027\u80fd](https://cloud.tencent.com/developer/article/1613039)"},{"id":"/2021/12/31/SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0","metadata":{"permalink":"/blog/index/2021/12/31/SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0","source":"@site/blog/2021/12/31/SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0.md","title":"SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0","description":"\u6548\u679c\u5c55\u793a","date":"2021-12-31T00:00:00.000Z","formattedDate":"2021\u5e7412\u670831\u65e5","tags":[{"label":"svg","permalink":"/blog/index/tags/svg"}],"readingTime":3.17,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0","toc_max_heading_level":6,"tags":["svg"]},"prevItem":{"title":"\u9632\u6296\u4e0e\u8282\u6d41","permalink":"/blog/index/2022/01/01/\u9632\u6296\u4e0e\u8282\u6d41"},"nextItem":{"title":"js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f","permalink":"/blog/index/2021/12/25/js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f"}},"content":"\x3c!-- truncate --\x3e\\n\\n### \u6548\u679c\u5c55\u793a\\n\\n![final](./SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0/final.gif)\\n\\n### \u6e90\u7801\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n    <style>\\n      .icon {\\n        stroke: red;\\n        stroke-width: 5px;\\n        fill: none;\\n        animation: icon 2s linear infinite forwards;\\n      }\\n\\n      @keyframes icon {\\n        0% {\\n          stroke-dasharray: 10772;\\n          stroke-dashoffset: 10772;\\n        }\\n\\n        50% {\\n          stroke-dasharray: 10772;\\n          stroke-dashoffset: 0;\\n        }\\n\\n        100% {\\n          stroke-dasharray: 10772;\\n          stroke-dashoffset: 0;\\n        }\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div style=\\"margin: 50px auto; width: 300px; height: 300px\\">\\n      <svg\\n        t=\\"1640915781365\\"\\n        class=\\"icon\\"\\n        viewBox=\\"0 0 1147 1024\\"\\n        version=\\"1.1\\"\\n        xmlns=\\"http://www.w3.org/2000/svg\\"\\n        p-id=\\"11752\\"\\n        width=\\"200\\"\\n        height=\\"200\\"\\n      >\\n        <path\\n          d=\\"M1089.477486 513.024q17.408 8.192 15.36 14.336t-15.36 7.168q-4.096 1.024-35.84 3.072t-77.312 5.632-97.792 7.168-96.768 7.168-75.264 5.632-32.768 2.048q-3.072-40.96 11.264-70.656 6.144-12.288 16.896-24.064t27.136-19.968 39.936-11.264 56.32 0q64.512 7.168 110.592 17.92t77.312 21.504 49.664 20.48 26.624 13.824zM631.749486 613.376q7.168-4.096 38.4-8.192t74.752-8.192 93.696-7.68 96.768-6.144 83.456-4.096 53.248-2.56l68.608-26.624-111.616 99.328 0-49.152-20.48 20.48-4.096 43.008-28.672 21.504-2.048-51.2-15.36 10.24-9.216 55.296-148.48 74.752-6.144-53.248-22.528 11.264-5.12 57.344-217.088 102.4 3.072-84.992-14.336 92.16q-83.968 40.96-150.528 59.392t-118.272 22.528-89.6-3.072-64-18.944-40.96-24.064-20.992-18.432q-2.048-19.456-3.072-43.008t-2.048-44.032q-1.024-23.552-1.024-47.104 15.36 20.48 41.472 33.792t56.832 21.504 62.976 11.264 60.416 3.584 49.664-1.536 30.72-4.096q17.408-4.096 48.128-13.824t62.464-19.968l59.392-20.48q25.6-8.192 33.792-11.264l517.12-204.8q-14.336 2.048-42.496 5.632t-65.024 8.704-78.848 11.776-82.944 12.8q-97.28 15.36-211.968 32.768-8.192-2.048-2.56-19.456t15.872-36.864q11.264-22.528 29.696-50.176-10.24 34.816-11.264 50.176t1.024 20.48q3.072 5.12 9.216 1.024zM1138.629486 482.304q6.144 6.144 7.68 13.312t-1.536 12.288-9.216 6.144-14.336-5.12q-5.12-4.096-33.28-29.184t-67.584-60.928-84.992-76.8-85.504-75.776-69.12-57.856-35.328-24.064q-8.192 0-24.576 22.016t-40.96 59.392-55.808 86.016-68.096 101.376-77.824 105.472-84.992 97.792-90.112 69.632-90.112 32.256-82.944 1.024-68.096-23.04-46.08-40.448-15.872-50.688q1.024-30.72 13.312-77.312t35.328-101.888 56.32-114.176 75.264-114.688 91.648-102.912 105.984-78.848q73.728-39.936 134.144-49.664t108.544-2.56 83.456 24.576 58.88 32.768q16.384 11.264 49.664 45.568t73.728 79.872 82.944 95.744 78.848 93.184 61.44 73.216 29.184 34.304zM73.669486 581.632q7.168-2.048 18.432-11.776t21.504-20.992 17.92-22.528 7.68-17.408-6.656-13.824-14.848-15.872q-10.24-9.216-21.504-18.432-11.264 17.408-19.456 38.912t-11.264 40.448-1.536 31.232 9.728 10.24zM310.213486 647.168q8.192-2.048 20.48-12.288t23.04-22.528 18.944-24.576 8.192-18.432-7.168-14.848-15.36-16.896q-10.24-9.216-22.528-19.456-12.288 18.432-20.992 41.984t-12.8 43.52-2.048 32.768 10.24 10.752zM428.997486 456.704q24.576 0 36.352-7.68t13.312-16.896-6.144-15.872-19.968-5.632q-55.296 7.168-103.424 3.072-20.48-1.024-40.96-4.608t-38.912-10.24-33.28-16.896-22.016-24.576q-12.288-3.072-21.504-1.024-8.192 2.048-12.288 8.192t1.024 20.48q7.168 19.456 23.552 32.256t38.4 20.992 47.616 11.776 50.688 5.12 47.616 1.536l39.936 0zM521.157486 321.536q17.408-16.384 38.4-43.52t38.912-57.856 29.184-60.416 10.24-50.176q-1.024-16.384-25.088-27.648t-59.904-14.336-76.8 4.096-74.752 28.672q-13.312 8.192-33.792 25.6t-42.496 39.424-42.496 46.08-33.28 46.08-14.848 39.424 12.288 25.6q11.264 6.144 32.768 11.776t48.128 8.704 55.808 4.096 55.808-1.024 48.64-8.192 33.28-16.384z\\"\\n          p-id=\\"11753\\"\\n        ></path>\\n      </svg>\\n    </div>\\n\\n    <script>\\n      const path = document.querySelector(\\"path\\");\\n      console.log(path.getTotalLength());\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</details>\\n\\n### \u57fa\u7840\u77e5\u8bc6\\n\\n\u4e3b\u8981\u4f9d\u9760`css`\u52a8\u753b\u548c`stroke-dasharray`\u3001`stroke-dashoffset`\u5c5e\u6027\\n\\n#### <span id=\\"strokeDasharray\\">`stroke-dasharray`\u5c5e\u6027</span>\\n\\n> `\u5c5e\u6027stroke-dasharray\u53ef`\u63a7\u5236\u7528\u6765\u63cf\u8fb9\u7684\u70b9\u5212\u7ebf\u7684\u56fe\u6848\u8303\u5f0f\u3002\\n\\n\u70b9\u5212\u7ebf\u6837\u5f0f\u5982\u4e0b(`stroke-dasharray: 50 30 20`)\\n\\n![point-line](./SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0/point-line.png)\\n\\n##### \u503c\\n\\n![point-line-value](./SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0/point-line-value.png)\\n\\n\u5982\u679c\u503c\u662f`50 30 20`\uff0c \u5f97\u5230\u7684\u7ed8\u5236\u6548\u679c.\u53ef\u67e5\u770b[`stroke-dasharray`\u5c5e\u6027](#strokeDasharray)\u56fe\u4f8b\\n\\n```\\n50          30      20      50       30      20    ...\\n\u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 \u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 \u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 ...\\n```\\n\\n\u5982\u679c\u503c\u662f`50 30`\uff0c\u5f97\u5230\u7684\u7ed8\u5236\u6548\u679c\\n\\n```\\n50          30      50      30       50      30    ...\\n\u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 \u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 \u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 ...\\n```\\n\\n\u5982\u679c\u503c\u662f`50`\uff0c\u5f97\u5230\u7684\u7ed8\u5236\u6548\u679c\\n\\n```\\n50          50      50      50       50      50    ...\\n\u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 \u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 \u77ed\u5212\u7ebf\u957f\u5ea6 \u7f3a\u53e3\u957f\u5ea6 ...\\n```\\n\\n#### `stroke-dashoffset`\u5c5e\u6027\\n\\n\u5b9a\u4e49\u4e86`stroke-dasharray`\u5411\u5de6\u504f\u79fb\u7684\u91cf\\n\\n\u793a\u4f8b`stroke-dasharray: 50;`\\n\\n![stroke-dash](./SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0/stroke-dash.png)\\n\\n![stroke-dash2](./SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0/stroke-dash2.png)\\n\\n### \u601d\u8def\u603b\u7ed3\\n\\n1. \u4f7f\u7528`path`\u6807\u7b7e\u7684\u957f\u5ea6\u4f5c\u4e3a`stroke-dasharray`\u7684\u503c\\n2. \u4f7f\u7528`path`\u6807\u7b7e\u7684\u957f\u5ea6\u4f5c\u4e3a`stroke-dashoffset`\u7684\u503c\uff08\u4f7f\u7ed8\u5236\u7684\u5185\u5bb9\u88ab\u9690\u85cf\uff09\\n3. \u4f7f\u7528`css`\u52a8\u753b\uff0c\u5c06`stroke-dashoffset`\u7684\u503c\u964d\u4e3a`0`\uff08\u4f7f\u7ed8\u5236\u7684\u5185\u5bb9\u9010\u6e10\u663e\u793a\u51fa\u6765\uff09\\n\\n## \u53c2\u8003\\n\\n[stroke-dasharray](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/stroke-dasharray)\\n\\n[stroke-dashoffset](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset)"},{"id":"/2021/12/25/js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f","metadata":{"permalink":"/blog/index/2021/12/25/js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f","source":"@site/blog/2021/12/25/js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f.md","title":"js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f","description":"\u539f\u578b\u94fe\u7ee7\u627f","date":"2021-12-25T00:00:00.000Z","formattedDate":"2021\u5e7412\u670825\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":6.17,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0","permalink":"/blog/index/2021/12/31/SVG\u63cf\u8fb9\u52a8\u753b\u7684\u5b9e\u73b0"},"nextItem":{"title":"ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0","permalink":"/blog/index/2021/12/19/ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0"}},"content":"\x3c!-- truncate --\x3e\\n\\n### \u539f\u578b\u94fe\u7ee7\u627f\\n\\n\u5b50\u7c7b\u539f\u578b\u6307\u5411\u7236\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u3002\u5b50\u7c7b\u4f1a\u7ee7\u627f\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u8bbf\u95ee\u7236\u7c7b\u539f\u578b\u4e0a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\\n\\n\u5982\u679c\u5b50\u7c7b\u539f\u578b\u4e0a\u60f3\u8981\u8986\u76d6\u7236\u7c7b\u7684\u65b9\u6cd5/\u6dfb\u52a0\u7236\u7c7b\u6ca1\u6709\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5fc5\u987b\u5728\u539f\u578b\u8d4b\u503c\u4e4b\u540e\u6dfb\u52a0\uff0c\u5426\u5219\u65e0\u6548\u3002\\n\\n```js\\nfunction SuperType() {\\n  this.prop = true;\\n  this.colors = [\\"red\\", \\"green\\", \\"blue\\"];\\n}\\n\\nSuperType.prototype.getSuperValue = function () {\\n  return this.prop;\\n};\\n\\nfunction SubType() {\\n  this.subProp = false;\\n}\\n\\n// \u7ee7\u627fSuperType\\nSubType.prototype = new SuperType();\\n\\n// \u65b0\u65b9\u6cd5\\nSubType.prototype.getSubValue = function () {\\n  return this.subProp;\\n};\\n\\n// \u8986\u76d6\u5df2\u6709\u65b9\u6cd5\\nSubType.prototype.getSuperValue = function () {\\n  return false;\\n};\\n\\nconst instance = new SubType();\\nconsole.log(instance.getSuperValue()); // false\\n\\nconst instance2 = new SubType();\\ninstance2.colors.push(\\"black\\");\\nconsole.log(instance2.colors); // \\"red,green,blue,black\\"\\n\\nconst instance3 = new SubType();\\nconsole.log(instance3.colors); // \\"red,green,blue,black\\"\\n\\nconsole.log(SubType.prototype.constructor === SuperType); // true\\n```\\n\\n#### \u7f3a\u70b9\\n\\n- \u5982\u679c\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u5b58\u5728\u5f15\u7528\u5c5e\u6027\uff0c\u5b50\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u90fd\u4f1a\u5171\u4eab\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u5f15\u7528\u5c5e\u6027(**_\u7236\u7c7b\u5b9e\u4f8b\u5c5e\u6027 => \u5b50\u7c7b\u539f\u578b\u5c5e\u6027_**)\\n- \u521b\u5efa\u5b50\u7c7b\u5b9e\u4f8b\u5bf9\u8c61\u65f6\u4e0d\u80fd\u7ed9\u7236\u7c7b\u6784\u9020\u51fd\u6570\u4f20\u9012\u53c2\u6570\\n- \u91cd\u5199\u539f\u578b\u5bfc\u81f4constructor\u4e22\u5931\\n\\n### \u76d7\u7528\u6784\u9020\u51fd\u6570\u7ee7\u627f\\n\\n\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728\u521b\u5efa\u5b50\u7c7b\u5b9e\u4f8b\u65f6\u7ed9\u7236\u7c7b\u6784\u9020\u51fd\u6570\u4f20\u9012\u53c2\u6570\u3002\\n\\n```js\\nfunction SuperType(name) {\\n  this.name = name;\\n  this.colors = [\\"red\\", \\"green\\", \\"blue\\"];\\n  this.sayYes = function () {\\n    console.log(\\"yes\\");\\n  };\\n}\\n\\nSuperType.prototype.sayNo = function () {\\n  console.log(\\"no\\");\\n};\\n\\nfunction SubType() {\\n  // \u7ee7\u627fSuperType\\n  SuperType.call(this, \\"JavaScript\\");\\n  this.age = 30;\\n}\\n\\nconst instance = new SubType();\\ninstance.colors.push(\\"black\\");\\nconsole.log(instance.colors); // \\"red,green,blue,black\\"\\n\\nconst instance2 = new SubType();\\nconsole.log(instance2.colors); // \\"red,green,blue\\"\\n\\nconst instance3 = new SubType();\\nconsole.log(instance3.name); // \\"JavaScript\\"\\nconsole.log(instance3.age); // 30\\n\\nconsole.log(instance instanceof SubType); // true\\nconsole.log(instance instanceof SuperType); // false\\nconsole.log(SubType.prototype.isPrototypeOf(instance)); // true\\nconsole.log(SuperType.prototype.isPrototypeOf(instance)); // false\\n\\ninstance.sayYes(); // yes\\nconsole.log(instance.sayNo); // undefined\\n```\\n\\n#### \u4f18\u70b9\\n\\n- \u907f\u514d\u4e86\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u5f15\u7528\u5c5e\u6027\u88ab\u5b50\u7c7b\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u5171\u4eab\\n\\n#### \u7f3a\u70b9\\n\\n- \u6700\u591a\u53ea\u80fd\u7ee7\u627f\u7236\u7c7b\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\\n- \u4e0d\u80fd\u8bbf\u95ee\u7236\u7c7b\u539f\u578b\u4e0a\u5b9a\u4e49\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\\n- \u6ca1\u6709\u4fdd\u7559`instanceof`\u64cd\u4f5c\u7b26\u548c`isPtototypeOf()`\u65b9\u6cd5\u8bc6\u522b\u5408\u6210\u5bf9\u8c61\u7684\u80fd\u529b\\n\\n### \u7ec4\u5408\u7ee7\u627f\\n\\n\u539f\u578b\u94fe\u7ee7\u627f + \u76d7\u7528\u6784\u9020\u51fd\u6570\u7ee7\u627f\\n\\n- \u539f\u578b\u94fe\u7ee7\u627f\uff1a\u7ee7\u627f\u7236\u7c7b\u539f\u578b\u4e0a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\\n\\n- \u76d7\u7528\u6784\u9020\u51fd\u6570\u7ee7\u627f\uff1a\u7ee7\u627f\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u5c5e\u6027\\n\\n```js\\nfunction SuperType(name) {\\n  this.name = name;\\n  this.colors = [\\"red\\", \\"green\\", \\"blue\\"];\\n}\\n\\nSuperType.prototype.sayName = function () {\\n  console.log(this.name);\\n};\\n\\nfunction SubType(name, age) {\\n  // \u7ee7\u627fSuperType\u4e0a\u7684\u5c5e\u6027\\n  SuperType.call(this, name);\\n  this.age = age;\\n}\\n\\n// \u7ee7\u627f\u7236\u7c7b\u539f\u578b\u4e0a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\\nSubType.prototype = new SuperType();\\n\\nSubType.prototype.sayAge = function () {\\n  console.log(this.age);\\n};\\n\\nconst instance = new SubType(\\"JavaScript\\", 30);\\ninstance.colors.push(\\"black\\");\\nconsole.log(instance.colors); // \\"red,green,blue,black\\"\\ninstance.sayName(); // \\"JavaScript\\"\\ninstance.sayAge(); // 30\\n\\nconst instance2 = new SubType(\\"ECMA Script\\", 40);\\nconsole.log(instance2.colors); // \\"red,green,blue\\"\\ninstance2.sayName(); // \\"ECMA Script\\"\\ninstance2.sayAge(); // 40\\n\\nconsole.log(SubType.prototype.constructor === SuperType); // true\\n```\\n\\n#### \u4f18\u70b9\\n\\n- \u53ef\u4ee5\u7ee7\u627f\u7236\u7c7b\u4e0a\u7684\u539f\u578b\u548c\u65b9\u6cd5\\n- \u907f\u514d\u4e86\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u5f15\u7528\u5c5e\u6027\u88ab\u5b50\u7c7b\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u5171\u4eab\\n\\n#### \u7f3a\u70b9\\n\\n- \u521b\u5efa\u5b50\u7c7b\u5b9e\u4f8b\u5bf9\u8c61\u65f6\uff0c\u7236\u7c7b\u6784\u9020\u51fd\u6570\u603b\u662f\u4f1a\u88ab\u8c03\u7528\u4e24\u6b21\uff08\u6548\u7387\u95ee\u9898\uff09\\n- \u91cd\u5199\u539f\u578b\u5bfc\u81f4constructor\u4e22\u5931\\n\\n### \u539f\u578b\u5f0f\u7ee7\u627f\\n\\n\u4e0d\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570\u7c7b\u578b\u4e5f\u53ef\u4ee5\u901a\u8fc7\u539f\u578b\u5b9e\u73b0\u5bf9\u8c61\u4e4b\u95f4\u7684\u4fe1\u606f\u5171\u4eab\u3002\\n\\n**_\u9002\u7528\u4e8e\u4e0d\u9700\u8981\u5355\u72ec\u521b\u5efa\u6784\u9020\u51fd\u6570\u3002\u5728\u4e00\u4e2a\u5bf9\u8c61\u7684\u57fa\u7840\u4e0a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61_**\\n\\nES6\u4e2d\u4e0e`Object.create()`\u65b9\u6cd5\u6548\u679c\u76f8\u540c\\n\\n```js\\nfunction object(o) {\\n  function F() {}\\n  F.prototype = o;\\n  return new F();\\n}\\n\\nconst person = {\\n  name: \\"Script\\",\\n  colors: [\\"red\\", \\"green\\", \\"blue\\"],\\n};\\n\\nconst person2 = object(person);\\nperson2.name = \\"JavaScript\\";\\nperson2.colors.push(\\"black\\");\\n\\nconst person3 = object(person);\\nperson3.name = \\"ECMA Script\\";\\nperson3.colors.push(\\"yellow\\");\\n\\nconsole.log(person.colors); // \\"red,green,blue,black,yellow\\"\\n```\\n\\n#### \u7f3a\u70b9\\n\\n- \u5173\u4e8e\u7ee7\u627f\u7684\u5f15\u7528\u5c5e\u6027\u540c**_\u539f\u578b\u94fe\u7ee7\u627f_**\u4e00\u81f4\\n\\n### \u5bc4\u751f\u5f0f\u7ee7\u627f\\n\\n\u4e0e`\u539f\u578b\u5f0f\u7ee7\u627f`\u76f8\u4f3c\\n\\n\u601d\u8def\uff1a\\n\\n- \u521b\u5efa\u4e00\u4e2a\u5b9e\u73b0\u7ee7\u627f\u7684\u51fd\u6570\uff0c\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\\n- \u5728\u51fd\u6570\u4e2d\u4ee5\u67d0\u79cd\u65b9\u6cd5\u589e\u5f3a\u5bf9\u8c61\u53c2\u6570\uff0c\u8fd4\u56de\u8fd9\u4e2a\u5bf9\u8c61\\n\\n```js\\nfunction object(o) {\\n  function F() {}\\n  F.prototype = o;\\n  return new F();\\n}\\n\\nfunction createAnother(original) {\\n  const clone = object(original);\\n  // \u589e\u5f3a\u5bf9\u8c61\\n  clone.sayHi = function () {\\n    console.log(\\"hi\\");\\n  };\\n  return clone;\\n}\\n```\\n\\n#### \u7f3a\u70b9\\n\\n- \u7ed9\u5bf9\u8c61\u6dfb\u52a0\u51fd\u6570\u4f1a\u5bfc\u81f4\u51fd\u6570\u96be\u4ee5\u590d\u7528\\n\\n### \u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f\\n\\n\u76d7\u7528\u6784\u9020\u51fd\u6570\u7ee7\u627f\u5c5e\u6027 + \u6df7\u5408\u5f0f\u539f\u578b\u94fe\u7ee7\u627f\u5c5e\u6027\u548c\u65b9\u6cd5\\n\\n`\u76d7\u7528\u6784\u9020\u51fd\u6570\u7ee7\u627f + \u5bc4\u751f\u5f0f\u7ee7\u627f`\\n\\n\u601d\u8def\uff1a\\n\\n- \u5bc4\u751f\u5f0f\u7ee7\u627f\u65b9\u5f0f\u7ee7\u627f\u7236\u7c7b\u539f\u578b\\n- \u5c06\u8fd4\u56de\u7684\u7236\u7c7b\u539f\u578b\u526f\u672c\u8d4b\u503c\u7ed9\u5b50\u7c7b\u539f\u578b\\n\\n```js\\nfunction object(o) {\\n  function F() {}\\n  F.prototype = o;\\n  return new F();\\n}\\n\\n// \u7ee7\u627f\u7236\u7c7b\u539f\u578b\u5c5e\u6027\u548c\u65b9\u6cd5\\nfunction inheritPrototype(subType, superType) {\\n  const protoType = object(superType.prototype); // \u521b\u5efa\u7236\u7c7b\u539f\u578b\u526f\u672c\u5bf9\u8c61\\n  protoType.constructor = subType;\\n  subType.prototype = protoType;\\n}\\n\\nfunction SuperType(name) {\\n  this.name = name;\\n  this.colors = [\\"red\\", \\"green\\", \\"blue\\"];\\n  this.sayYes = function () {\\n    console.log(\\"yes\\");\\n  };\\n}\\n\\nSuperType.prototype.sayNo = function () {\\n  console.log(\\"no\\");\\n};\\n\\nfunction SubType(name, age) {\\n  SuperType.call(this, name);\\n  this.age = age;\\n}\\n\\ninheritPrototype(SubType, SuperType);\\n\\nconst instance = new SubType(\\"JavaScript\\", 30);\\ninstance.sayYes(); // yes\\ninstance.sayNo(); // no\\n```\\n\\n#### \u4f18\u70b9\\n\\n- \u53ef\u4ee5\u7ee7\u627f\u7236\u7c7b\u4e0a\u7684\u539f\u578b\u548c\u65b9\u6cd5\\n- \u907f\u514d\u4e86\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u5f15\u7528\u5c5e\u6027\u88ab\u5b50\u7c7b\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u5171\u4eab\\n- \u521b\u5efa\u5b50\u7c7b\u5b9e\u4f8b\u5bf9\u8c61\u65f6\uff0c\u7236\u7c7b\u6784\u9020\u51fd\u6570\u4ec5\u88ab\u8c03\u7528\u4e00\u6b21\\n\\n## \u53c2\u8003\\n\\n\u300aJavaScript \u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\uff08\u7b2c4\u7248\uff09\u300b"},{"id":"/2021/12/19/ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0","metadata":{"permalink":"/blog/index/2021/12/19/ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0","source":"@site/blog/2021/12/19/ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0.md","title":"ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0","description":"\u524d\u63d0","date":"2021-12-19T00:00:00.000Z","formattedDate":"2021\u5e7412\u670819\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":2.035,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f","permalink":"/blog/index/2021/12/25/js\u7684\u51e0\u79cd\u7ee7\u627f\u65b9\u5f0f"},"nextItem":{"title":"\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f","permalink":"/blog/index/2021/12/11/\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u524d\u63d0\\n\\n\u4ee5\u4e0b\u65b9\u6cd5\u5728\u5176\u6570\u7ec4\u5143\u7d20`\u88ab\u5220\u9664/\u672a\u88ab\u521d\u59cb\u5316`\u65f6\u4e0d\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002\\n\\n**\u4f7f\u7528`\u7d22\u5f15 in \u6570\u7ec4`\u7684\u65b9\u5f0f\u5224\u65ad\u6570\u7ec4\u5143\u7d20\u662f\u5426\u662f`\u88ab\u5220\u9664/\u672a\u88ab\u521d\u59cb\u5316`\u7684\u72b6\u6001**\\n\\n### forEach\\n\\n```js\\nArray.prototype._forEach = function (callback, thisArg) {\\n  const arrLen = this.length;\\n  let i = 0;\\n  while (i < arrLen) {\\n    // \u88ab\u5220\u9664/\u672a\u88ab\u521d\u59cb\u5316\u7684\u5143\u7d20\u4e0d\u5faa\u73af\\n    if (i in this) {\\n      callback.call(thisArg, this[i], i, this);\\n    }\\n    i++;\\n  }\\n};\\n```\\n\\n### filter\\n\\n```js\\nArray.prototype._filter = function (callback, thisArg) {\\n  const res = [],\\n    arrLen = this.length;\\n  let i = 0;\\n  while (i < arrLen) {\\n    if (i in this) {\\n      const value = this[i];\\n      callback.call(thisArg, value, i, this) && res.push(value);\\n    }\\n    i++;\\n  }\\n  return res;\\n};\\n```\\n\\n### map\\n\\n#### \u539f\u751f\u5b9e\u73b0\\n\\n```js\\nArray.prototype._map = function (callback, thisArg) {\\n  const res = [],\\n    arrLen = this.length;\\n  let i = 0;\\n  while (i < arrLen) {\\n    if (i in this) {\\n      res[i] = callback.call(thisArg, this[i], i, this);\\n    }\\n    i++;\\n  }\\n  return res;\\n};\\n```\\n\\n#### reduce\u5b9e\u73b0\\n\\n```js\\nArray.prototype._map = function (callback, thisArg) {\\n  return this.reduce((arr, value, index, array) => {\\n    arr[index] = callback.call(thisArg, value, index, array);\\n  }, []);\\n};\\n```\\n\\n### some\\n\\n```js\\nArray.prototype._some = function (callback, thisArg) {\\n  let i = 0;\\n  const arrLen = this.length;\\n  while (i < arrLen) {\\n    if (i in this) {\\n      if (callback.call(thisArg, this[i], i, this)) {\\n        return true;\\n      }\\n    }\\n    i++;\\n  }\\n  return false;\\n};\\n```\\n\\n### every\\n\\n```js\\nArray.prototype._every = function (callback, thisArg) {\\n  let i = 0,\\n    loopCount = 0,\\n    trueCount = 0;\\n  const arrLen = this.length;\\n  while (i < arrLen) {\\n    if (i in this) {\\n      loopCount++;\\n      if (callback.call(thisArg, this[i], i, this)) {\\n        trueCount++;\\n      }\\n    }\\n    i++;\\n  }\\n  return loopCount === trueCount;\\n};\\n```\\n\\n### reduce\\n\\n```js\\nArray.prototype._reduce = function (...args) {\\n  const arrLen = this.length;\\n  if (args.length === 1 && !arrLen) {\\n    throw new TypeError(\\"Reduce of empty array with no initial value\\");\\n  }\\n\\n  const callback = args[0];\\n  let initialValue = this[0],\\n    i = 1;\\n  if (args.length > 1) {\\n    initialValue = args[1];\\n    i--;\\n  }\\n  let accumulator = initialValue;\\n  while (i < arrLen) {\\n    if (i in this) {\\n      accumulator = callback(accumulator, this[i], i, this);\\n    }\\n    i++;\\n  }\\n  return accumulator;\\n};\\n```"},{"id":"/2021/12/11/\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f","metadata":{"permalink":"/blog/index/2021/12/11/\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f","source":"@site/blog/2021/12/11/\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f.md","title":"\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f","description":"\u5706\u5468\u7387\u7684\u5b9a\u4e49","date":"2021-12-11T00:00:00.000Z","formattedDate":"2021\u5e7412\u670811\u65e5","tags":[{"label":"\u6570\u5b66","permalink":"/blog/index/tags/\u6570\u5b66"}],"readingTime":2.05,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f","toc_max_heading_level":6,"tags":["\u6570\u5b66"]},"prevItem":{"title":"ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0","permalink":"/blog/index/2021/12/19/ES6\u4e2d\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570\u7684\u4ee3\u7801\u5b9e\u73b0"},"nextItem":{"title":"\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f","permalink":"/blog/index/2021/12/04/\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u5706\u5468\u7387\u7684\u5b9a\u4e49\\n\\n```\\n\u5706\u5468\u7387 = \u5706\u7684\u5468\u957f / \u5706\u7684\u76f4\u5f84\\n```\\n\\n\u5047\u8bbe\u5706\u7684\u5468\u957f\u7528\u82f1\u6587\u5b57\u6bcd`C`\u8868\u793a\uff0c\u5706\u7684\u534a\u5f84\u7528\u82f1\u6587\u5b57\u6bcd`r`\u8868\u793a\\n=> `C = 2\u03c0r`\\n\\n## \u5f27\u4e0e\u5f27\u5ea6\u7684\u5b9a\u4e49\\n\\n### \u5f27\\n\\n\u5706\u4e0a\u4efb\u610f\u4e24\u70b9\u95f4\u7684\u90e8\u5206\u53eb\u5f27\\n\\n### \u5f27\u5ea6\\n\\n```\\n\u5f27\u5ea6 = \u5f27\u957f / \u5706\u7684\u534a\u5f84\\n=> \u5f27\u957f\u4e3a\u534a\u5f84\u65f6\uff0c\u5f27\u5ea6\u4e3a1\\n```\\n\\n\u5047\u8bbe\u5f27\u957f\u7528\u82f1\u6587\u5b57\u6bcd`L`\u8868\u793a\uff0c\u5f27\u5ea6\u7528\u82f1\u6587\u5b57\u6bcd`rad`\u8868\u793a\\n=> `rad = L / r`\\n\\n## \u8f6c\u6362\\n\\n\u7531\u4e0a\u9762\u7684\u5b9a\u4e49\u53ef\u4ee5\u77e5\u9053\\n\\n\u5f53\u5f27\u957f = \u534a\u5f84\u65f6\uff0c`rad = r / r = 1`,\u5373\u5f27\u5ea6\u4e3a1\u3002\\n\\n\u5f53\u5f27\u957f = \u5706\u5468\u957f\u65f6\uff0c`rad = 2\u03c0r / r = 2\u03c0`,\u5373\u5f27\u5ea6\u4e3a`2\u03c0`\\n\\n\u53c8\uff0c\u5706\u5468\u7684\u89d2\u5ea6\u7684`360\xb0`\\n=> \u5f27\u5ea6\u4e0e\u89d2\u5ea6\u6362\u7b97\uff1a`2\u03c0 = 360\xb0` => `\u03c0 = 180\xb0`\\n\\n## \u79d2\u4e0e\u5355\u4f4d\u5706\\n\\n\u7528\u79d2\u4f5c\u4e3a\u5f27\u957f\u8ba1\u7b97\u5176\u5728\u5355\u4f4d\u5706\uff08\u534a\u5f84\u4e3a1\uff09\u4e2d\u7684\u5f27\u5ea6\u3002\\n\\n- \u524d\u63d0\\n  - \u5f27\u957f\u4e3a\u534a\u5f84\u65f6\uff0c\u5f27\u5ea6\u4e3a1\\n  - \u5f27\u957f\u4e3a\u03c0\u4e2a\u534a\u5f84\u65f6\uff0c\u5f27\u5ea6\u4e3a\u03c0\u3002\u5373\u534a\u5468\uff0c180\xb0\\n  - \u5f27\u957f\u4e3a2\u03c0\u4e2a\u534a\u5f84\u65f6\uff0c\u5f27\u5ea6\u4e3a2\u03c0\u3002\u5373\u4e00\u5468\uff0c360\xb0\\n- \u4ee5\u79d2\u505a\u5f27\u957f\u8ba1\u7b97\u5176\u5728\u5355\u4f4d\u5706\u4e2d\u7684\u5f27\u5ea6\\n  - 1\u79d2\u3002\u76f8\u5f53\u4e8e\u5f27\u957f\u4e3a1\u4e2a\u534a\u5f84\u7684\u957f\u5ea6\uff0c\u5f27\u5ea6\u4e3a1\\n  - 2\u79d2\u3002\u76f8\u5f53\u4e8e\u5f27\u957f\u4e3a2\u4e2a\u534a\u5f84\u7684\u957f\u5ea6\uff0c\u5f27\u5ea6\u4e3a2\\n  - 3.14\u79d2\u3002\u76f8\u5f53\u4e8e\u5f27\u957f\u4e3a3.14\u4e2a\u534a\u5f84\u7684\u957f\u5ea6\uff0c\u5f27\u5ea6\u4e3a3.14\uff0c\u63a5\u8fd1\u534a\u5468\\n  - 6.28\u79d2\u3002\u76f8\u5f53\u4e8e\u5f27\u957f\u4e3a6.28\u4e2a\u534a\u5f84\u7684\u957f\u5ea6\uff0c\u5f27\u5ea6\u4e3a6.28\uff0c\u63a5\u8fd1\u4e00\u5468\\n\\n\u5176\u5b9e\u5728\u5355\u4f4d\u5706\u4e2d\u7528\u79d2\u4f5c\u4e3a\u5f27\u957f\u4e5f\u53ef\u770b\u505a\u662f\u7528\u79d2\u4f5c\u4e3a\u5f27\u5ea6\u3002\\n\\n## \u53c2\u8003\\n\\n> [\u5706\u5468\u7387](https://baike.baidu.com/item/%E5%9C%86%E5%91%A8%E7%8E%87/139930 \\"\u5706\u5468\u7387\\") > [\u5f27\u5ea6\u5236](https://baike.baidu.com/item/%E5%BC%A7%E5%BA%A6%E5%88%B6 \\"\u5f27\u5ea6\u5236\\")"},{"id":"/2021/12/04/\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f","metadata":{"permalink":"/blog/index/2021/12/04/\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f","source":"@site/blog/2021/12/04/\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f.md","title":"\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f","description":"\u6d4f\u89c8\u5668\u5bf9\u56de\u6d41(\u91cd\u6392)\u3001\u91cd\u7ed8\u7684\u4f18\u5316\u7b56\u7565","date":"2021-12-04T00:00:00.000Z","formattedDate":"2021\u5e7412\u67084\u65e5","tags":[{"label":"devtools","permalink":"/blog/index/tags/devtools"}],"readingTime":7.065,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f","toc_max_heading_level":6,"tags":["devtools"]},"prevItem":{"title":"\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f","permalink":"/blog/index/2021/12/11/\u5706\u5468\u7387\u4e3a\u4ec0\u4e48\u8868\u793a\u89d2\u5ea6\u4e3a180\xb0\uff1f"},"nextItem":{"title":"\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe","permalink":"/blog/index/2021/12/01/\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6d4f\u89c8\u5668\u5bf9\u56de\u6d41(\u91cd\u6392)\u3001\u91cd\u7ed8\u7684\u4f18\u5316\u7b56\u7565\\n\\n### \u201c\u4f18\u5316\u961f\u5217\u201d\\n\\n> ![opti-queue](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/opti-queue.png)\\n\\n\u5982\u679c\u53ea\u662f\u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\uff0c\u6ca1\u6709\u5bf9\u8282\u70b9\u8fdb\u884c\u51e0\u4f55\u6539\u53d8\uff0cjs\u6267\u884c\u671f\u95f4\u4ec5\u4f1a\u8fdb\u884c\u6837\u5f0f\u8ba1\u7b97\uff0c\u4e0d\u4f1a\u5f3a\u5236\u5e03\u5c40\u3002\\n\\n### \u6570\u636e\u7f13\u5b58\\n\\n> ![data-cache](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/date-cache.png)\\n\\n\u6539\u53d8\u8282\u70b9\u7684\u51e0\u4f55\u4f4d\u7f6e\uff0c\u4f1a\u5bfc\u81f4\u7f13\u5b58\u5931\u6548\\n\\n> ![no-cache](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/no-cache.png)\\n\\n## \u6d4b\u8bd5\u73af\u5883\\n\\n> Chrome \u7248\u672c 96.0.4664.45\uff08\u6b63\u5f0f\u7248\u672c\uff09 \uff0864 \u4f4d\uff09\\n\\n## \u6d4b\u8bd5\u4ee3\u7801\\n\\n<details>\\n<summary>\u70b9\u51fb\u67e5\u770b\u4ee3\u7801</summary>\\n\\n```\\n\\n\\n\\n    <meta charset=\\"UTF-8\\">\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\">\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\">\\n    <title>Document</title>\\n\\n\\n    <div id=\\"div\\">\\n      <div></div>\\n    </div>\\n    <button>\u70b9\u51fb\u6d4b\u8bd5</button>\\n    <script>\\n      const div = document.getElementById(\'div\');\\n      const btn = document.querySelector(\'button\');\\n\\n      btn.onclick = () => {\\n        // do something\\n      };\\n    <\/script>\\n\\n\\n\\n```\\n\\n</details>\\n\\n## \u8bbe\u7f6e\u8282\u70b9\u7684style\u65f6\u6d4f\u89c8\u5668\u7684\u591a\u79cd\u5904\u7406\u60c5\u51b5\\n\\n\u4ec5\u89c2\u5bdf\u4ee3\u7801\u4e2d`btn`\u70b9\u51fb\u4e8b\u4ef6\u9644\u8fd1\u76f8\u5173\u7684\u6d4f\u89c8\u5668\u5904\u7406\\n\\n### \u6d4f\u89c8\u5668\u5728js\u6267\u884c\u671f\u95f4\u4ec0\u4e48\u90fd\u4e0d\u505a\\n\\n#### js\u6267\u884c\u4e4b\u540e\u8fdb\u884c\u6837\u5f0f\u8ba1\u7b97\u3001\u66f4\u65b0\u5206\u5c42\u6811\u3001\u7ed8\u5236\u3001\u5408\u6210\\n\\n##### \u6d4b\u8bd5\u60c5\u51b5\\n\\n###### \u70b9\u51fb\u4e8b\u4ef6\u4e2d\u6ca1\u6709\u4ee3\u7801\\n\\n```js\\nbtn.onclick = () => {\\n  // do something\\n};\\n```\\n\\n###### \u8bbe\u7f6e\u65e0\u5173\u5143\u7d20\u51e0\u4f55\uff08\u4f4d\u7f6e\u3001\u5c3a\u5bf8\u7b49\uff09\u7684\u5c5e\u6027\\n\\n```js\\nbtn.onclick = () => {\\n  div.style.color = \\"red\\";\\n};\\n```\\n\\n###### \u8bbe\u7f6e\u65e0\u5173\u5143\u7d20\u51e0\u4f55\uff08\u4f4d\u7f6e\u3001\u5c3a\u5bf8\u7b49\uff09\u7684\u5c5e\u6027\u5e76\u8bfb\u53d6\u8be5\u5143\u7d20\u7684\u4e00\u4e9b\u6837\u5f0f\u5c5e\u6027\\n\\n```js\\nbtn.onclick = () => {\\n  div.style.color = \\"red\\";\\n  const { color, width, height } = div.style;\\n};\\n```\\n\\n##### performance\u8bb0\u5f55\\n\\n![record1](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record1.png)\\n\\n![record2](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record2.png)\\n\\n#### js\u6267\u884c\u4e4b\u540e\u8fdb\u884c\u6837\u5f0f\u8ba1\u7b97\u3001\u5e03\u5c40\u3001\u66f4\u65b0\u5206\u5c42\u6811\u3001\u7ed8\u5236\u3001\u5408\u6210\\n\\n\u6bd4\u4e0a\u4e00\u4e2a\u591a\u4e86\u4e00\u4e2a\u5e03\u5c40\u6b65\u9aa4\\n\\n##### \u6d4b\u8bd5\u60c5\u51b5\\n\\n###### \u8bbe\u7f6e\u6709\u5173\u5143\u7d20\u51e0\u4f55\uff08\u4f4d\u7f6e\u3001\u5c3a\u5bf8\u7b49\uff09\u7684\u5c5e\u6027\\n\\n```js\\nbtn.onclick = () => {\\n  div.style.height = \\"100px\\";\\n};\\n```\\n\\n###### \u8bbe\u7f6e\u6709\u5173\u5143\u7d20\u51e0\u4f55\uff08\u4f4d\u7f6e\u3001\u5c3a\u5bf8\u7b49\uff09\u7684\u5c5e\u6027\u5e76\u8bfb\u53d6\u8be5\u5143\u7d20\u7684\u975e\u201c\u654f\u611f\u201d\u6837\u5f0f\u5c5e\u6027\\n\\n```js\\nbtn.onclick = () => {\\n  div.style.height = \\"100px\\";\\n  const { color, width, height } = div.style;\\n};\\n```\\n\\n##### performance\u8bb0\u5f55\\n\\n![record3](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record3.png)\\n![record4](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record4.png)\\n\\n### \u6d4f\u89c8\u5668\u5728js\u6267\u884c\u671f\u95f4\u8fdb\u884c\u6837\u5f0f\u8ba1\u7b97\\n\\n\u6837\u5f0f\u8ba1\u7b97\u540e\uff0c\u5982\u679c\u6709\u65b0\u7684\u6837\u5f0f\u8bbe\u7f6e\uff0c\u4f1a\u5c06\u5176\u653e\u5230\u201c\u6e32\u67d3\u4f18\u5316\u961f\u5217\u201d\u4e2d\\n\\n#### \u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\\n\\n```js\\nbtn.onclick = () => {\\n  const top = div.scrollTop,\\n    width = div.clientWidth;\\n};\\n```\\n\\n##### performance\u8bb0\u5f55\\n\\n![record5](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record5.png)\\n\\n#### \u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\u540e\u5e76\u8bbe\u7f6e\u65e0\u5173\u8282\u70b9\u51e0\u4f55\u4f4d\u7f6e\u7684\u6837\u5f0f\\n\\n```js\\nbtn.onclick = () => {\\n  const top = div.scrollTop;\\n  div.style.color = \\"red\\";\\n  div.style.backgroundColor = \\"blue\\";\\n};\\n```\\n\\n##### performance\u8bb0\u5f55\\n\\n![record6](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record6.png)\\n\\n#### \u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\u540e\u5e76\u8bbe\u7f6e\u6709\u5173\u8282\u70b9\u51e0\u4f55\u4f4d\u7f6e\u7684\u6837\u5f0f\\n\\n```js\\nbtn.onclick = () => {\\n  const top = div.scrollTop;\\n  div.style.color = \\"red\\";\\n  div.style.height = \\"100px\\";\\n};\\n```\\n\\n##### performance\u8bb0\u5f55\\n\\n![record7](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record7.png)\\n\\n#### \u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\u540e\u5e76\u8bbe\u7f6e\u65e0\u5173\u8282\u70b9\u51e0\u4f55\u4f4d\u7f6e\u7684\u6837\u5f0f\uff0c\u4e4b\u540e\u518d\u6b21\u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\\n\\n\u6d4f\u89c8\u5668\u4f1a\u6267\u884c\u4e24\u6b21\u6837\u5f0f\u8ba1\u7b97\\n\\n```js\\nbtn.onclick = () => {\\n  const clientHeight = div.clientHeight;\\n  div.style.color = \\"red\\";\\n  const clientWidth = div.clientWidth;\\n};\\n```\\n\\n##### performane\u8bb0\u5f55\\n\\n![record8](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record8.png)\\n\\n#### \u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\u540e\u5e76\u8bbe\u7f6e\u6709\u5173\u8282\u70b9\u51e0\u4f55\u4f4d\u7f6e\u7684\u6837\u5f0f\uff0c\u4e4b\u540e\u518d\u6b21\u8bfb\u53d6\u201c\u654f\u611f\u201d\u5c5e\u6027\\n\\n\u6d4f\u89c8\u5668\u4f1a\u5728js\u6267\u884c\u671f\u95f4\u8fdb\u884c\u4e24\u6b21\u6837\u5f0f\u8ba1\u7b97\u5e76\u5f3a\u5236\u540c\u6b65\u5e03\u5c40\u3002\\n\\n```js\\nbtn.onclick = () => {\\n  const clientHeight = div.clientHeight;\\n  div.style.height = \\"100px\\";\\n  const clientWidth = div.clientWidth;\\n};\\n```\\n\\n##### performane\u8bb0\u5f55\\n\\n![record9](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record9.png)\\n\\n## \u4e0e\u8282\u70b9\u7684class\u76f8\u5173\u7684\u6d4f\u89c8\u5668\u5904\u7406\u64cd\u4f5c\\n\\n\u6d4f\u89c8\u5668\u5728js\u6267\u884c\u671f\u95f4\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002\u6240\u4ee5\u8fd9\u5c31\u662f\u7f51\u4e0a\u8bf4\u7684\u4f7f\u7528`class`\u6837\u5f0f\u51cf\u5c11\u5bf9\u8282\u70b9`style`\u7684\u64cd\u4f5c\uff1f\\n\\n```CSS\\n.style {\\n    color: red;\\n    height: 100px;\\n}\\n```\\n\\n```js\\nbtn.onclick = () => {\\n  const className = div.className;\\n  div.className = `style`;\\n  // \u6216\u8005\u4e0b\u9762\u7684\u4ee3\u7801\\n  /*\\n    div.classList.add(\'style\');\\n    const className = div.classList.toString();\\n    */\\n};\\n```\\n\\n### performance\u8bb0\u5f55\\n\\n![record10](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/record10.png)\\n\\n## \u5173\u4e8ewindow.getComputedStyle()\\n\\n> ![computed-style](./\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f/computed-style.png)\\n\\n## \u4f18\u5316\u56de\u6d41\u3001\u91cd\u7ed8\\n\\n1. \u7f51\u4e0a\u8bf4\u7684\u63a8\u8350\u4f7f\u7528class\u7c7b\u540d/cssText\u8bbe\u7f6e\u6837\u5f0f\u5c11\u7528style\u64cd\u4f5cdom\u53ef\u4ee5\u51cf\u5c11\u6d4f\u89c8\u5668\u7684\u4e00\u4e9b\u64cd\u4f5c\uff08\u6837\u5f0f\u8ba1\u7b97\u3001\u5f3a\u5236\u540c\u6b65\u5e03\u5c40\u7b49\uff09\uff0c\u51cf\u5c11\u6027\u80fd\u6d88\u8017\\n2. \u7f51\u4e0a\u8bf4\u7684\u64cd\u4f5cstyle\u65f6\uff0c\u8bfb\u5199\u5206\u79bb\uff0c\u5148\u8bfb\u540e\u5199\uff0c\u4e5f\u53ef\u4ee5\u51cf\u5c11\u4e00\u4e9b\u6837\u5f0f\u8ba1\u7b97\u7684\u6027\u80fd\u6d88\u8017\\n3. \\"\u79bb\u7ebf\\"\u4fee\u6539dom\\n   - \u4f7f\u7528`documentFragment`\\n   - \u514b\u9686\u9700\u8981\u64cd\u4f5c\u7684\u8282\u70b9\uff0c\u64cd\u4f5cdom\u5b8c\u6210\u540e\uff0c\u518d\u66ff\u6362\u88ab\u514b\u9686\u7684\u8282\u70b9\\n   - \u4f7f\u7528`display: none`\u9690\u85cf\u8282\u70b9\uff0c\u64cd\u4f5cdom\u5b8c\u6210\u540e\uff0c\u518d\u663e\u793a\u8282\u70b9\u3002\u6700\u591a\u6709\u4e24\u6b21\u56de\u6d41\uff0c\u907f\u514d\u4e86\u53ef\u80fd\u7684\u66f4\u591a\u7684\u56de\u6d41\u3002\\n4. \u4f7f\u7528\u53d8\u91cf\u7f13\u5b58\u201c\u654f\u611f\u201d\u5c5e\u6027\uff08\u9664\u4e86getComputedStyle\uff0ccurrentStyle\uff09,`offsetWidth`\u7b49\u7684\u503c\u662f\u6570\u5b57\uff0c\u6ca1\u6709\u5f15\u7528\u5173\u7cfb\uff0c\u53ef\u4ee5\u88ab\u5f53\u4f5c\u4e00\u4e2a\u65b0\u503c\u4f7f\u7528\\n5. \u4f7f\u7528\u7edd\u5bf9\u5b9a\u4f4d\uff0c\u51cf\u5c11\u5176\u5bf9\u5176\u4ed6\u8282\u70b9\u7684\u5f71\u54cd\\n6. \u6ca1\u4e8b\u513f\u4e0d\u8981\u7528window.getComputedStyle()\u83b7\u53d6\u6837\u5f0f\\n\\n## \u6765\u6e90\\n\\n> https://www.phpied.com/rendering-repaint-reflowrelayout-restyle/ > https://dl.acm.org/doi/10.1145/1772690.1772741 > https://yonatankra.com/layout-reflow/ > https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle"},{"id":"/2021/12/01/\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe","metadata":{"permalink":"/blog/index/2021/12/01/\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe","source":"@site/blog/2021/12/01/\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe.md","title":"\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe","description":"\u6765\u6e90","date":"2021-12-01T00:00:00.000Z","formattedDate":"2021\u5e7412\u67081\u65e5","tags":[{"label":"d3","permalink":"/blog/index/tags/d-3"}],"readingTime":1.445,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe","toc_max_heading_level":6,"tags":["d3"]},"prevItem":{"title":"\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f","permalink":"/blog/index/2021/12/04/\u900f\u8fc7performance\u63a2\u7a76js\u64cd\u4f5cdom\u6837\u5f0f\u65f6\u6d4f\u89c8\u5668\u4f1a\u505a\u4ec0\u4e48\uff1f"},"nextItem":{"title":"\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316","permalink":"/blog/index/2021/11/30/\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6765\u6e90\\n\\n> https://iowiki.com/d3js/ > https://www.d3js.org.cn/document/\\n\\n## \u603b\u7ed3\\n\\n### \u8f74\u5728\u5de6\u4e0b\u89d2\u7684\u5bf9\u9f50\\n\\n\u7eb5\u8f74\u6bd4\u4f8b\u5c3a\u6e32\u67d3\u7684\u6700\u5927\u9ad8\u5ea6 = \u6a2a\u8f74\u5728y\u65b9\u5411\u7684\u504f\u79fb\u91cf\\n\\n### \u6a2a\u8f74\u4e0a\u523b\u5ea6\u7684\u95f4\u9694\\n\\n\u672c\u4f8b\u4e2d\u6a2a\u8f74\u4f7f\u7528\u7684\u662f\u79bb\u6563\u6bd4\u4f8b\u5c3a\uff0c\u6709`padding()`\u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u8c03\u6574\u523b\u5ea6\u95f4\u7684\u95f4\u9694\u3002\\n\\n![gap](./\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe/gap.png)\\n\\n\u672c\u4f8b\u4e2d\u4f7f\u523b\u5ea6\u7684\u5185\u5916\u95f4\u9694\u4fdd\u6301\u4e00\u81f4\u3002\\n\\n## csv\u6570\u636e\\n\\n\u957f\u8fd9\u4e2a\u6837\u5b50\\n![csv](./\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe/csv.png)\\n\\n## \u6e90\u7801\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <script src=\\"https://d3js.org/d3.v5.min.js\\"><\/script>\\n    <script>\\n      const svgWidth = 600,\\n        svgHeight = 400,\\n        margin = 120,\\n        axisWidth = svgWidth - margin,\\n        axisHeight = svgHeight - margin;\\n      const svg = d3\\n        .select(\\"body\\")\\n        .append(\\"svg\\")\\n        .attr(\\"height\\", svgHeight)\\n        .attr(\\"width\\", svgWidth);\\n\\n      // \u7eb5\u8f74\u6bd4\u4f8b\u5c3a\\n      const yScale = d3.scaleLinear().range([axisHeight, 0]);\\n      // \u6a2a\u8f74\u6bd4\u4f8b\u5c3a\\n      const xScale = d3.scaleBand().range([0, axisWidth]).padding(0.4);\\n\\n      // \u521b\u5efa\u7ec4\u5143\u7d20\uff0c\u8c03\u6574\u56fe\u8868\u5728svg\u4e2d\u7684\u4f4d\u7f6e\\n      const g = svg.append(\\"g\\").attr(\\"transform\\", \\"translate(50, 50)\\");\\n\\n      d3.csv(\\"../bar_data.csv\\").then((data) => {\\n        xScale.domain(data.map((d) => d.year));\\n        yScale.domain([0, d3.max(data, (d) => d.value)]);\\n\\n        // \u6dfb\u52a0\u6a2a\u8f74\\n        g.append(\\"g\\")\\n          .attr(\\"transform\\", `translate(0, ${axisHeight})`)\\n          .call(d3.axisBottom(xScale));\\n        // \u6dfb\u52a0\u7eb5\u8f74\\n        g.append(\\"g\\").call(d3.axisLeft(yScale));\\n\\n        // \u6dfb\u52a0\u67f1\u5f62\\n        g.selectAll(\\".bar\\")\\n          .data(data)\\n          .enter()\\n          .append(\\"rect\\")\\n          .attr(\\"class\\", \\"bar\\")\\n          .attr(\\"x\\", (d) => xScale(d.year))\\n          .attr(\\"y\\", (d) => yScale(d.value))\\n          .attr(\\"width\\", xScale.bandwidth())\\n          .attr(\\"height\\", (d) => axisHeight - yScale(d.value))\\n          .attr(\\"fill\\", \\"green\\");\\n      });\\n    <\/script>\\n  </body>\\n</html>\\n```"},{"id":"/2021/11/30/\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316","metadata":{"permalink":"/blog/index/2021/11/30/\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316","source":"@site/blog/2021/11/30/\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316.md","title":"\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316","description":"\u6765\u6e90","date":"2021-11-30T00:00:00.000Z","formattedDate":"2021\u5e7411\u670830\u65e5","tags":[{"label":"d3","permalink":"/blog/index/tags/d-3"}],"readingTime":3.625,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316","toc_max_heading_level":6,"tags":["d3"]},"prevItem":{"title":"\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe","permalink":"/blog/index/2021/12/01/\u57fa\u4e8ed3\u7684\u5e26\u8f74\u7684\u67f1\u7ebf\u56fe"},"nextItem":{"title":"\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570","permalink":"/blog/index/2021/11/30/\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6765\u6e90\\n\\n> https://github.com/xiaozfang/arithmetic-visualization/blob/master/web/view/bubbleSort.html\\n\\n## \u603b\u7ed3\\n\\n\u60f3\u8981\u5b9e\u73b0\u52a8\u753b\u6548\u679c\uff0c\u9700\u8981\u914d\u5408\u4f7f\u7528\u5b9a\u65f6\u5668\u548c\u52a8\u753b\u3002\\n\\n\u56e0\u4e3a\u5192\u6ce1\u6392\u5e8f\u662f\u53cc\u5c42\u5faa\u73af\u6392\u5e8f\uff0c\u60f3\u8981\u5b9e\u73b0\u6bcf\u6b21\u6bd4\u8f83\u90fd\u53ef\u4ee5\u52a8\u753b\u5316\uff0c\u5219\u5b9a\u65f6\u5668\u548c\u52a8\u753b\u987b\u5728\u5185\u5c42\u5faa\u73af\u3002\u56e0\u4e3a\u5faa\u73af\u7684\u901f\u5ea6\u5f88\u5feb\uff0c\u4f46\u662f\u60f3\u8981\u770b\u5230\u6bd4\u8f83\u6548\u679c\uff0c\u5c31\u4e0d\u80fd\u592a\u5feb\uff0c\u6240\u4ee5\u9700\u8981\u5ef6\u8fdf\u5faa\u73af\u3002\u8fd9\u91cc\u4f7f\u7528\u5b9a\u65f6\u5668\u201c\u5ef6\u8fdf\u5faa\u73af\u201d\u3002\\n\\n\u5982\u679c\u5916\u5c42\u7ee7\u7eed\u4f7f\u7528\u5faa\u73af\uff0c\u8fc7\u5feb\u7684\u8bdd\u4f1a\u5bfc\u81f4\u5185\u5c42\u5faa\u73af\u4e2d\u7684\u5b9a\u65f6\u5668\u6267\u884c\u6df7\u4e71\uff08\u5185\u5c42\u5faa\u73af\u7684\u5b9a\u65f6\u5668\u6240\u7528\u7684\u65f6\u95f4\u662f\u56fa\u5b9a\u7684\uff0c\u65f6\u95f4\u5230\u5c31\u4f1a\u6267\u884c\u5185\u90e8\u51fd\u6570\uff09\uff0c\u6240\u4ee5\u4f7f\u7528`interval`\u5b9a\u65f6\u5668\u4ee3\u66ff\u5916\u5c42\u5faa\u73af\uff0c\u4e0d\u5f71\u54cd\u5185\u5c42\u7684\u5faa\u73af\u4e14\u53ef\u4ee5\u8fbe\u5230\u5b9a\u65f6\u5faa\u73af\uff08\u5ef6\u8fdf\u5916\u5c42\u5faa\u73af\uff09\u7684\u6548\u679c\u3002\\n\\n## \u6e90\u7801\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <script src=\\"https://d3js.org/d3.v5.min.js\\"><\/script>\\n    <script>\\n      const data = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48],\\n        svgWidth = 500,\\n        svgHeight = 300,\\n        rectWidth = 25,\\n        rectGap = 5, // \u77e9\u5f62\u95f4\u7684\u95f4\u8ddd\\n        textBottom = 10, // \u6587\u5b57\u8ddd\u4e0b\u65b9\u7684\u8ddd\u79bb\\n        // \u5411body\u4e2d\u6dfb\u52a0svg\u8282\u70b9\\n        svg = d3\\n          .select(\\"body\\")\\n          .append(\\"svg\\")\\n          .attr(\\"width\\", svgWidth)\\n          .attr(\\"height\\", svgHeight);\\n\\n      init();\\n      bubbleSort();\\n\\n      // \u521d\u59cb\u5316\u56fe\u5f62\u7ed3\u6784\\n      function init() {\\n        // \u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528\u6bd4\u4f8b\u5c3a\uff0c\u53ef\u4ee5\u7531d3\u63a8\u7b97\u4f20\u5165\u7684\u503c\uff0c\u5728svg\u4e2d\u5e94\u8be5\u6e32\u67d3\u7684\u9ad8\u5ea6\\n        const scale = d3\\n          // \u7ebf\u6027\u6bd4\u4f8b\u5c3a\\n          .scaleLinear()\\n          // \u5b9a\u4e49\u57df\uff08\u4f7f\u7528scale\u65f6\uff0c\u4f20\u5165\u7684\u503c\u5728domain\u8303\u56f4\u5185\uff0c\u5219d3\u63a8\u7b97\u8f93\u51farange\u8303\u56f4\u5185\u7684\u6570\u636e\uff09\\n          .domain([0, d3.max(data)])\\n          // \u503c\u57df(\u6700\u5927\u6e32\u67d3\u5230svg\u7684\u9ad8\u5ea6)\\n          .range([d3.min(data), svgHeight]);\\n        svg\\n          .selectAll(\\"rect\\")\\n          .data(data)\\n          .enter()\\n          .append(\\"g\\")\\n          .append(\\"rect\\")\\n          .attr(\\"width\\", rectWidth)\\n          // d\u662f\u6570\u636e\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\\n          .attr(\\"height\\", (d) => scale(d))\\n          .attr(\\"id\\", (d, i) => `rect${i}`)\\n          // i\u8868\u793a\u6570\u636e\u7d22\u5f15\\n          .attr(\\"x\\", (d, i) => i * (rectWidth + rectGap))\\n          // \u600e\u4e48\u8ba9\u77e9\u5f62\u4ece\u5e95\u90e8\u5411\u4e0a\u5f00\u59cb\uff1f \u8ba9\u7eb5\u8f74\u65b9\u5411\u5411\u4e0b\u504f\u79fb\u5230\u6700\u5927\u7eb5\u8f74\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u51cf\u53bb\u81ea\u5df1\u7684\u9ad8\u5ea6\\n          .attr(\\"y\\", (d) => svgHeight - scale(d))\\n          // \u77e9\u5f62\u586b\u5145\u8272\\n          .style(\\"fill\\", \\"skyblue\\");\\n      }\\n\\n      // \u6392\u5e8f\u4e3b\u65b9\u6cd5\\n      function bubbleSort() {\\n        let i = 0,\\n          j = 0;\\n        // \u5916\u5c42\u5faa\u73af\u4f7f\u7528\u5b9a\u65f6\u5668\u4ee3\u66ff\\n        const timer = d3.interval(() => {\\n          if (i < data.length - 1) {\\n            if (j < data.length - 1 - i) {\\n              compare(j, j + 1);\\n              j++;\\n            } else {\\n              complete(j);\\n              i++;\\n              j = 0;\\n            }\\n          } else {\\n            timer.stop();\\n          }\\n        }, 1000);\\n      }\\n\\n      function compare(key1, key2) {\\n        let min = key1;\\n        // \u521d\u59cb\u5316\u989c\u8272\\n        d3.timeout(() => {\\n          svg\\n            .select(`#rect${key1}`)\\n            .transition()\\n            .duration(100)\\n            .style(\\"fill\\", \\"green\\");\\n          svg\\n            .select(`#rect${key2}`)\\n            .transition()\\n            .duration(100)\\n            .style(\\"fill\\", \\"green\\");\\n        }, 10);\\n        // \u6bd4\u8f83\u503c\u7684\u5927\u5c0f,\u4ea4\u6362\u77e9\u5f62\u4f4d\u7f6e\\n        d3.timeout(() => {\\n          if (data[key1] > data[key2]) {\\n            // \u4ea4\u6362\u503c\\n            [data[key1], data[key2]] = [data[key2], data[key1]];\\n            move_left(key2);\\n            move_right(key1);\\n            min = key2;\\n          }\\n        }, 300);\\n\\n        d3.timeout(() => {\\n          // \u5c0f\u503c\u6062\u590d\u989c\u8272\\n          svg.select(`#rect${min}`).style(\\"fill\\", \\"skyblue\\");\\n        }, 600);\\n      }\\n\\n      function move_right(key) {\\n        svg\\n          .select(`#rect${key}`)\\n          .transition()\\n          .duration(600)\\n          .attr(\\"x\\", (key + 1) * (rectWidth + rectGap))\\n          .attr(\\"id\\", `rect${key + 1}`);\\n      }\\n\\n      function move_left(key) {\\n        svg\\n          .select(`#rect${key}`)\\n          .transition()\\n          .duration(600)\\n          .attr(\\"x\\", (key - 1) * (rectWidth + rectGap))\\n          .style(\\"fill\\", \\"skyblue\\")\\n          .attr(\\"id\\", `rect${key - 1}`);\\n      }\\n\\n      // \u5faa\u73af\u4e00\u8f6e,\u8bbe\u7f6e\u6700\u5927\u503c\u7684\u989c\u8272\\n      function complete(key) {\\n        svg.select(`#rect${key}`).style(\\"fill\\", \\"orange\\");\\n      }\\n    <\/script>\\n  </body>\\n</html>\\n```"},{"id":"/2021/11/30/\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570","metadata":{"permalink":"/blog/index/2021/11/30/\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570","source":"@site/blog/2021/11/30/\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570.md","title":"\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570","description":"\u6765\u6e90","date":"2021-11-30T00:00:00.000Z","formattedDate":"2021\u5e7411\u670830\u65e5","tags":[{"label":"js","permalink":"/blog/index/tags/js"}],"readingTime":2.01,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570","toc_max_heading_level":6,"tags":["js"]},"prevItem":{"title":"\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316","permalink":"/blog/index/2021/11/30/\u57fa\u4e8ed3\u7684\u5192\u6ce1\u6392\u5e8f\u53ef\u89c6\u5316"},"nextItem":{"title":"\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b","permalink":"/blog/index/2021/11/25/\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b"}},"content":"\x3c!-- truncate --\x3e\\n\\n## \u6765\u6e90\\n\\n> https://juejin.cn/post/6968713283884974088#heading-9 > https://mp.weixin.qq.com/s/uKPVedfQkgEPYoRUtwyeQQ\\n\\n## call\\n\\n```js\\nFunction.prototype.mCall = function (context, ...args) {\\n  context = context || window || global;\\n\\n  // \u907f\u514d\u53d8\u91cf\u540d\u91cd\u590d\\n  const funcName = Symbol();\\n  // \u4fdd\u8bc1\u51fd\u6570\u6267\u884c\u65f6\u7684this\u662fcontext(\u8c01\u8c03\u7528\u7684\u8be5\u51fd\u6570\uff0c\u8c01\u5c31\u662f\u51fd\u6570\u6267\u884c\u65f6\u7684this)\\n  context[funcName] = this;\\n  const res = args.length ? context[funcName](...args) : context[funcName]();\\n  // \u5bf9\u5e94\u4e0a\u9762\u7684\u6dfb\u52a0\uff0c\u907f\u514d\u5bf9context\u9020\u6210\u53d8\u91cf\u6c61\u67d3\\n  delete context[funcName];\\n  return res;\\n};\\n```\\n\\n## apply\\n\\n```js\\nFunction.prototype.mApply = function (context, args = []) {\\n  context = context || window || global;\\n\\n  const funcName = Symbol();\\n  context[funcName] = this;\\n\\n  // \u4f20\u5165\u7684\u53c2\u6570\u4e0d\u662f\u6570\u7ec4\\n  if (!Array.isArray(args)) {\\n    args = [];\\n  }\\n\\n  const res = args.length ? context[funcName](...args) : context[funcName]();\\n  delete context[funcName];\\n  return res;\\n};\\n```\\n\\n## bind\\n\\n\u8fd9\u91cc\u6709\u4e00\u4e9b\u7279\u6b8a\uff0c\u5982\u679c\u7ed1\u5b9a\u540e\u8fd4\u56de\u7684\u65b0\u51fd\u6570\u88ab\u4f7f\u7528`new`\u8fd0\u7b97\u7b26\u8c03\u7528\uff0c\u7ed1\u5b9a\u65f6\u7684`this`\u53c2\u6570\u4f1a\u88ab\u5ffd\u7565\\n\\n> \u53c2\u8003\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind >\\n\\n![usage](./\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570/usage.png)\\n\\n### \u539fbind\u51fd\u6570\u5173\u4e8enew\u64cd\u4f5c\u7b26\u7684\u4f7f\u7528\\n\\n> \u53c2\u8003\uff1a\\n> https://www.webhek.com/post/javascript-bind.html > https://mp.weixin.qq.com/s/nI8VHuVQP73DGBrBdh5i2w\\n\\n```js\\nfunction Person(name, age) {\\n  this.name = name;\\n  this.age = age;\\n  console.log(this);\\n}\\nconst mPerson = Person.bind({ height: 180 });\\nmPerson(\\"zhangsan\\", 18); // { height: 180, name: \'zhangsan\', age: 18 }\\nnew mPerson(\\"lisi\\", 19); // Person { name: \'lisi\', age: 19 } ,\u7ed1\u5b9a\u65f6\u7684this\u88ab\u5ffd\u7565\\n```\\n\\n### \u624b\u5199\u5b9e\u73b0\\n\\n```js\\nFunction.prototype.mBind = function (thisArg, ...args) {\\n  thisArg = thisArg || window || global;\\n  const fn = this;\\n  // \u8fd4\u56de\u547d\u540d\u51fd\u6570\uff0c\u7528\u4e8e\u6bd4\u8f83\u662f\u5426\u662f\u4f7f\u7528new\u8fd0\u7b97\u7b26\u8c03\u7528\u7684\u7ed1\u5b9a\u51fd\u6570\\n  return function (/*newFn*/ ...newArgs) {\\n    // \u662f\u4f7f\u7528new\u8fd0\u7b97\u7b26\u8c03\u7528\u7684\u8be5\u51fd\u6570\uff0c\u5ffd\u7565thisArg\\n    // if (this instanceof newFn) {\\n    // return new fn(...args, ...newArgs);\\n    // }\\n    // \u6216\u8005\u4e0b\u9762\u8fd9\u6837\u3002`new.target`\u53ef\u4ee5\u68c0\u6d4b\u51fd\u6570\u662f\u5426\u662f\u7528`new`\u8fd0\u7b97\u7b26\u8c03\u7528\u7684\\n    if (new.target) {\\n      return new fn(...args, ...newArgs);\\n    }\\n    return fn.apply(thisArg, [...args, ...newArgs]);\\n  };\\n};\\n```"},{"id":"/2021/11/25/\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b","metadata":{"permalink":"/blog/index/2021/11/25/\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b","source":"@site/blog/2021/11/25/\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b.md","title":"\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b","description":"\u6700\u7ec8\u6548\u679c","date":"2021-11-25T00:00:00.000Z","formattedDate":"2021\u5e7411\u670825\u65e5","tags":[{"label":"d3","permalink":"/blog/index/tags/d-3"}],"readingTime":4.985,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b","toc_max_heading_level":6,"tags":["d3"]},"prevItem":{"title":"\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570","permalink":"/blog/index/2021/11/30/\u624b\u5199call\u3001apply\u3001bind\u51fd\u6570"},"nextItem":{"title":"Webpack\u6253\u5305library\u521d\u4f53\u9a8c","permalink":"/blog/index/2021/10/28/Webpack\u6253\u5305library\u521d\u4f53\u9a8c"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u6700\u7ec8\u6548\u679c\\n\\n![final](./\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b/final.png)\\n\\n## \u6848\u4f8b\u6e90\u7801\\n\\n<details>\\n\\n  <summary>\u4ee3\u7801</summary>\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <script src=\\"https://d3js.org/d3.v5.min.js\\"><\/script>\\n    <script>\\n      const data = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48],\\n        svgWidth = 500,\\n        svgHeight = 300,\\n        rectWidth = 25,\\n        rectGap = 5, // \u77e9\u5f62\u95f4\u7684\u95f4\u8ddd\\n        textBottom = 10, // \u6587\u5b57\u8ddd\u4e0b\u65b9\u7684\u8ddd\u79bb\\n        // \u5411body\u4e2d\u6dfb\u52a0svg\u8282\u70b9\\n        svg = d3\\n          .select(\\"body\\")\\n          .append(\\"svg\\")\\n          .attr(\\"width\\", svgWidth)\\n          .attr(\\"height\\", svgHeight);\\n\\n      // \u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528\u6bd4\u4f8b\u5c3a\uff0c\u53ef\u4ee5\u7531d3\u63a8\u7b97\u4f20\u5165\u7684\u503c\uff0c\u5728svg\u4e2d\u5e94\u8be5\u6e32\u67d3\u7684\u9ad8\u5ea6\\n      const scale = d3\\n        // \u7ebf\u6027\u6bd4\u4f8b\u5c3a\\n        .scaleLinear()\\n        // \u5b9a\u4e49\u57df\uff08\u4f7f\u7528scale\u65f6\uff0c\u4f20\u5165\u7684\u503c\u5728domain\u8303\u56f4\u5185\uff0c\u5219d3\u63a8\u7b97\u8f93\u51farange\u8303\u56f4\u5185\u7684\u6570\u636e\uff09\\n        .domain([0, d3.max(data)])\\n        // \u503c\u57df(\u6700\u5927\u6e32\u67d3\u5230svg\u7684\u9ad8\u5ea6)\\n        .range([d3.min(data), svgHeight]);\\n\\n      const g = svg\\n        // \u627e\u5230svg\u4e0b\u7684\u6240\u6709g\u6807\u7b7e\uff0c\u5bf9\u5176\u8fdb\u884c\u6dfb\u52a0/\u5220\u9664\u7b49\u64cd\u4f5c\uff0c\u90fd\u662f\u5bf9svg\u4e0b\u7684\u6240\u6709g\u6807\u7b7e\u8fdb\u884c\u64cd\u4f5c\\n        .selectAll(\\"g\\")\\n        // \u52a0\u8f7d\u591a\u4e2a\u6570\u636e\\n        .data(data)\\n        // enter\u548cappend\u4e00\u8d77\u4f7f\u7528\uff0c\u53ef\u4ee5\u5728\u6807\u7b7e\u6570\u91cf\u5c11\u4e8e\u6570\u636e\u6570\u91cf\u65f6\uff0c\u6dfb\u52a0\u6807\u7b7e\uff0c\u76f4\u5230\u6807\u7b7e\u6570\u91cf\u548c\u6570\u636e\u6570\u91cf\u4e00\u81f4\\n        // \u4e0b\u9762\u7684\u64cd\u4f5c\uff0c\u90fd\u662f\u7ed9\u8ffd\u52a0\u7684\\n        .enter()\\n        .append(\\"g\\");\\n      // \u7ed9\u6bcf\u4e2ag\u6807\u7b7e\u6dfb\u52a0\u77e9\u5f62\\n      g.append(\\"rect\\")\\n        .attr(\\"width\\", rectWidth)\\n        // d\u662f\u6570\u636e\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\\n        .attr(\\"height\\", (d) => scale(d))\\n        // i\u8868\u793a\u6570\u636e\u7d22\u5f15\\n        .attr(\\"x\\", (d, i) => i * (rectWidth + rectGap))\\n        // \u600e\u4e48\u8ba9\u77e9\u5f62\u4ece\u5e95\u90e8\u5411\u4e0a\u5f00\u59cb\uff1f \u8ba9\u7eb5\u8f74\u65b9\u5411\u5411\u4e0b\u504f\u79fb\u5230\u6700\u5927\u7eb5\u8f74\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u51cf\u53bb\u81ea\u5df1\u7684\u9ad8\u5ea6\\n        .attr(\\"y\\", (d) => svgHeight - scale(d))\\n        // \u77e9\u5f62\u586b\u5145\u8272\\n        .style(\\"fill\\", \\"skyblue\\");\\n      // \u7ed9\u6bcf\u4e2ag\u6807\u7b7e\u6dfb\u52a0\u6587\u5b57\\n      // \u7ed9rect\u8282\u70b9\u6dfb\u52a0\u6587\u5b57\uff0c\u770b\u4e0d\u5230\u6548\u679c\\n      // NOTE \u5982\u679c\u8981\u5728rect\u8282\u70b9\u4e0a\u663e\u793a\u6587\u5b57\uff0c\u9700\u8981\u5c06text\u8282\u70b9\u6dfb\u52a0\u4e3arect\u7684\u5e73\u7ea7\u8282\u70b9\uff0c\u5e76\u8bbe\u7f6e\u5176x\uff0cy\u5c5e\u6027\u503c\\n      g.append(\\"text\\")\\n        .attr(\\"font-size\\", \\"12px\\")\\n        // text-anchor\u9ed8\u8ba4\u503c\u662fstart\uff0c\u5bf9\u4e2d\u6587\u548c\u6570\u5b57\u6765\u8bf4\u662f\u53f3\u5bf9\u9f50\\n        .attr(\\"text-anchor\\", \\"middle\\")\\n        // \u8c03\u6574\u6587\u5b57\u5728x\u8f74\u7684\u4f4d\u7f6e\u3002\u5728\u77e9\u5f62\u4f4d\u7f6e\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u52a0\u4e0a\u77e9\u5f62\u5bbd\u5ea6\u7684\u4e00\u534a\\n        .attr(\\"x\\", (d, i) => i * (rectWidth + rectGap) + rectWidth / 2)\\n        .attr(\\"y\\", (d) => svgHeight - textBottom)\\n        .text((d) => d);\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n</details>\\n\\n## \u77e5\u8bc6\u70b9\u603b\u7ed3\\n\\n### \u600e\u4e48\u7ed9`rect`\u8282\u70b9\u6dfb\u52a0\u6587\u5b57\uff1f\\n\\n**\u76ee\u524d\u76f4\u63a5\u7ed9`rect`\u4e2d\u6dfb\u52a0`text`\u8282\u70b9\u662f<span style={{color: \'red\', fontStyle: \'italic\'}}>\u6ca1\u6709\u6548\u679c</span>\u7684\u3002**\\n\\n\u60f3\u8981\u7ed9`rect`\u6dfb\u52a0\u6587\u672c\uff0c\u76ee\u524d\u53ea\u80fd\u7528`g`\u6807\u7b7e\u540c\u65f6\u5305\u88f9`rect`\u548c`text`\u8282\u70b9\uff0c\u5e76\u5c06`text`\u8282\u70b9\u7684\u4f4d\u7f6e\uff0c\u8bbe\u7f6e\u5230`rect`\u8282\u70b9\u7684\u4e0a\u8fb9\u3002\u7ed3\u6784\u5c31\u50cf\u8fd9\u6837\\n\\n![text](./\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b/text.png)\\n\\n### \u600e\u4e48\u8ba9\u77e9\u5f62\u7684\u8d77\u70b9\u770b\u8d77\u6765\u5728\u4e0b\u8fb9\uff1f\\n\\n\u56e0\u4e3a\u6240\u6709\u77e9\u5f62\u5f00\u59cb\u65f6\u7684`y`\u5c5e\u6027\u503c\u90fd\u662f0,\u6240\u4ee5\u521d\u59cb\u753b\u9762\u662f\u6240\u6709\u7684\u77e9\u5f62\u770b\u8d77\u6765\u90fd\u662f\u81ea\u4e0a\u800c\u4e0b\u5f00\u59cb\u7684\uff0c\u5c31\u50cf\u8fd9\u6837\uff0c\u5e76\u4e0d\u662f\u60f3\u8981\u7684\u6700\u7ec8\u7ed3\u679c\u3002\\n\\n![start-bottom](./\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b/start-bottom.png)\\n\\n\u60f3\u8981\u77e9\u5f62\u7684\u8d77\u70b9\u770b\u8d77\u6765\u5728\u4e0b\u8fb9\uff0c\u53ef\u4ee5\u7ed9\u77e9\u5f62\u7684`y`\u5c5e\u6027\u503c\u8bbe\u4e3a`svgHeight - \u77e9\u5f62\u7684\u5b9e\u9645\u9ad8\u5ea6`\uff0c\u8fd9\u6837\u5c31\u80fd\u4f7f\u77e9\u5f62\u8d77\u70b9\u7684\u7684\u663e\u793a\u6548\u679c\u770b\u8d77\u6765\u5728\u4e0b\u8fb9\u3002\\n\\n### \u600e\u4e48\u6837\u8ba9\u6587\u5b57\u5728\u77e9\u5f62\u7684\u4e2d\u95f4\u663e\u793a\uff1f\\n\\n\u56e0\u4e3a`rect`\u8282\u70b9\u548c`text`\u8282\u70b9\u5e73\u7ea7\u663e\u793a\uff0c\u53ef\u4ee5\u7ed9`text`\u8282\u70b9\u7684`y`\u5c5e\u6027\u503c\u8bbe\u4e3a`svgHeight - \u4e00\u4e9b\u81ea\u5df1\u89c9\u5f97\u9002\u5408\u7684\u9ad8\u5ea6`,\u8ba9\u6587\u672c\u5728\u77e9\u5f62\u7684`\u8d77\u70b9`\u9644\u8fd1\u663e\u793a\uff1b\u7ed9`text`\u8282\u70b9\u7684`x`\u5c5e\u6027\u503c\u8bbe\u4e3a`\u77e9\u5f62\u7684x\u5c5e\u6027\u503c + \u77e9\u5f62\u5bbd\u5ea6\u7684\u4e00\u534a`\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u6548\u679c\u5982\u4e0b\uff0c\u6587\u5b57\u6709\u4e9b\u504f\u53f3\uff0c\u4e0d\u5408\u9884\u671f\u3002\\n\\n![center](./\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b/center.png)\\n\\n\u5728\u4e0a\u9762\u7684\u57fa\u7840\u4e0a\u53ef\u4ee5\u7ed9`text`\u8282\u70b9\u6dfb\u52a0`text-anchor: start | middle | end;`\u5c5e\u6027\uff0c\u6307\u5b9a\u6587\u672c\u7684\u5bf9\u9f50\u65b9\u5f0f\u3002\u4e3a\u4e86\u8ba9\u6587\u672c\u5c45\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528`text-anchor: middle;`,\u5373\u53ef\u8fbe\u6210\u6548\u679c\u3002\\n\\n**\u4e00\u4e2a\u6ce8\u610f\u70b9**\\n\u5f53`text-anchor`\u503c\u4e3a`start`\u65f6\uff0c\u7ecf\u672c\u4eba\u6d4b\u8bd5\u540e\uff0c\u5185\u5bb9\u662f\u4e2d\u6587\u548c\u6570\u5b57\u65f6\u8ba4\u4e3a\u5176\u662f`\u53f3\u5bf9\u9f50`\u3002\u5177\u4f53\u4f7f\u7528\u65b9\u5f0f\u53ef\u53c2\u8003[MDN](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/text-anchor \\"MDN\\")"},{"id":"/2021/10/28/Webpack\u6253\u5305library\u521d\u4f53\u9a8c","metadata":{"permalink":"/blog/index/2021/10/28/Webpack\u6253\u5305library\u521d\u4f53\u9a8c","source":"@site/blog/2021/10/28/Webpack\u6253\u5305library\u521d\u4f53\u9a8c.md","title":"Webpack\u6253\u5305library\u521d\u4f53\u9a8c","description":"\u6982\u8ff0","date":"2021-10-28T00:00:00.000Z","formattedDate":"2021\u5e7410\u670828\u65e5","tags":[{"label":"webpack","permalink":"/blog/index/tags/webpack"}],"readingTime":3.76,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Webpack\u6253\u5305library\u521d\u4f53\u9a8c","toc_max_heading_level":6,"tags":["webpack"]},"prevItem":{"title":"\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b","permalink":"/blog/index/2021/11/25/\u7b2c\u4e00\u4e2a\u6210\u578b\u7684d3\u6848\u4f8b"},"nextItem":{"title":"CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0","permalink":"/blog/index/2021/10/15/CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u6982\u8ff0\\n\\n> \u4ee5\u4e0b\u5185\u5bb9\u5747\u4ee5`webpack`\u914d\u7f6e\u4e2d\u7684`output.library.type: \'umd\'`\u4e3a\u57fa\u7840\\n\\n\u4f7f\u7528`webpack`\u5c06\u6587\u4ef6\u6253\u5305\u4e3a`library`\u540e\uff0c\u6253\u5305\u597d\u7684\u6587\u4ef6\u88ab`script`\u6807\u7b7e\u5f15\u7528\u65f6\uff0c`library`\u7684\u540d\u5b57\u4f1a\u88ab\u653e\u5728\u5168\u5c40\u53d8\u91cf\u4e2d\u7b49\u5f85\u4f7f\u7528\uff0c\u81f3\u4e8e\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\uff0c\u5219\u4e0e`webpack`\u914d\u7f6e\u4e2d\u7684`output.library.export`\u5c5e\u6027\u503c\u76f8\u5173\u3002\\n\\n### export\u9ed8\u8ba4\u503c\\n\\n\u5f53\u6ca1\u6709\u914d\u7f6e`output.library.export`/`output.library.type`\u4e3a\u7a7a\u5b57\u7b26\u4e32\u65f6\uff0cexport\u7684\u9ed8\u8ba4\u503c\u4e3a`undefined`.\u6b64\u65f6\u6253\u5305`library`\uff0c\u5728\u4f7f\u7528\u5e93\u65f6\uff0c\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\u4e3a\u4e3b\u6587\u4ef6\u4e0b\u7684\u6240\u6709\u5bfc\u51fa\u5185\u5bb9\\n\\n### export: \'default\'\\n\\n\u5f53`output.library.export`\u7684\u503c\u4e3a`default`\u65f6\u6253\u5305\uff0c\u6253\u5305\u540e\u5728\u4f7f\u7528\u5e93\u65f6\uff0c\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\u4e3a\u4e3b\u6587\u4ef6\u4e0b\u4f7f\u7528\u5173\u952e\u5b57`export default`\u5bfc\u51fa\u7684\u5185\u5bb9\\n\\n### export: [\'xx1\', \'xx2\']\\n\\n\u5f53`output.library.export`\u7684\u503c\u4e3a`[\'xx1\', \'xx2\']`\u65f6\u6253\u5305\uff0c\u6253\u5305\u540e\u5728\u4f7f\u7528\u5e93\u65f6\uff0c\u5e93\u540d\u4e0b\u7684\u5185\u5bb9\u4e3a\u4e3b\u6587\u4ef6\u4e0b\u4f7f\u7528\u5173\u952e\u5b57`export let/const xx1`\u5bfc\u51fa\u7684\u5185\u5bb9\u4e2d\u7684`xx2`\u7684\u5c5e\u6027\u503c\\n\\n## \u6848\u4f8b\u6f14\u793a\\n\\n### \u51c6\u5907\u5de5\u4f5c\\n\\n#### \u521d\u59cb\u5316\u9879\u76ee\\n\\n```shell\\nnpm init -y\\n```\\n\\n#### \u5b89\u88c5webpack\\n\\n```shell\\nnpm i webpack webpack-cli -D\\n```\\n\\n#### \u914d\u7f6ewebpack\\n\\n```js\\nconst { resolve } = require(\\"path\\");\\nmodule.exports = {\\n  mode: \\"development\\",\\n  entry: \\"./src/index.js\\",\\n  output: {\\n    filename: \\"bundle.js\\",\\n    path: resolve(__dirname, \\"dist\\"),\\n    library: {\\n      name: \\"Testfile\\", // \u5e93\u540d\\n      type: \\"umd\\", // \u5141\u8bb8\u5bfc\u51fa\u7684\u5e93\u53ef\u4ee5\u5728CommonJS/AMD\u7684\u89c4\u8303\u4e0b\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5168\u5c40\u53d8\u91cf\u4f7f\u7528\\n      export: \\"default\\", // \u9ed8\u8ba4\u662fundefined\uff0c\u4e0d\u80fd\u662f\u7a7a\u5b57\u7b26\u4e32[\u6253\u5305\u4f1a\u62a5\u9519]\\n    },\\n  },\\n};\\n```\\n\\n#### \u65b0\u5efa\u6d4b\u8bd5js\u6587\u4ef6\\n\\n##### \u65b0\u5efatest.js\u6587\u4ef6\\n\\n\u5728\u6839\u76ee\u5f55\u7684src\u76ee\u5f55\u4e0b\u521b\u5efa`test.js`\u6587\u4ef6\\n\\n```js\\nclass Test {\\n  constructor() {}\\n\\n  setAge(age) {\\n    this.age = age;\\n  }\\n\\n  getAge() {\\n    return this.age;\\n  }\\n}\\n\\nexport default Test;\\n```\\n\\n##### \u65b0\u5efaindex.js\u6587\u4ef6\\n\\n\u5728\u6839\u76ee\u5f55\u7684src\u76ee\u5f55\u4e0b\u521b\u5efa`index.js`\u6587\u4ef6\\n\\n```js\\nimport Test from \\"./Test\\";\\n\\nexport let a = 3;\\nexport let obj = { chineseName: \\"\u4e2d\u56fd\\" };\\nexport default Test;\\n```\\n\\n#### \u65b0\u5efa\u6d4b\u8bd5index.html\u6587\u4ef6\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n  </head>\\n  <body>\\n    <script src=\\"./dist/bundle.js\\"><\/script>\\n    <script>\\n      debugger;\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n### \u914d\u7f6ewebpack\u5230package.json\\n\\n\u5728`package.json`\u4e2d\u7684`scripts`\u4e0b\u6dfb\u52a0\\n\\n```json\\n\\"dev\\": \\"webpack\\"\\n```\\n\\n### \u6253\u5305\u6d4b\u8bd5\\n\\n\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u8f93\u5165`npm run dev`,\u6253\u5305\u5e93\\n\\n#### \u8fd0\u884cindex.html\u6587\u4ef6\\n\\n\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00`index.html`\u6587\u4ef6\uff0c\u5e76\u6253\u5f00\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u5237\u65b0\u9875\u9762\u3002\\n\\n##### export\u7c7b\u578b\\n\\n###### webpack\u4e2d\u6ca1\u6709\u914d\u7f6eexport\u5c5e\u6027\\n\\n\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf`Testfile`\u7684\u5185\u5bb9\u4e3a\\n![no-export](./Webpack\u6253\u5305library\u521d\u4f53\u9a8c/no-export.png)\\n\\n\u6b64\u65f6Testfile\u662f\u4e00\u4e2a\u5305\u542b\u4e86`index.js`\u4e2d\u5bfc\u51fa\u7684\u6240\u6709\u5185\u5bb9\u7684\u5bf9\u8c61\\n\\n###### export\u5c5e\u6027\u503c\u4e3adefault\\n\\n\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf`Testfile`\u7684\u5185\u5bb9\u4e3a\\n![default](./Webpack\u6253\u5305library\u521d\u4f53\u9a8c/default.png)\\n\u6b64\u65f6Testfile\u662f`index.js`\u4e2d\u4f7f\u7528`export default`\u5bfc\u51fa\u7684\u5185\u5bb9\\n\\n###### export\u5c5e\u6027\u503c\u4e3aa\\n\\n\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf`Testfile`\u7684\u5185\u5bb9\u4e3a\\n![a](./Webpack\u6253\u5305library\u521d\u4f53\u9a8c/a.png)\\n\u6b64\u65f6Testfile\u662f`index.js`\u4e2d\u4f7f\u7528`export let a = 3`\u5bfc\u51fa\u7684\u5185\u5bb9\u7ed3\u679c\u503c\\n\\n###### export\u5c5e\u6027\u503c\u4e3a[\'obj\', \'chineseName\']\\n\\n\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u770b\u5230\u5168\u5c40\u53d8\u91cf`Testfile`\u7684\u5185\u5bb9\u4e3a\\n![arr](./Webpack\u6253\u5305library\u521d\u4f53\u9a8c/arr.png)\\n\u6b64\u65f6Testfile\u662f`index.js`\u4e2d\u4f7f\u7528`export let obj = {chineseName: \'\u4e2d\u56fd\'}`\u5bfc\u51fa\u7684\u5185\u5bb9\u7ed3\u679c\u503c"},{"id":"/2021/10/15/CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0","metadata":{"permalink":"/blog/index/2021/10/15/CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0","source":"@site/blog/2021/10/15/CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0.md","title":"CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0","description":"\u5b9a\u4e49\u52a8\u753b","date":"2021-10-15T00:00:00.000Z","formattedDate":"2021\u5e7410\u670815\u65e5","tags":[{"label":"css","permalink":"/blog/index/tags/css"}],"readingTime":1.375,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0","toc_max_heading_level":6,"tags":["css"]},"prevItem":{"title":"Webpack\u6253\u5305library\u521d\u4f53\u9a8c","permalink":"/blog/index/2021/10/28/Webpack\u6253\u5305library\u521d\u4f53\u9a8c"},"nextItem":{"title":"VSCode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236","permalink":"/blog/index/2021/10/15/VScode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u5b9a\u4e49\u52a8\u753b\\n\\n### \u7b2c\u4e00\u79cd\u65b9\u5f0f\\n\\n```css\\n@keyframes \u52a8\u753b\u540d\u79f0 {\\n  0% {\\n    /* \u4f7f\u7528\u52a8\u753b\u7684\u8282\u70b9\u57280%\u4f4d\u7f6e\u7684\u52a8\u753b\u3002\u5373\u521a\u5f00\u59cb\u7684\u52a8\u753b */\\n  }\\n  100% {\\n    /* \u4f7f\u7528\u52a8\u753b\u7684\u8282\u70b9\u5728100%\u4f4d\u7f6e\u7684\u52a8\u753b\u3002\u5373\u7ed3\u675f\u52a8\u753b */\\n  }\\n}\\n```\\n\\n### \u7b2c\u4e8c\u79cd\u65b9\u5f0f\\n\\n```css\\n@keyframes \u52a8\u753b\u540d\u79f0 {\\n  from {\\n    /* \u5f00\u59cb\u52a8\u753b */\\n  }\\n  to {\\n    /* \u7ed3\u675f\u52a8\u753b */\\n  }\\n}\\n```\\n\\n## \u4f7f\u7528\u52a8\u753b\\n\\n```css\\n\u5339\u914d\u4f7f\u7528\u52a8\u753b\u7684\u8282\u70b9 {\\n  /* \u4f7f\u7528\u52a8\u753b\u65f6\uff0c\u4e00\u5b9a\u8981\u6709\u4e0b\u9762\u4e24\u4e2acss\u5c5e\u6027 */\\n  animation-name:  /* \u4e0a\u9762\u5b9a\u4e49\u7684\u52a8\u753b\u540d\u79f0 *;\\n  animation-duration:  /* \u52a8\u753b\u6301\u7eed\u7684\u65f6\u95f4\uff0c\u59825s *;\\n}\\n```\\n\\n## \u6848\u4f8b\\n\\n\u6848\u4f8b\u4e2d\u4f7f\u7528\u4e86\u7b2c\u4e00\u79cd\u5b9a\u4e49\u52a8\u753b\u7684\u65b9\u5f0f\u3002\\n\\n### \u4ee3\u7801\\n\\n```html\\n<!doctype html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>css3\u52a8\u753b\u4f7f\u7528</title>\\n    <style>\\n      @keyframes move {\\n        0% {\\n          transform: translate(0, 0);\\n        }\\n        25% {\\n          transform: translate(100px, 0);\\n        }\\n        50% {\\n          transform: translate(100px, 100px);\\n        }\\n        75% {\\n          transform: translate(0, 100px);\\n        }\\n        100% {\\n          transform: translate(0, 0);\\n        }\\n      }\\n\\n      div {\\n        width: 100px;\\n        height: 100px;\\n        background-color: pink;\\n        /* \u4f7f\u7528\u52a8\u753b\u65f6\uff0c\u4e00\u5b9a\u8981\u6709\u4e0b\u9762\u4e24\u4e2acss\u5c5e\u6027 */\\n        animation-name: move;\\n        animation-duration: 5s;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div></div>\\n  </body>\\n</html>\\n```\\n\\n## \u5b9e\u73b0\u6548\u679c\\n\\n![\u6548\u679c](./CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0/demo.gif)"},{"id":"/2021/10/15/VScode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236","metadata":{"permalink":"/blog/index/2021/10/15/VScode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236","source":"@site/blog/2021/10/15/VScode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236.md","title":"VSCode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236","description":"\u521d\u59cb\u5316node","date":"2021-10-15T00:00:00.000Z","formattedDate":"2021\u5e7410\u670815\u65e5","tags":[{"label":"nodejs","permalink":"/blog/index/tags/nodejs"}],"readingTime":0.855,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"VSCode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236","toc_max_heading_level":6,"tags":["nodejs"]},"prevItem":{"title":"CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0","permalink":"/blog/index/2021/10/15/CSS3\u52a8\u753b\u4f7f\u7528\u7b14\u8bb0"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u521d\u59cb\u5316node\\n\\n```shell\\nnpm init -y\\n```\\n\\n## \u5b89\u88c5babel\u6a21\u5757\\n\\n```shell\\nnpm i @babel/cli @babel/core @babel/node @babel/preset-env\\n```\\n\\n## \u914d\u7f6ebabel\u6587\u4ef6\\n\\n\u5982\u679c\u76ee\u5f55\u4e2d\u6ca1\u6709`.babelrc`\u6587\u4ef6\uff0c\u65b0\u5efa\u4e00\u4e2a`.babelrc`\u6587\u4ef6\u3002\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\\n\\n```js\\n{\\n\\t\\"presets\\": [\\n\\t\\t\\"@babel/preset-env\\"\\n\\t]\\n}\\n```\\n\\n## \u65b0\u5efa\u6d4b\u8bd5\u6587\u4ef6\\n\\n\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a`test.js`\u7684\u6587\u4ef6\u3002\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\\n\\n```js\\nconsole.log(\\"babel is ok.\\");\\n```\\n\\n## \u8fd0\u884c\u6d4b\u8bd5\u6587\u4ef6\\n\\n\u4f7f\u7528<kbd>Ctrl</kbd> + <kbd>\\\\`</kbd>\uff0c\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u786e\u4fdd\u63a7\u5236\u53f0\u76ee\u5f55\u5728`test.js`\u6240\u5728\u76ee\u5f55\uff0c\u8fd0\u884c\u547d\u4ee4`babel-node .\\\\test.js`\\n\\n## \u6d4b\u8bd5\u7ed3\u679c\\n\\n\u5982\u679c\u63a7\u5236\u53f0\u8f93\u51fa\u4e4b\u524d\u5728`test.js`\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\uff0c\u8868\u793a\u73af\u5883\u642d\u5efa\u6210\u529f\u3002\u5373\\n![demo](./VSCode\u4e2dNodejs\u4f7f\u7528babel\u8fd0\u884cES6\u6a21\u5757\u673a\u5236/demo.png)"}]}')}}]);